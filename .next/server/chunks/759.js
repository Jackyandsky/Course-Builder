exports.id=759,exports.ids=[759],exports.modules={9403:(e,t,s)=>{Promise.resolve().then(s.bind(s,92910))},62881:(e,t,s)=>{"use strict";s.d(t,{Z:()=>u});var r=s(17577);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),i=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,s)=>s?s.toUpperCase():t.toLowerCase()),l=e=>{let t=i(e);return t.charAt(0).toUpperCase()+t.slice(1)},c=(...e)=>e.filter((e,t,s)=>!!e&&""!==e.trim()&&s.indexOf(e)===t).join(" ").trim(),o=e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0};/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var n={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let d=(0,r.forwardRef)(({color:e="currentColor",size:t=24,strokeWidth:s=2,absoluteStrokeWidth:a,className:i="",children:l,iconNode:d,...u},h)=>(0,r.createElement)("svg",{ref:h,...n,width:t,height:t,stroke:e,strokeWidth:a?24*Number(s)/Number(t):s,className:c("lucide",i),...!l&&!o(u)&&{"aria-hidden":"true"},...u},[...d.map(([e,t])=>(0,r.createElement)(e,t)),...Array.isArray(l)?l:[l]])),u=(e,t)=>{let s=(0,r.forwardRef)(({className:s,...i},o)=>(0,r.createElement)(d,{ref:o,iconNode:t,className:c(`lucide-${a(l(e))}`,`lucide-${e}`,s),...i}));return s.displayName=l(e),s}},86333:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});let r=(0,s(62881).Z)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},39183:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});let r=(0,s(62881).Z)("chevron-right",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]])},83855:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});let r=(0,s(62881).Z)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},31215:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});let r=(0,s(62881).Z)("save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]])},88307:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});let r=(0,s(62881).Z)("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]])},94019:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});let r=(0,s(62881).Z)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},92910:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>l});var r=s(10326),a=s(62760),i=s(80341);function l({children:e}){return r.jsx(i.AuthGuard,{children:r.jsx(a.DashboardLayout,{children:e})})}},93469:(e,t,s)=>{"use strict";s.d(t,{x:()=>p});var r=s(10326),a=s(17577),i=s(35047),l=s(86333),c=s(83855);let o=(0,s(62881).Z)("grip-vertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]);var n=s(94019),d=s(31215),u=s(64727),h=s(78188),g=s(85439);function p({initialData:e}){let t=(0,i.useRouter)(),s=!!e,[p,m]=(0,a.useState)(!1),[x,y]=(0,a.useState)(""),[v,b]=(0,a.useState)("#6b7280"),[f,j]=(0,a.useState)(!1),[C,w]=(0,a.useState)([]),[k,N]=(0,a.useState)({title:e?.title||"",short_description:e?.short_description||"",description:e?.description||"",category_id:e?.category_id||"",status:e?.status||"draft",difficulty:e?.difficulty||"beginner",duration_hours:e?.duration_hours||"",objectives:e?.objectives||[],prerequisites:e?.prerequisites||[],tags:e?.tags||[],thumbnail_url:e?.thumbnail_url||"",is_public:e?.is_public||!1}),[_,Z]=(0,a.useState)({}),[I,q]=(0,a.useState)(""),[S,z]=(0,a.useState)(""),[D,A]=(0,a.useState)(""),P=async()=>{try{let e=await h.G.getCategories({type:"course"});w(e)}catch(e){console.error("Failed to load categories:",e)}},O=()=>{let e={};return k.title.trim()||(e.title="Title is required"),k.title.length>200&&(e.title="Title must be less than 200 characters"),k.short_description&&k.short_description.length>300&&(e.short_description="Short description must be less than 300 characters"),k.duration_hours&&isNaN(Number(k.duration_hours))&&(e.duration_hours="Duration must be a number"),Z(e),0===Object.keys(e).length},E=async r=>{if(r.preventDefault(),O())try{j(!0);let r={...k,duration_hours:k.duration_hours?Number(k.duration_hours):void 0};s?await u.J.updateCourse({id:e.id,...r}):await u.J.createCourse(r),t.push("/courses")}catch(e){console.error("Failed to save course:",e),Z({submit:"Failed to save course. Please try again."})}finally{j(!1)}},$=()=>{I.trim()&&(N({...k,objectives:[...k.objectives,I.trim()]}),q(""))},M=e=>{N({...k,objectives:k.objectives.filter((t,s)=>s!==e)})},U=()=>{S.trim()&&(N({...k,prerequisites:[...k.prerequisites,S.trim()]}),z(""))},L=e=>{N({...k,prerequisites:k.prerequisites.filter((t,s)=>s!==e)})},T=()=>{D.trim()&&!k.tags.includes(D.trim())&&(N({...k,tags:[...k.tags,D.trim()]}),A(""))},H=e=>{N({...k,tags:k.tags.filter(t=>t!==e)})},B=async()=>{if(x.trim())try{let e=await h.G.createCategory({name:x,type:"course",color:v});m(!1),y(""),await P(),N({...k,category_id:e.id})}catch(e){console.error("Failed to create category:",e)}};return(0,r.jsxs)("form",{onSubmit:E,className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,r.jsxs)("div",{className:"mb-8",children:[r.jsx(g.zx,{type:"button",variant:"ghost",size:"sm",onClick:()=>t.push("/courses"),leftIcon:r.jsx(l.Z,{className:"h-4 w-4"}),className:"mb-4",children:"Back to Courses"}),r.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:s?"Edit Course":"Create New Course"})]}),_.submit&&r.jsx("div",{className:"mb-6 p-4 bg-red-50 dark:bg-red-900/20 text-red-600 dark:text-red-400 rounded-lg",children:_.submit}),(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)(g.Zb,{children:[r.jsx(g.Zb.Header,{children:r.jsx("h2",{className:"text-lg font-semibold",children:"Basic Information"})}),r.jsx(g.Zb.Content,{children:(0,r.jsxs)("div",{className:"space-y-4",children:[r.jsx(g.II,{label:"Course Title",value:k.title,onChange:e=>N({...k,title:e.target.value}),error:_.title,placeholder:"Enter course title",required:!0}),r.jsx(g.II,{label:"Short Description",value:k.short_description,onChange:e=>N({...k,short_description:e.target.value}),error:_.short_description,placeholder:"Brief description (max 300 characters)",helperText:`${k.short_description.length}/300 characters`}),r.jsx(g.gx,{label:"Full Description",value:k.description,onChange:e=>N({...k,description:e.target.value}),placeholder:"Detailed course description",rows:6}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Category"}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[r.jsx(g.Ph,{className:"flex-grow",value:k.category_id,onChange:e=>N({...k,category_id:e.target.value}),options:[{value:"",label:"Select category"},...C.map(e=>({value:e.id,label:e.name}))]}),r.jsx(g.zx,{type:"button",variant:"outline",size:"md",onClick:()=>m(!0),className:"flex-shrink-0",children:r.jsx(c.Z,{className:"h-4 w-4"})})]})]}),r.jsx(g.II,{label:"Duration (hours)",type:"number",value:k.duration_hours,onChange:e=>N({...k,duration_hours:e.target.value}),error:_.duration_hours,placeholder:"e.g., 24"})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsx(g.Ph,{label:"Status",value:k.status,onChange:e=>N({...k,status:e.target.value}),options:[{value:"draft",label:"Draft"},{value:"published",label:"Published"},{value:"archived",label:"Archived"}]}),r.jsx(g.Ph,{label:"Difficulty Level",value:k.difficulty,onChange:e=>N({...k,difficulty:e.target.value}),options:[{value:"beginner",label:"Beginner"},{value:"intermediate",label:"Intermediate"},{value:"advanced",label:"Advanced"},{value:"expert",label:"Expert"}]})]}),r.jsx(g.II,{label:"Thumbnail URL",type:"url",value:k.thumbnail_url,onChange:e=>N({...k,thumbnail_url:e.target.value}),placeholder:"https://example.com/image.jpg"}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[r.jsx("input",{type:"checkbox",id:"is_public",checked:k.is_public,onChange:e=>N({...k,is_public:e.target.checked}),className:"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded"}),r.jsx("label",{htmlFor:"is_public",className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Make this course publicly accessible"})]})]})})]}),(0,r.jsxs)(g.Zb,{children:[r.jsx(g.Zb.Header,{children:r.jsx("h2",{className:"text-lg font-semibold",children:"Learning Objectives"})}),r.jsx(g.Zb.Content,{children:(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"flex gap-2",children:[r.jsx(g.II,{value:I,onChange:e=>q(e.target.value),placeholder:"Add a learning objective",onKeyPress:e=>"Enter"===e.key&&(e.preventDefault(),$())}),r.jsx(g.zx,{type:"button",onClick:$,leftIcon:r.jsx(c.Z,{className:"h-4 w-4"}),children:"Add"})]}),k.objectives.length>0&&r.jsx("div",{className:"space-y-2",children:k.objectives.map((e,t)=>(0,r.jsxs)("div",{className:"flex items-center gap-2 p-2 bg-gray-50 dark:bg-gray-800 rounded",children:[r.jsx(o,{className:"h-4 w-4 text-gray-400"}),r.jsx("span",{className:"flex-1 text-sm",children:e}),r.jsx(g.zx,{type:"button",variant:"ghost",size:"sm",onClick:()=>M(t),children:r.jsx(n.Z,{className:"h-4 w-4"})})]},t))})]})})]}),(0,r.jsxs)(g.Zb,{children:[r.jsx(g.Zb.Header,{children:r.jsx("h2",{className:"text-lg font-semibold",children:"Prerequisites"})}),r.jsx(g.Zb.Content,{children:(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"flex gap-2",children:[r.jsx(g.II,{value:S,onChange:e=>z(e.target.value),placeholder:"Add a prerequisite",onKeyPress:e=>"Enter"===e.key&&(e.preventDefault(),U())}),r.jsx(g.zx,{type:"button",onClick:U,leftIcon:r.jsx(c.Z,{className:"h-4 w-4"}),children:"Add"})]}),k.prerequisites.length>0&&r.jsx("div",{className:"space-y-2",children:k.prerequisites.map((e,t)=>(0,r.jsxs)("div",{className:"flex items-center gap-2 p-2 bg-gray-50 dark:bg-gray-800 rounded",children:[r.jsx(o,{className:"h-4 w-4 text-gray-400"}),r.jsx("span",{className:"flex-1 text-sm",children:e}),r.jsx(g.zx,{type:"button",variant:"ghost",size:"sm",onClick:()=>L(t),children:r.jsx(n.Z,{className:"h-4 w-4"})})]},t))})]})})]}),(0,r.jsxs)(g.Zb,{children:[r.jsx(g.Zb.Header,{children:r.jsx("h2",{className:"text-lg font-semibold",children:"Tags"})}),r.jsx(g.Zb.Content,{children:(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"flex gap-2",children:[r.jsx(g.II,{value:D,onChange:e=>A(e.target.value),placeholder:"Add a tag",onKeyPress:e=>"Enter"===e.key&&(e.preventDefault(),T())}),r.jsx(g.zx,{type:"button",onClick:T,leftIcon:r.jsx(c.Z,{className:"h-4 w-4"}),children:"Add"})]}),k.tags.length>0&&r.jsx("div",{className:"flex flex-wrap gap-2",children:k.tags.map(e=>(0,r.jsxs)(g.Ct,{variant:"secondary",className:"px-3 py-1",children:[e,r.jsx("button",{type:"button",onClick:()=>H(e),className:"ml-2 hover:text-red-500",children:r.jsx(n.Z,{className:"h-3 w-3"})})]},e))})]})})]}),(0,r.jsxs)("div",{className:"flex justify-end gap-3",children:[r.jsx(g.zx,{type:"button",variant:"outline",onClick:()=>t.push("/courses"),children:"Cancel"}),r.jsx(g.zx,{type:"submit",loading:f,leftIcon:r.jsx(d.Z,{className:"h-4 w-4"}),children:s?"Update Course":"Create Course"})]})]}),(0,r.jsxs)(g.u_,{isOpen:p,onClose:()=>m(!1),title:"Create New Category",size:"sm",children:[(0,r.jsxs)("div",{className:"space-y-4",children:[r.jsx(g.II,{label:"Category Name",value:x,onChange:e=>y(e.target.value),placeholder:"e.g., Programming",required:!0}),r.jsx(g.II,{label:"Category Color",type:"color",value:v,onChange:e=>b(e.target.value),className:"h-10"})]}),(0,r.jsxs)("div",{className:"mt-6 flex justify-end gap-3",children:[r.jsx(g.zx,{variant:"ghost",onClick:()=>m(!1),children:"Cancel"}),r.jsx(g.zx,{onClick:B,children:"Create Category"})]})]})]})}},78188:(e,t,s)=>{"use strict";s.d(t,{G:()=>a});let r=(0,s(59813).createClientComponentClient)(),a={async getCategories(e={}){let t=r.from("categories").select("*").order("name",{ascending:!0});e.type&&(t=t.eq("type",e.type)),void 0!==e.parentId&&(t=t.eq("parent_id",e.parentId)),e.search&&(t=t.ilike("name",`%${e.search}%`));let{data:s,error:a}=await t;if(a)throw a;return s},async getCategory(e){let{data:t,error:s}=await r.from("categories").select("*").eq("id",e).single();if(s)throw s;return t},async createCategory(e){let{data:t}=await r.auth.getUser();if(!t.user)throw Error("User not authenticated");let{data:s,error:a}=await r.from("categories").insert({...e,user_id:t.user.id}).select().single();if(a)throw a;return s},async updateCategory({id:e,...t}){let{data:s,error:a}=await r.from("categories").update({...t,updated_at:new Date().toISOString()}).eq("id",e).select().single();if(a)throw a;return s},async deleteCategory(e){let{error:t}=await r.from("categories").delete().eq("id",e);if(t)throw t},getCategoryTypes:()=>[{value:"course",label:"Course"},{value:"book",label:"Book"},{value:"vocabulary",label:"Vocabulary"},{value:"objective",label:"Objective"},{value:"method",label:"Method"},{value:"task",label:"Task"}]}},64727:(e,t,s)=>{"use strict";s.d(t,{J:()=>a});let r=(0,s(59813).createClientComponentClient)(),a={async getCourses(e={}){let t=r.from("courses").select(`
        *,
        category:categories(id, name, color, icon)
      `).order("created_at",{ascending:!1});e.status&&(t=t.eq("status",e.status)),e.difficulty&&(t=t.eq("difficulty",e.difficulty)),e.categoryId&&(t=t.eq("category_id",e.categoryId)),void 0!==e.isPublic&&(t=t.eq("is_public",e.isPublic)),e.search&&(t=t.or(`title.ilike.%${e.search}%,description.ilike.%${e.search}%`)),e.tags&&e.tags.length>0&&(t=t.contains("tags",e.tags));let{data:s,error:a}=await t;if(a)throw a;return s},async getCourse(e){let{data:t,error:s}=await r.from("courses").select(`
        *,
        category:categories(id, name, color, icon),
        course_books(
          id,
          book_id,
          is_required,
          notes,
          position,
          book:books(id, title, author, cover_image_url)
        ),
        course_vocabulary_groups(
          id,
          vocabulary_group_id,
          position,
          vocabulary_group:vocabulary_groups(id, name, language, difficulty)
        )
      `).eq("id",e).single();if(s)throw s;return t},async createCourse(e){let{data:t}=await r.auth.getUser();if(!t.user)throw Error("User not authenticated");let{data:s,error:a}=await r.from("courses").insert({...e,user_id:t.user.id,status:e.status||"draft",difficulty:e.difficulty||"beginner",is_public:e.is_public||!1}).select().single();if(a)throw a;return s},async updateCourse({id:e,...t}){let{data:s,error:a}=await r.from("courses").update({...t,updated_at:new Date().toISOString()}).eq("id",e).select().single();if(a)throw a;return s},async deleteCourse(e){let{error:t}=await r.from("courses").delete().eq("id",e);if(t)throw t},async publishCourse(e){let{data:t,error:s}=await r.from("courses").update({status:"published",published_at:new Date().toISOString(),updated_at:new Date().toISOString()}).eq("id",e).select().single();if(s)throw s;return t},async archiveCourse(e){let{data:t,error:s}=await r.from("courses").update({status:"archived",updated_at:new Date().toISOString()}).eq("id",e).select().single();if(s)throw s;return t},async getCourseStats(){let{data:e}=await r.auth.getUser();if(!e.user)throw Error("User not authenticated");let{data:t,error:s}=await r.from("courses").select("status",{count:"exact"}).eq("user_id",e.user.id);if(s)throw s;return{total:t?.length||0,draft:t?.filter(e=>"draft"===e.status).length||0,published:t?.filter(e=>"published"===e.status).length||0,archived:t?.filter(e=>"archived"===e.status).length||0}}}},62508:(e,t,s)=>{"use strict";s.r(t),s.d(t,{$$typeof:()=>l,__esModule:()=>i,default:()=>c});var r=s(68570);let a=(0,r.createProxy)(String.raw`D:\dev\cursor\course builder\src\app\courses\layout.tsx`),{__esModule:i,$$typeof:l}=a;a.default;let c=(0,r.createProxy)(String.raw`D:\dev\cursor\course builder\src\app\courses\layout.tsx#default`)},79360:(e,t,s)=>{"use strict";s.d(t,{j:()=>l});var r=s(41135);let a=e=>"boolean"==typeof e?`${e}`:0===e?"0":e,i=r.W,l=(e,t)=>s=>{var r;if((null==t?void 0:t.variants)==null)return i(e,null==s?void 0:s.class,null==s?void 0:s.className);let{variants:l,defaultVariants:c}=t,o=Object.keys(l).map(e=>{let t=null==s?void 0:s[e],r=null==c?void 0:c[e];if(null===t)return null;let i=a(t)||a(r);return l[e][i]}),n=s&&Object.entries(s).reduce((e,t)=>{let[s,r]=t;return void 0===r||(e[s]=r),e},{});return i(e,o,null==t?void 0:null===(r=t.compoundVariants)||void 0===r?void 0:r.reduce((e,t)=>{let{class:s,className:r,...a}=t;return Object.entries(a).every(e=>{let[t,s]=e;return Array.isArray(s)?s.includes({...c,...n}[t]):({...c,...n})[t]===s})?[...e,s,r]:e},[]),null==s?void 0:s.class,null==s?void 0:s.className)}}};