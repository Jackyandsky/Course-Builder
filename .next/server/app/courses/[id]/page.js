(()=>{var e={};e.id=41,e.ids=[41],e.modules={47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},14300:e=>{"use strict";e.exports=require("buffer")},6113:e=>{"use strict";e.exports=require("crypto")},82361:e=>{"use strict";e.exports=require("events")},13685:e=>{"use strict";e.exports=require("http")},95687:e=>{"use strict";e.exports=require("https")},41808:e=>{"use strict";e.exports=require("net")},85477:e=>{"use strict";e.exports=require("punycode")},12781:e=>{"use strict";e.exports=require("stream")},24404:e=>{"use strict";e.exports=require("tls")},57310:e=>{"use strict";e.exports=require("url")},59796:e=>{"use strict";e.exports=require("zlib")},19456:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>l.a,__next_app__:()=>x,originalPathname:()=>u,pages:()=>d,routeModule:()=>h,tree:()=>o}),t(42219),t(62508),t(53817),t(35866);var r=t(23191),a=t(88716),i=t(37922),l=t.n(i),c=t(95231),n={};for(let e in c)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(n[e]=()=>c[e]);t.d(s,n);let o=["",{children:["courses",{children:["[id]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,42219)),"D:\\dev\\cursor\\course builder\\src\\app\\courses\\[id]\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,62508)),"D:\\dev\\cursor\\course builder\\src\\app\\courses\\layout.tsx"]}]},{layout:[()=>Promise.resolve().then(t.bind(t,53817)),"D:\\dev\\cursor\\course builder\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,35866,23)),"next/dist/client/components/not-found-error"]}],d=["D:\\dev\\cursor\\course builder\\src\\app\\courses\\[id]\\page.tsx"],u="/courses/[id]/page",x={require:t,loadChunk:()=>Promise.resolve()},h=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/courses/[id]/page",pathname:"/courses/[id]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},26962:(e,s,t)=>{Promise.resolve().then(t.bind(t,92617))},9403:(e,s,t)=>{Promise.resolve().then(t.bind(t,92910))},54014:(e,s,t)=>{"use strict";t.d(s,{Z:()=>r});let r=(0,t(62881).Z)("globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]])},9015:(e,s,t)=>{"use strict";t.d(s,{Z:()=>r});let r=(0,t(62881).Z)("lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]])},92617:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>C});var r=t(10326),a=t(17577),i=t(35047),l=t(71876),c=t(62881);let n=(0,c.Z)("bookmark",[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z",key:"1fy3hk"}]]);var o=t(37358),d=t(86333),u=t(54014),x=t(9015),h=t(48998);let p=(0,c.Z)("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]),m=(0,c.Z)("copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);var g=t(69508);let y=(0,c.Z)("archive",[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]]);var j=t(98091),f=t(53468);let b=(0,c.Z)("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);var v=t(64727),w=t(85439),N=t(31414);let _={draft:"default",published:"success",archived:"secondary"},k={beginner:"info",intermediate:"warning",advanced:"danger",expert:"primary"};function C(){let e=(0,i.useRouter)(),s=(0,i.useParams)().id,[t,c]=(0,a.useState)(null),[C,q]=(0,a.useState)(!0),[Z,P]=(0,a.useState)(!1),[D,S]=(0,a.useState)(!1),[z,I]=(0,a.useState)("overview"),[M,$]=(0,a.useState)(!1),A=async()=>{try{q(!0);let e=await v.J.getCourse(s);c(e)}catch(s){console.error("Failed to load course:",s),e.push("/courses")}finally{q(!1)}},L=async()=>{try{P(!0),await v.J.deleteCourse(s),e.push("/courses")}catch(e){console.error("Failed to delete course:",e)}finally{P(!1),S(!1)}},O=async()=>{try{await v.J.archiveCourse(s),await A()}catch(e){console.error("Failed to archive course:",e)}},E=async()=>{try{await v.J.publishCourse(s),await A()}catch(e){console.error("Failed to publish course:",e)}};if(C)return r.jsx("div",{className:"flex justify-center items-center min-h-screen",children:r.jsx(w.$j,{size:"lg"})});if(!t)return null;let U=[{id:"overview",label:"Overview",icon:r.jsx(l.Z,{className:"h-4 w-4"})},{id:"materials",label:"Materials",icon:r.jsx(n,{className:"h-4 w-4"})},{id:"schedule",label:"Schedule",icon:r.jsx(o.Z,{className:"h-4 w-4"})}];return(0,r.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,r.jsxs)("div",{className:"mb-8",children:[r.jsx(w.zx,{variant:"ghost",size:"sm",onClick:()=>e.push("/courses"),leftIcon:r.jsx(d.Z,{className:"h-4 w-4"}),className:"mb-4",children:"Back to Courses"}),(0,r.jsxs)("div",{className:"flex flex-col lg:flex-row lg:items-start lg:justify-between gap-6",children:[r.jsx("div",{className:"flex-1",children:(0,r.jsxs)("div",{className:"flex items-start gap-4",children:[t.thumbnail_url&&r.jsx("img",{src:t.thumbnail_url,alt:t.title,className:"w-24 h-24 rounded-lg object-cover"}),(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[r.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100",children:t.title}),r.jsx(w.Ct,{variant:_[t.status],children:t.status}),t.is_public?r.jsx(u.Z,{className:"h-5 w-5 text-green-500"}):r.jsx(x.Z,{className:"h-5 w-5 text-gray-400"})]}),t.short_description&&r.jsx("p",{className:"text-lg text-gray-600 dark:text-gray-400 mb-4",children:t.short_description}),(0,r.jsxs)("div",{className:"flex flex-wrap items-center gap-4 text-sm text-gray-500",children:[r.jsx(w.Ct,{variant:k[t.difficulty],size:"sm",children:t.difficulty}),t.duration_hours&&(0,r.jsxs)("div",{className:"flex items-center gap-1",children:[r.jsx(h.Z,{className:"h-4 w-4"}),(0,r.jsxs)("span",{children:[t.duration_hours," hours"]})]}),t.category&&r.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium",style:{backgroundColor:t.category.color?`${t.category.color}20`:void 0,color:t.category.color||void 0},children:t.category.name})]})]})]})}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:["draft"===t.status&&r.jsx(w.zx,{variant:"primary",onClick:E,leftIcon:r.jsx(p,{className:"h-4 w-4"}),children:"Publish"}),"published"===t.status&&t.public_slug&&r.jsx(w.zx,{variant:"outline",onClick:()=>{if(t?.public_slug){let e=`${window.location.origin}/public/courses/${t.public_slug}`;navigator.clipboard.writeText(e),$(!0),setTimeout(()=>$(!1),2e3)}},leftIcon:M?r.jsx(p,{className:"h-4 w-4"}):r.jsx(m,{className:"h-4 w-4"}),children:M?"Copied!":"Copy Link"}),r.jsx(w.zx,{variant:"outline",onClick:()=>e.push(`/courses/${s}/edit`),leftIcon:r.jsx(g.Z,{className:"h-4 w-4"}),children:"Edit"}),"archived"!==t.status&&r.jsx(w.zx,{variant:"outline",onClick:O,leftIcon:r.jsx(y,{className:"h-4 w-4"}),children:"Archive"}),r.jsx(w.zx,{variant:"outline",onClick:()=>S(!0),leftIcon:r.jsx(j.Z,{className:"h-4 w-4"}),className:"text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20",children:"Delete"})]})]})]}),r.jsx(w.mQ,{value:z,onValueChange:I,className:"mb-6",children:r.jsx(w.dr,{children:U.map(e=>(0,r.jsxs)(w.SP,{value:e.id,children:[e.icon,r.jsx("span",{className:"ml-2",children:e.label})]},e.id))})}),"overview"===z&&(0,r.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,r.jsxs)("div",{className:"lg:col-span-2 space-y-6",children:[(0,r.jsxs)(w.Zb,{children:[r.jsx(w.Zb.Header,{children:r.jsx("h2",{className:"text-lg font-semibold",children:"Description"})}),r.jsx(w.Zb.Content,{children:r.jsx("div",{className:"prose prose-sm max-w-none dark:prose-invert",children:t.description||r.jsx("p",{className:"text-gray-500 italic",children:"No description provided"})})})]}),t.objectives&&t.objectives.length>0&&(0,r.jsxs)(w.Zb,{children:[r.jsx(w.Zb.Header,{children:(0,r.jsxs)("h2",{className:"text-lg font-semibold flex items-center gap-2",children:[r.jsx(f.Z,{className:"h-5 w-5"}),"Learning Objectives"]})}),r.jsx(w.Zb.Content,{children:r.jsx("ul",{className:"space-y-2",children:t.objectives.map((e,s)=>(0,r.jsxs)("li",{className:"flex items-start gap-2",children:[r.jsx(p,{className:"h-4 w-4 text-green-500 mt-0.5 flex-shrink-0"}),r.jsx("span",{className:"text-sm",children:e})]},s))})})]}),t.prerequisites&&t.prerequisites.length>0&&(0,r.jsxs)(w.Zb,{children:[r.jsx(w.Zb.Header,{children:(0,r.jsxs)("h2",{className:"text-lg font-semibold flex items-center gap-2",children:[r.jsx(b,{className:"h-5 w-5"}),"Prerequisites"]})}),r.jsx(w.Zb.Content,{children:r.jsx("ul",{className:"space-y-2",children:t.prerequisites.map((e,s)=>(0,r.jsxs)("li",{className:"flex items-start gap-2",children:[r.jsx("span",{className:"text-gray-400",children:"â€¢"}),r.jsx("span",{className:"text-sm",children:e})]},s))})})]})]}),(0,r.jsxs)("div",{className:"space-y-6",children:[t.tags&&t.tags.length>0&&(0,r.jsxs)(w.Zb,{children:[r.jsx(w.Zb.Header,{children:r.jsx("h3",{className:"text-sm font-semibold",children:"Tags"})}),r.jsx(w.Zb.Content,{children:r.jsx("div",{className:"flex flex-wrap gap-2",children:t.tags.map(e=>r.jsx("span",{className:"inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300",children:e},e))})})]}),(0,r.jsxs)(w.Zb,{children:[r.jsx(w.Zb.Header,{children:r.jsx("h3",{className:"text-sm font-semibold",children:"Course Information"})}),r.jsx(w.Zb.Content,{children:(0,r.jsxs)("dl",{className:"space-y-3 text-sm",children:[(0,r.jsxs)("div",{children:[r.jsx("dt",{className:"text-gray-500 dark:text-gray-400",children:"Created"}),r.jsx("dd",{className:"font-medium",children:new Date(t.created_at).toLocaleDateString()})]}),(0,r.jsxs)("div",{children:[r.jsx("dt",{className:"text-gray-500 dark:text-gray-400",children:"Last Updated"}),r.jsx("dd",{className:"font-medium",children:new Date(t.updated_at).toLocaleDateString()})]}),t.published_at&&(0,r.jsxs)("div",{children:[r.jsx("dt",{className:"text-gray-500 dark:text-gray-400",children:"Published"}),r.jsx("dd",{className:"font-medium",children:new Date(t.published_at).toLocaleDateString()})]}),(0,r.jsxs)("div",{children:[r.jsx("dt",{className:"text-gray-500 dark:text-gray-400",children:"Course ID"}),r.jsx("dd",{className:"font-mono text-xs",children:t.id})]})]})})]})]})]}),"materials"===z&&r.jsx("div",{className:"space-y-6",children:(0,r.jsxs)(w.Zb,{children:[r.jsx(w.Zb.Header,{children:r.jsx("h2",{className:"text-lg font-semibold",children:"Course Materials"})}),(0,r.jsxs)(w.Zb.Content,{className:"space-y-8",children:[r.jsx(N.$D,{courseId:s,onUpdate:A}),r.jsx("div",{className:"border-t pt-8",children:r.jsx(N.wd,{courseId:s,onUpdate:A})})]})]})}),"schedule"===z&&r.jsx(w.Zb,{children:r.jsx(w.Zb.Content,{children:r.jsx(N.jR,{courseId:s})})}),(0,r.jsxs)(w.u_,{isOpen:D,onClose:()=>S(!1),title:"Delete Course",className:"max-w-md",children:[(0,r.jsxs)("p",{className:"text-gray-600 dark:text-gray-400",children:['Are you sure you want to delete "',t.title,'"? This action cannot be undone.']}),(0,r.jsxs)("div",{className:"flex justify-end gap-3 mt-6",children:[r.jsx(w.zx,{variant:"outline",onClick:()=>S(!1),children:"Cancel"}),r.jsx(w.zx,{variant:"danger",onClick:L,loading:Z,children:"Delete Course"})]})]})]})}},92910:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>l});var r=t(10326),a=t(62760),i=t(80341);function l({children:e}){return r.jsx(i.AuthGuard,{children:r.jsx(a.DashboardLayout,{children:e})})}},64727:(e,s,t)=>{"use strict";t.d(s,{J:()=>a});let r=(0,t(59813).createClientComponentClient)(),a={async getCourses(e={}){let s=r.from("courses").select(`
        *,
        category:categories(id, name, color, icon)
      `).order("created_at",{ascending:!1});e.status&&(s=s.eq("status",e.status)),e.difficulty&&(s=s.eq("difficulty",e.difficulty)),e.categoryId&&(s=s.eq("category_id",e.categoryId)),void 0!==e.isPublic&&(s=s.eq("is_public",e.isPublic)),e.search&&(s=s.or(`title.ilike.%${e.search}%,description.ilike.%${e.search}%`)),e.tags&&e.tags.length>0&&(s=s.contains("tags",e.tags));let{data:t,error:a}=await s;if(a)throw a;return t},async getCourse(e){let{data:s,error:t}=await r.from("courses").select(`
        *,
        category:categories(id, name, color, icon),
        course_books(
          id,
          book_id,
          is_required,
          notes,
          position,
          book:books(id, title, author, cover_image_url)
        ),
        course_vocabulary_groups(
          id,
          vocabulary_group_id,
          position,
          vocabulary_group:vocabulary_groups(id, name, language, difficulty)
        )
      `).eq("id",e).single();if(t)throw t;return s},async createCourse(e){let{data:s}=await r.auth.getUser();if(!s.user)throw Error("User not authenticated");let{data:t,error:a}=await r.from("courses").insert({...e,user_id:s.user.id,status:e.status||"draft",difficulty:e.difficulty||"beginner",is_public:e.is_public||!1}).select().single();if(a)throw a;return t},async updateCourse({id:e,...s}){let{data:t,error:a}=await r.from("courses").update({...s,updated_at:new Date().toISOString()}).eq("id",e).select().single();if(a)throw a;return t},async deleteCourse(e){let{error:s}=await r.from("courses").delete().eq("id",e);if(s)throw s},async publishCourse(e){let{data:s,error:t}=await r.from("courses").update({status:"published",published_at:new Date().toISOString(),updated_at:new Date().toISOString()}).eq("id",e).select().single();if(t)throw t;return s},async archiveCourse(e){let{data:s,error:t}=await r.from("courses").update({status:"archived",updated_at:new Date().toISOString()}).eq("id",e).select().single();if(t)throw t;return s},async getCourseStats(){let{data:e}=await r.auth.getUser();if(!e.user)throw Error("User not authenticated");let{data:s,error:t}=await r.from("courses").select("status",{count:"exact"}).eq("user_id",e.user.id);if(t)throw t;return{total:s?.length||0,draft:s?.filter(e=>"draft"===e.status).length||0,published:s?.filter(e=>"published"===e.status).length||0,archived:s?.filter(e=>"archived"===e.status).length||0}}}},42219:(e,s,t)=>{"use strict";t.r(s),t.d(s,{$$typeof:()=>l,__esModule:()=>i,default:()=>c});var r=t(68570);let a=(0,r.createProxy)(String.raw`D:\dev\cursor\course builder\src\app\courses\[id]\page.tsx`),{__esModule:i,$$typeof:l}=a;a.default;let c=(0,r.createProxy)(String.raw`D:\dev\cursor\course builder\src\app\courses\[id]\page.tsx#default`)},62508:(e,s,t)=>{"use strict";t.r(s),t.d(s,{$$typeof:()=>l,__esModule:()=>i,default:()=>c});var r=t(68570);let a=(0,r.createProxy)(String.raw`D:\dev\cursor\course builder\src\app\courses\layout.tsx`),{__esModule:i,$$typeof:l}=a;a.default;let c=(0,r.createProxy)(String.raw`D:\dev\cursor\course builder\src\app\courses\layout.tsx#default`)}};var s=require("../../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),r=s.X(0,[745,48,849,248,254,659,439,414],()=>t(19456));module.exports=r})();