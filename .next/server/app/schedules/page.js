(()=>{var e={};e.id=95,e.ids=[95],e.modules={47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},14300:e=>{"use strict";e.exports=require("buffer")},6113:e=>{"use strict";e.exports=require("crypto")},82361:e=>{"use strict";e.exports=require("events")},13685:e=>{"use strict";e.exports=require("http")},95687:e=>{"use strict";e.exports=require("https")},41808:e=>{"use strict";e.exports=require("net")},85477:e=>{"use strict";e.exports=require("punycode")},12781:e=>{"use strict";e.exports=require("stream")},24404:e=>{"use strict";e.exports=require("tls")},57310:e=>{"use strict";e.exports=require("url")},59796:e=>{"use strict";e.exports=require("zlib")},49868:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>l.a,__next_app__:()=>h,originalPathname:()=>u,pages:()=>d,routeModule:()=>p,tree:()=>o}),s(62025),s(15206),s(53817),s(35866);var r=s(23191),a=s(88716),n=s(37922),l=s.n(n),i=s(95231),c={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>i[e]);s.d(t,c);let o=["",{children:["schedules",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,62025)),"D:\\dev\\cursor\\course builder\\src\\app\\schedules\\page.tsx"]}]},{layout:[()=>Promise.resolve().then(s.bind(s,15206)),"D:\\dev\\cursor\\course builder\\src\\app\\schedules\\layout.tsx"]}]},{layout:[()=>Promise.resolve().then(s.bind(s,53817)),"D:\\dev\\cursor\\course builder\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,35866,23)),"next/dist/client/components/not-found-error"]}],d=["D:\\dev\\cursor\\course builder\\src\\app\\schedules\\page.tsx"],u="/schedules/page",h={require:s,loadChunk:()=>Promise.resolve()},p=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/schedules/page",pathname:"/schedules",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},93853:(e,t,s)=>{Promise.resolve().then(s.bind(s,52353))},60878:(e,t,s)=>{Promise.resolve().then(s.bind(s,59973))},62881:(e,t,s)=>{"use strict";s.d(t,{Z:()=>u});var r=s(17577);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),n=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,s)=>s?s.toUpperCase():t.toLowerCase()),l=e=>{let t=n(e);return t.charAt(0).toUpperCase()+t.slice(1)},i=(...e)=>e.filter((e,t,s)=>!!e&&""!==e.trim()&&s.indexOf(e)===t).join(" ").trim(),c=e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0};/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var o={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let d=(0,r.forwardRef)(({color:e="currentColor",size:t=24,strokeWidth:s=2,absoluteStrokeWidth:a,className:n="",children:l,iconNode:d,...u},h)=>(0,r.createElement)("svg",{ref:h,...o,width:t,height:t,stroke:e,strokeWidth:a?24*Number(s)/Number(t):s,className:i("lucide",n),...!l&&!c(u)&&{"aria-hidden":"true"},...u},[...d.map(([e,t])=>(0,r.createElement)(e,t)),...Array.isArray(l)?l:[l]])),u=(e,t)=>{let s=(0,r.forwardRef)(({className:s,...n},c)=>(0,r.createElement)(d,{ref:c,iconNode:t,className:i(`lucide-${a(l(e))}`,`lucide-${e}`,s),...n}));return s.displayName=l(e),s}},37358:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});let r=(0,s(62881).Z)("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]])},39183:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});let r=(0,s(62881).Z)("chevron-right",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]])},83855:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});let r=(0,s(62881).Z)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},88307:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});let r=(0,s(62881).Z)("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]])},94019:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});let r=(0,s(62881).Z)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},52353:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>l});var r=s(10326),a=s(62760),n=s(80341);function l({children:e}){return r.jsx(n.AuthGuard,{children:r.jsx(a.DashboardLayout,{children:e})})}},59973:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>d});var r=s(10326),a=s(17577),n=s(35047),l=s(83855),i=s(37358),c=s(21754),o=s(85439);function d(){let e=(0,n.useRouter)(),[t,s]=(0,a.useState)([]),[d,u]=(0,a.useState)(!0),h=async()=>{try{u(!0);let e=await c.y.getSchedules({});s(e)}catch(e){console.error("Failed to load schedules:",e)}finally{u(!1)}};return(0,r.jsxs)("div",{className:"space-y-6 p-6",children:[(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[(0,r.jsxs)("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:"Schedules"}),r.jsx("p",{className:"mt-1 text-sm text-gray-600 dark:text-gray-400",children:"Manage your course schedules and lesson plans."})]}),r.jsx(o.zx,{onClick:()=>e.push("/schedules/new"),leftIcon:r.jsx(l.Z,{className:"h-4 w-4"}),children:"Create Schedule"})]}),r.jsx("div",{className:"flex-1",children:r.jsx(o.Rj,{placeholder:"Search schedules...",onSearch:e=>{h()},fullWidth:!0})}),d?r.jsx("div",{className:"flex justify-center py-12",children:r.jsx(o.$j,{size:"lg"})}):0===t.length?(0,r.jsxs)(o.Zb,{className:"p-12 text-center",children:[r.jsx(i.Z,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),r.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-gray-100",children:"No schedules found"}),r.jsx("p",{className:"mt-2 text-sm text-gray-600 dark:text-gray-400",children:"Get started by creating your first schedule."}),r.jsx(o.zx,{className:"mt-4",onClick:()=>e.push("/schedules/new"),leftIcon:r.jsx(l.Z,{className:"h-4 w-4"}),children:"Create Schedule"})]}):r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:t.map(t=>r.jsx(o.Zb,{className:"hover:shadow-lg transition-shadow cursor-pointer",onClick:()=>e.push(`/schedules/${t.id}`),children:(0,r.jsxs)(o.Zb.Content,{className:"p-4",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 line-clamp-1",children:t.name}),t.description&&r.jsx("p",{className:"text-sm text-gray-600 line-clamp-2 mt-1",children:t.description}),(0,r.jsxs)("div",{className:"mt-3 flex justify-between items-center text-sm text-gray-500",children:[r.jsx("span",{children:t.course?.title||"No Course"}),r.jsx(o.Ct,{variant:t.is_active?"success":"secondary",children:t.is_active?"Active":"Inactive"})]})]})},t.id))})]})}},21754:(e,t,s)=>{"use strict";s.d(t,{y:()=>n});var r=s(59813);class a{async getSchedules(e){let t=this.supabase.from("schedules").select(`
        *,
        course:courses(id, title, description),
        lessons(count)
      `).order("created_at",{ascending:!1});e?.course_id&&(t=t.eq("course_id",e.course_id)),e?.is_active!==void 0&&(t=t.eq("is_active",e.is_active)),e?.user_id&&(t=t.eq("user_id",e.user_id));let{data:s,error:r}=await t;if(r)throw r;return s}async getSchedule(e){let{data:t,error:s}=await this.supabase.from("schedules").select(`
        *,
        course:courses(*),
        lessons(
          *,
          objectives:lesson_objectives(
            *,
            objective:objectives(*)
          ),
          methods:lesson_methods(
            *,
            method:methods(*)
          ),
          tasks:lesson_tasks(
            *,
            task:tasks(*)
          )
        )
      `).eq("id",e).single();if(s)throw s;return t}async createSchedule(e){let{data:t,error:s}=await this.supabase.from("schedules").insert(e).select().single();if(s)throw s;return"none"!==e.recurrence_type&&t&&await this.generateRecurringLessons(t.id,e),t}async updateSchedule(e,t){let{data:s,error:r}=await this.supabase.from("schedules").update(t).eq("id",e).select().single();if(r)throw r;return s}async deleteSchedule(e){let{error:t}=await this.supabase.from("schedules").delete().eq("id",e);if(t)throw t}async getLessons(e){let t=this.supabase.from("lessons").select(`
        *,
        schedule:schedules(
          *,
          course:courses(id, title)
        ),
        attendance(count)
      `).order("date",{ascending:!0}).order("start_time",{ascending:!0});e?.schedule_id&&(t=t.eq("schedule_id",e.schedule_id)),e?.status&&(t=t.eq("status",e.status)),e?.date_from&&(t=t.gte("date",e.date_from)),e?.date_to&&(t=t.lte("date",e.date_to)),e?.user_id&&(t=t.eq("user_id",e.user_id));let{data:s,error:r}=await t;if(r)throw r;return s}async getLesson(e){let{data:t,error:s}=await this.supabase.from("lessons").select(`
        *,
        schedule:schedules(
          *,
          course:courses(*)
        ),
        attendance(*),
        objectives:lesson_objectives(
          *,
          objective:objectives(*)
        ),
        methods:lesson_methods(
          *,
          method:methods(*)
        ),
        tasks:lesson_tasks(
          *,
          task:tasks(*)
        )
      `).eq("id",e).single();if(s)throw s;return t}async createLesson(e){let{data:t,error:s}=await this.supabase.from("lessons").insert(e).select().single();if(s)throw s;return t}async updateLesson(e,t){let{data:s,error:r}=await this.supabase.from("lessons").update({...t,updated_at:new Date().toISOString()}).eq("id",e).select().single();if(r)throw r;return s}async deleteLesson(e){let{error:t}=await this.supabase.from("lessons").delete().eq("id",e);if(t)throw t}async getAttendance(e){let{data:t,error:s}=await this.supabase.from("attendance").select("*").eq("lesson_id",e).order("student_name");if(s)throw s;return t}async markAttendance(e){let{data:t,error:s}=await this.supabase.from("attendance").upsert({...e,marked_at:new Date().toISOString()}).select().single();if(s)throw s;return t}async bulkMarkAttendance(e,t){let s=t.map(t=>({...t,lesson_id:e,marked_at:new Date().toISOString()})),{data:r,error:a}=await this.supabase.from("attendance").upsert(s).select();if(a)throw a;return r}async generateRecurringLessons(e,t){let s=[],r=new Date(t.start_date),a=new Date(t.end_date?t.end_date:r);a.setMonth(a.getMonth()+3);let n=new Date(r),l=1;for(;n<=a;){if(this.shouldCreateLesson(n,t)){let[r,a]=t.default_start_time.split(":").map(Number),i=new Date(n);i.setHours(r,a,0,0);let c=new Date(i);c.setMinutes(c.getMinutes()+t.default_duration_minutes),s.push({schedule_id:e,course_id:t.course_id,title:`${t.name} - Lesson ${l}`,date:n.toISOString().split("T")[0],start_time:i.toTimeString().slice(0,5),end_time:c.toTimeString().slice(0,5),duration_minutes:t.default_duration_minutes,location:t.location,status:"scheduled",user_id:t.user_id}),l++}n=this.getNextLessonDate(n,t)}if(s.length>0){let{error:e}=await this.supabase.from("lessons").insert(s);if(e)throw e}}shouldCreateLesson(e,t){if("none"===t.recurrence_type)return!0;let s=e.toLocaleDateString("en-US",{weekday:"long"}).toLowerCase();return!t.recurrence_days||!(t.recurrence_days.length>0)||t.recurrence_days.includes(s)}getNextLessonDate(e,t){let s=new Date(e);return s.setDate(s.getDate()+1),s}transformToCalendarEvents(e){return e.map(e=>{let t=new Date(`${e.date}T${e.start_time}`),s=new Date(`${e.date}T${e.end_time}`);return{id:e.id,title:e.title,start:t,end:s,resource:{lesson:e,schedule:e.schedule},className:this.getLessonClassName(e.status)}})}getLessonClassName(e){switch(e){case"completed":return"bg-green-100 border-green-300 text-green-800";case"cancelled":return"bg-red-100 border-red-300 text-red-800";case"draft":return"bg-gray-100 border-gray-300 text-gray-800";default:return"bg-blue-100 border-blue-300 text-blue-800"}}async getScheduleStats(e){let{data:t,error:s}=await this.supabase.from("lessons").select("status, attendance(status)").eq("schedule_id",e);if(s)throw s;let r={total_lessons:t?.length||0,completed_lessons:t?.filter(e=>"completed"===e.status).length||0,cancelled_lessons:t?.filter(e=>"cancelled"===e.status).length||0,scheduled_lessons:t?.filter(e=>"scheduled"===e.status).length||0,attendance_rate:0},a=t?.flatMap(e=>e.attendance||[])||[],n=a.filter(e=>"present"===e.status).length;return a.length>0&&(r.attendance_rate=Math.round(n/a.length*100)),r}constructor(){this.supabase=(0,r.createClientComponentClient)()}}let n=new a},15206:(e,t,s)=>{"use strict";s.r(t),s.d(t,{$$typeof:()=>l,__esModule:()=>n,default:()=>i});var r=s(68570);let a=(0,r.createProxy)(String.raw`D:\dev\cursor\course builder\src\app\schedules\layout.tsx`),{__esModule:n,$$typeof:l}=a;a.default;let i=(0,r.createProxy)(String.raw`D:\dev\cursor\course builder\src\app\schedules\layout.tsx#default`)},62025:(e,t,s)=>{"use strict";s.r(t),s.d(t,{$$typeof:()=>l,__esModule:()=>n,default:()=>i});var r=s(68570);let a=(0,r.createProxy)(String.raw`D:\dev\cursor\course builder\src\app\schedules\page.tsx`),{__esModule:n,$$typeof:l}=a;a.default;let i=(0,r.createProxy)(String.raw`D:\dev\cursor\course builder\src\app\schedules\page.tsx#default`)},79360:(e,t,s)=>{"use strict";s.d(t,{j:()=>l});var r=s(41135);let a=e=>"boolean"==typeof e?`${e}`:0===e?"0":e,n=r.W,l=(e,t)=>s=>{var r;if((null==t?void 0:t.variants)==null)return n(e,null==s?void 0:s.class,null==s?void 0:s.className);let{variants:l,defaultVariants:i}=t,c=Object.keys(l).map(e=>{let t=null==s?void 0:s[e],r=null==i?void 0:i[e];if(null===t)return null;let n=a(t)||a(r);return l[e][n]}),o=s&&Object.entries(s).reduce((e,t)=>{let[s,r]=t;return void 0===r||(e[s]=r),e},{});return n(e,c,null==t?void 0:null===(r=t.compoundVariants)||void 0===r?void 0:r.reduce((e,t)=>{let{class:s,className:r,...a}=t;return Object.entries(a).every(e=>{let[t,s]=e;return Array.isArray(s)?s.includes({...i,...o}[t]):({...i,...o})[t]===s})?[...e,s,r]:e},[]),null==s?void 0:s.class,null==s?void 0:s.className)}}};var t=require("../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[745,48,849,254,659,439],()=>s(49868));module.exports=r})();