(()=>{var e={};e.id=678,e.ids=[678],e.modules={47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},14300:e=>{"use strict";e.exports=require("buffer")},6113:e=>{"use strict";e.exports=require("crypto")},82361:e=>{"use strict";e.exports=require("events")},13685:e=>{"use strict";e.exports=require("http")},95687:e=>{"use strict";e.exports=require("https")},41808:e=>{"use strict";e.exports=require("net")},85477:e=>{"use strict";e.exports=require("punycode")},12781:e=>{"use strict";e.exports=require("stream")},24404:e=>{"use strict";e.exports=require("tls")},57310:e=>{"use strict";e.exports=require("url")},59796:e=>{"use strict";e.exports=require("zlib")},36372:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>l.a,__next_app__:()=>h,originalPathname:()=>u,pages:()=>d,routeModule:()=>x,tree:()=>c}),r(42575),r(73702),r(53817),r(35866);var s=r(23191),a=r(88716),i=r(37922),l=r.n(i),o=r(95231),n={};for(let e in o)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(n[e]=()=>o[e]);r.d(t,n);let c=["",{children:["books",{children:["[id]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,42575)),"D:\\dev\\cursor\\course builder\\src\\app\\books\\[id]\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,73702)),"D:\\dev\\cursor\\course builder\\src\\app\\books\\layout.tsx"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,53817)),"D:\\dev\\cursor\\course builder\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,35866,23)),"next/dist/client/components/not-found-error"]}],d=["D:\\dev\\cursor\\course builder\\src\\app\\books\\[id]\\page.tsx"],u="/books/[id]/page",h={require:r,loadChunk:()=>Promise.resolve()},x=new s.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/books/[id]/page",pathname:"/books/[id]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},36861:(e,t,r)=>{Promise.resolve().then(r.bind(r,17025))},16774:(e,t,r)=>{Promise.resolve().then(r.bind(r,95086))},62881:(e,t,r)=>{"use strict";r.d(t,{Z:()=>u});var s=r(17577);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),i=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,r)=>r?r.toUpperCase():t.toLowerCase()),l=e=>{let t=i(e);return t.charAt(0).toUpperCase()+t.slice(1)},o=(...e)=>e.filter((e,t,r)=>!!e&&""!==e.trim()&&r.indexOf(e)===t).join(" ").trim(),n=e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0};/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var c={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let d=(0,s.forwardRef)(({color:e="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:a,className:i="",children:l,iconNode:d,...u},h)=>(0,s.createElement)("svg",{ref:h,...c,width:t,height:t,stroke:e,strokeWidth:a?24*Number(r)/Number(t):r,className:o("lucide",i),...!l&&!n(u)&&{"aria-hidden":"true"},...u},[...d.map(([e,t])=>(0,s.createElement)(e,t)),...Array.isArray(l)?l:[l]])),u=(e,t)=>{let r=(0,s.forwardRef)(({className:r,...i},n)=>(0,s.createElement)(d,{ref:n,iconNode:t,className:o(`lucide-${a(l(e))}`,`lucide-${e}`,r),...i}));return r.displayName=l(e),r}},86333:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});let s=(0,r(62881).Z)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},6343:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});let s=(0,r(62881).Z)("book-open",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]])},39183:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});let s=(0,r(62881).Z)("chevron-right",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]])},54014:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});let s=(0,r(62881).Z)("globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]])},9015:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});let s=(0,r(62881).Z)("lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]])},88307:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});let s=(0,r(62881).Z)("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]])},69508:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});let s=(0,r(62881).Z)("square-pen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]])},98091:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});let s=(0,r(62881).Z)("trash-2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},94019:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});let s=(0,r(62881).Z)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},17025:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>p});var s=r(10326),a=r(17577),i=r(35047),l=r(86333),o=r(6343),n=r(54014),c=r(9015),d=r(69508),u=r(98091),h=r(24408),x=r(85439);function p(){let e=(0,i.useRouter)(),t=(0,i.useParams)().id,[r,p]=(0,a.useState)(null),[m,g]=(0,a.useState)(!0),[y,b]=(0,a.useState)(!1),[v,f]=(0,a.useState)(!1),k=async()=>{b(!0);try{await h.a.deleteBook(t),e.push("/books"),e.refresh()}catch(e){console.error("Failed to delete book:",e)}finally{b(!1),f(!1)}};return m?s.jsx("div",{className:"flex justify-center items-center min-h-screen",children:s.jsx(x.$j,{size:"lg"})}):r?(0,s.jsxs)("div",{className:"max-w-5xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,s.jsxs)("div",{className:"mb-8",children:[s.jsx(x.zx,{variant:"ghost",size:"sm",onClick:()=>e.push("/books"),leftIcon:s.jsx(l.Z,{className:"h-4 w-4"}),className:"mb-4",children:"Back to Books"}),(0,s.jsxs)("div",{className:"flex flex-col md:flex-row md:items-start md:justify-between gap-6",children:[(0,s.jsxs)("div",{className:"flex items-start gap-6",children:[r.cover_image_url?s.jsx("img",{src:r.cover_image_url,alt:r.title,className:"w-40 h-56 rounded-lg object-cover shadow-lg"}):s.jsx("div",{className:"w-40 h-56 rounded-lg bg-gray-200 flex items-center justify-center",children:s.jsx(o.Z,{className:"w-16 h-16 text-gray-400"})}),(0,s.jsxs)("div",{className:"flex-1",children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100",children:r.title}),r.author&&(0,s.jsxs)("p",{className:"text-lg text-gray-600 mt-1",children:["by ",r.author]}),(0,s.jsxs)("div",{className:"flex items-center gap-3 mt-4",children:[(0,s.jsxs)(x.Ct,{variant:r.is_public?"success":"secondary",children:[r.is_public?s.jsx(n.Z,{className:"h-4 w-4 mr-1.5"}):s.jsx(c.Z,{className:"h-4 w-4 mr-1.5"}),r.is_public?"Public":"Private"]}),r.category&&s.jsx(x.Ct,{style:{backgroundColor:`${r.category.color}20`,color:r.category.color},children:r.category.name})]})]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2 flex-shrink-0",children:[s.jsx(x.zx,{variant:"outline",onClick:()=>e.push(`/books/${t}/edit`),leftIcon:s.jsx(d.Z,{className:"h-4 w-4"}),children:"Edit"}),s.jsx(x.zx,{variant:"danger",onClick:()=>f(!0),leftIcon:s.jsx(u.Z,{className:"h-4 w-4"}),className:"text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20",children:"Delete"})]})]})]}),(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)(x.Zb,{children:[s.jsx(x.Zb.Header,{children:s.jsx("h2",{className:"text-lg font-semibold",children:"Description"})}),s.jsx(x.Zb.Content,{children:s.jsx("div",{className:"prose prose-sm max-w-none dark:prose-invert",children:r.description||s.jsx("p",{className:"text-gray-500 italic",children:"No description provided."})})})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,s.jsxs)(x.Zb,{children:[s.jsx(x.Zb.Header,{children:s.jsx("h2",{className:"text-lg font-semibold",children:"Details"})}),s.jsx(x.Zb.Content,{children:(0,s.jsxs)("dl",{className:"space-y-3 text-sm",children:[r.publisher&&(0,s.jsxs)("div",{children:[s.jsx("dt",{className:"font-medium text-gray-500",children:"Publisher"}),s.jsx("dd",{children:r.publisher})]}),r.publication_year&&(0,s.jsxs)("div",{children:[s.jsx("dt",{className:"font-medium text-gray-500",children:"Year"}),s.jsx("dd",{children:r.publication_year})]}),r.language&&(0,s.jsxs)("div",{children:[s.jsx("dt",{className:"font-medium text-gray-500",children:"Language"}),s.jsx("dd",{className:"uppercase",children:r.language})]}),r.content_type&&(0,s.jsxs)("div",{children:[s.jsx("dt",{className:"font-medium text-gray-500",children:"Content Type"}),s.jsx("dd",{className:"capitalize",children:r.content_type})]})]})})]}),r.tags&&r.tags.length>0&&(0,s.jsxs)(x.Zb,{children:[s.jsx(x.Zb.Header,{children:s.jsx("h2",{className:"text-lg font-semibold",children:"Tags"})}),s.jsx(x.Zb.Content,{children:s.jsx("div",{className:"flex flex-wrap gap-2",children:r.tags.map(e=>s.jsx(x.Ct,{children:e},e))})})]})]})]}),(0,s.jsxs)(x.u_,{isOpen:v,onClose:()=>f(!1),title:"Delete Book",className:"max-w-md",children:[(0,s.jsxs)("p",{className:"text-gray-600 dark:text-gray-400",children:['Are you sure you want to delete "',r.title,'"? This action cannot be undone.']}),(0,s.jsxs)("div",{className:"flex justify-end gap-3 mt-6",children:[s.jsx(x.zx,{variant:"outline",onClick:()=>f(!1),children:"Cancel"}),s.jsx(x.zx,{variant:"danger",onClick:k,loading:y,children:"Delete Book"})]})]})]}):null}},95086:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>l});var s=r(10326),a=r(62760),i=r(80341);function l({children:e}){return s.jsx(i.AuthGuard,{children:s.jsx(a.DashboardLayout,{children:e})})}},24408:(e,t,r)=>{"use strict";r.d(t,{a:()=>a});let s=(0,r(59813).createClientComponentClient)(),a={async getBooks(e={}){let t=s.from("books").select(`
        *,
        category:categories(id, name, color, icon)
      `).order("created_at",{ascending:!1});e.search&&(t=t.or(`title.ilike.%${e.search}%,author.ilike.%${e.search}%,description.ilike.%${e.search}%`)),e.author&&(t=t.ilike("author",`%${e.author}%`)),e.categoryId&&(t=t.eq("category_id",e.categoryId)),e.contentType&&(t=t.eq("content_type",e.contentType)),e.language&&(t=t.eq("language",e.language)),e.publicationYear&&(t=t.eq("publication_year",e.publicationYear)),void 0!==e.isPublic&&(t=t.eq("is_public",e.isPublic)),e.tags&&e.tags.length>0&&(t=t.contains("tags",e.tags));let{data:r,error:a}=await t;if(a)throw a;return r},async getBook(e){let{data:t,error:r}=await s.from("books").select(`
        *,
        category:categories(id, name, color, icon),
        course_books(
          id,
          course_id,
          is_required,
          notes,
          position,
          course:courses(id, title, status)
        )
      `).eq("id",e).single();if(r)throw r;return t},async createBook(e){let{data:t}=await s.auth.getUser();if(!t.user)throw Error("User not authenticated");let r={...e,language:e.language||"en",is_public:e.is_public||!1,user_id:t.user.id},{data:a,error:i}=await s.from("books").insert(r).select().single();if(i)throw i;return a},async updateBook({id:e,...t}){let{data:r,error:a}=await s.from("books").update({...t,updated_at:new Date().toISOString()}).eq("id",e).select().single();if(a)throw a;return r},async deleteBook(e){let{error:t}=await s.from("books").delete().eq("id",e);if(t)throw t},async getBookStats(){let{data:e}=await s.auth.getUser();if(!e.user)throw Error("User not authenticated");let{data:t,error:r}=await s.from("books").select("content_type",{count:"exact"}).eq("user_id",e.user.id);if(r)throw r;return{total:t?.length||0,text:t?.filter(e=>"text"===e.content_type).length||0,video:t?.filter(e=>"video"===e.content_type).length||0,audio:t?.filter(e=>"audio"===e.content_type).length||0,pdf:t?.filter(e=>"pdf"===e.content_type).length||0,other:t?.filter(e=>["image","interactive"].includes(e.content_type)).length||0}},async getAuthors(){let{data:e}=await s.auth.getUser();if(!e.user)throw Error("User not authenticated");let{data:t,error:r}=await s.from("books").select("author").eq("user_id",e.user.id).not("author","is",null);if(r)throw r;return Array.from(new Set(t?.map(e=>e.author).filter(Boolean))).sort()},async getLanguages(){let{data:e}=await s.auth.getUser();if(!e.user)throw Error("User not authenticated");let{data:t,error:r}=await s.from("books").select("language").eq("user_id",e.user.id);if(r)throw r;return Array.from(new Set(t?.map(e=>e.language).filter(Boolean))).sort()},getContentTypes:()=>[{value:"text",label:"Text",icon:"\uD83D\uDCC4"},{value:"pdf",label:"PDF",icon:"\uD83D\uDCD1"},{value:"video",label:"Video",icon:"\uD83C\uDFA5"},{value:"audio",label:"Audio",icon:"\uD83C\uDFA7"},{value:"image",label:"Image",icon:"\uD83D\uDDBC️"},{value:"interactive",label:"Interactive",icon:"\uD83C\uDFAE"}]}},42575:(e,t,r)=>{"use strict";r.r(t),r.d(t,{$$typeof:()=>l,__esModule:()=>i,default:()=>o});var s=r(68570);let a=(0,s.createProxy)(String.raw`D:\dev\cursor\course builder\src\app\books\[id]\page.tsx`),{__esModule:i,$$typeof:l}=a;a.default;let o=(0,s.createProxy)(String.raw`D:\dev\cursor\course builder\src\app\books\[id]\page.tsx#default`)},73702:(e,t,r)=>{"use strict";r.r(t),r.d(t,{$$typeof:()=>l,__esModule:()=>i,default:()=>o});var s=r(68570);let a=(0,s.createProxy)(String.raw`D:\dev\cursor\course builder\src\app\books\layout.tsx`),{__esModule:i,$$typeof:l}=a;a.default;let o=(0,s.createProxy)(String.raw`D:\dev\cursor\course builder\src\app\books\layout.tsx#default`)},79360:(e,t,r)=>{"use strict";r.d(t,{j:()=>l});var s=r(41135);let a=e=>"boolean"==typeof e?`${e}`:0===e?"0":e,i=s.W,l=(e,t)=>r=>{var s;if((null==t?void 0:t.variants)==null)return i(e,null==r?void 0:r.class,null==r?void 0:r.className);let{variants:l,defaultVariants:o}=t,n=Object.keys(l).map(e=>{let t=null==r?void 0:r[e],s=null==o?void 0:o[e];if(null===t)return null;let i=a(t)||a(s);return l[e][i]}),c=r&&Object.entries(r).reduce((e,t)=>{let[r,s]=t;return void 0===s||(e[r]=s),e},{});return i(e,n,null==t?void 0:null===(s=t.compoundVariants)||void 0===s?void 0:s.reduce((e,t)=>{let{class:r,className:s,...a}=t;return Object.entries(a).every(e=>{let[t,r]=e;return Array.isArray(r)?r.includes({...o,...c}[t]):({...o,...c})[t]===r})?[...e,r,s]:e},[]),null==r?void 0:r.class,null==r?void 0:r.className)}}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[745,48,849,254,659,439],()=>r(36372));module.exports=s})();