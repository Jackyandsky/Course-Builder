(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3041],{62459:function(e,s,t){Promise.resolve().then(t.bind(t,73115))},42421:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});let a=(0,t(78030).Z)("chevron-down",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]])},70518:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});let a=(0,t(78030).Z)("chevron-left",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]])},14392:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});let a=(0,t(78030).Z)("chevron-up",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]])},63550:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});let a=(0,t(78030).Z)("ellipsis",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]])},65607:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});let a=(0,t(78030).Z)("funnel",[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]])},4436:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});let a=(0,t(78030).Z)("globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]])},74453:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});let a=(0,t(78030).Z)("lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]])},73115:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return C}});var a=t(57437),r=t(2265),i=t(16463),l=t(58948),c=t(78030);let n=(0,c.Z)("bookmark",[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z",key:"1fy3hk"}]]);var d=t(24241),o=t(95137),u=t(4436),h=t(74453),x=t(40933);let m=(0,c.Z)("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]),g=(0,c.Z)("copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);var p=t(6649);let f=(0,c.Z)("archive",[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]]);var y=t(10883),j=t(21902);let b=(0,c.Z)("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);var v=t(42368),w=t(2318),N=t(88690);let k={draft:"default",published:"success",archived:"secondary"},Z={beginner:"info",intermediate:"warning",advanced:"danger",expert:"primary"};function C(){let e=(0,i.useRouter)(),s=(0,i.useParams)().id,[t,c]=(0,r.useState)(null),[C,_]=(0,r.useState)(!0),[S,z]=(0,r.useState)(!1),[q,I]=(0,r.useState)(!1),[D,M]=(0,r.useState)("overview"),[O,L]=(0,r.useState)(!1);(0,r.useEffect)(()=>{s&&P()},[s]);let P=async()=>{try{_(!0);let e=await v.J.getCourse(s);c(e)}catch(s){console.error("Failed to load course:",s),e.push("/courses")}finally{_(!1)}},E=async()=>{try{z(!0),await v.J.deleteCourse(s),e.push("/courses")}catch(e){console.error("Failed to delete course:",e)}finally{z(!1),I(!1)}},H=async()=>{try{await v.J.archiveCourse(s),await P()}catch(e){console.error("Failed to archive course:",e)}},U=async()=>{try{await v.J.publishCourse(s),await P()}catch(e){console.error("Failed to publish course:",e)}};if(C)return(0,a.jsx)("div",{className:"flex justify-center items-center min-h-screen",children:(0,a.jsx)(w.$j,{size:"lg"})});if(!t)return null;let A=[{id:"overview",label:"Overview",icon:(0,a.jsx)(l.Z,{className:"h-4 w-4"})},{id:"materials",label:"Materials",icon:(0,a.jsx)(n,{className:"h-4 w-4"})},{id:"schedule",label:"Schedule",icon:(0,a.jsx)(d.Z,{className:"h-4 w-4"})}];return(0,a.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,a.jsxs)("div",{className:"mb-8",children:[(0,a.jsx)(w.zx,{variant:"ghost",size:"sm",onClick:()=>e.push("/courses"),leftIcon:(0,a.jsx)(o.Z,{className:"h-4 w-4"}),className:"mb-4",children:"Back to Courses"}),(0,a.jsxs)("div",{className:"flex flex-col lg:flex-row lg:items-start lg:justify-between gap-6",children:[(0,a.jsx)("div",{className:"flex-1",children:(0,a.jsxs)("div",{className:"flex items-start gap-4",children:[t.thumbnail_url&&(0,a.jsx)("img",{src:t.thumbnail_url,alt:t.title,className:"w-24 h-24 rounded-lg object-cover"}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100",children:t.title}),(0,a.jsx)(w.Ct,{variant:k[t.status],children:t.status}),t.is_public?(0,a.jsx)(u.Z,{className:"h-5 w-5 text-green-500"}):(0,a.jsx)(h.Z,{className:"h-5 w-5 text-gray-400"})]}),t.short_description&&(0,a.jsx)("p",{className:"text-lg text-gray-600 dark:text-gray-400 mb-4",children:t.short_description}),(0,a.jsxs)("div",{className:"flex flex-wrap items-center gap-4 text-sm text-gray-500",children:[(0,a.jsx)(w.Ct,{variant:Z[t.difficulty],size:"sm",children:t.difficulty}),t.duration_hours&&(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)(x.Z,{className:"h-4 w-4"}),(0,a.jsxs)("span",{children:[t.duration_hours," hours"]})]}),t.category&&(0,a.jsx)("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium",style:{backgroundColor:t.category.color?"".concat(t.category.color,"20"):void 0,color:t.category.color||void 0},children:t.category.name})]})]})]})}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:["draft"===t.status&&(0,a.jsx)(w.zx,{variant:"primary",onClick:U,leftIcon:(0,a.jsx)(m,{className:"h-4 w-4"}),children:"Publish"}),"published"===t.status&&t.public_slug&&(0,a.jsx)(w.zx,{variant:"outline",onClick:()=>{if(null==t?void 0:t.public_slug){let e="".concat(window.location.origin,"/public/courses/").concat(t.public_slug);navigator.clipboard.writeText(e),L(!0),setTimeout(()=>L(!1),2e3)}},leftIcon:O?(0,a.jsx)(m,{className:"h-4 w-4"}):(0,a.jsx)(g,{className:"h-4 w-4"}),children:O?"Copied!":"Copy Link"}),(0,a.jsx)(w.zx,{variant:"outline",onClick:()=>e.push("/courses/".concat(s,"/edit")),leftIcon:(0,a.jsx)(p.Z,{className:"h-4 w-4"}),children:"Edit"}),"archived"!==t.status&&(0,a.jsx)(w.zx,{variant:"outline",onClick:H,leftIcon:(0,a.jsx)(f,{className:"h-4 w-4"}),children:"Archive"}),(0,a.jsx)(w.zx,{variant:"outline",onClick:()=>I(!0),leftIcon:(0,a.jsx)(y.Z,{className:"h-4 w-4"}),className:"text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20",children:"Delete"})]})]})]}),(0,a.jsx)(w.mQ,{value:D,onValueChange:M,className:"mb-6",children:(0,a.jsx)(w.dr,{children:A.map(e=>(0,a.jsxs)(w.SP,{value:e.id,children:[e.icon,(0,a.jsx)("span",{className:"ml-2",children:e.label})]},e.id))})}),"overview"===D&&(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,a.jsxs)("div",{className:"lg:col-span-2 space-y-6",children:[(0,a.jsxs)(w.Zb,{children:[(0,a.jsx)(w.Zb.Header,{children:(0,a.jsx)("h2",{className:"text-lg font-semibold",children:"Description"})}),(0,a.jsx)(w.Zb.Content,{children:(0,a.jsx)("div",{className:"prose prose-sm max-w-none dark:prose-invert",children:t.description||(0,a.jsx)("p",{className:"text-gray-500 italic",children:"No description provided"})})})]}),t.objectives&&t.objectives.length>0&&(0,a.jsxs)(w.Zb,{children:[(0,a.jsx)(w.Zb.Header,{children:(0,a.jsxs)("h2",{className:"text-lg font-semibold flex items-center gap-2",children:[(0,a.jsx)(j.Z,{className:"h-5 w-5"}),"Learning Objectives"]})}),(0,a.jsx)(w.Zb.Content,{children:(0,a.jsx)("ul",{className:"space-y-2",children:t.objectives.map((e,s)=>(0,a.jsxs)("li",{className:"flex items-start gap-2",children:[(0,a.jsx)(m,{className:"h-4 w-4 text-green-500 mt-0.5 flex-shrink-0"}),(0,a.jsx)("span",{className:"text-sm",children:e})]},s))})})]}),t.prerequisites&&t.prerequisites.length>0&&(0,a.jsxs)(w.Zb,{children:[(0,a.jsx)(w.Zb.Header,{children:(0,a.jsxs)("h2",{className:"text-lg font-semibold flex items-center gap-2",children:[(0,a.jsx)(b,{className:"h-5 w-5"}),"Prerequisites"]})}),(0,a.jsx)(w.Zb.Content,{children:(0,a.jsx)("ul",{className:"space-y-2",children:t.prerequisites.map((e,s)=>(0,a.jsxs)("li",{className:"flex items-start gap-2",children:[(0,a.jsx)("span",{className:"text-gray-400",children:"â€¢"}),(0,a.jsx)("span",{className:"text-sm",children:e})]},s))})})]})]}),(0,a.jsxs)("div",{className:"space-y-6",children:[t.tags&&t.tags.length>0&&(0,a.jsxs)(w.Zb,{children:[(0,a.jsx)(w.Zb.Header,{children:(0,a.jsx)("h3",{className:"text-sm font-semibold",children:"Tags"})}),(0,a.jsx)(w.Zb.Content,{children:(0,a.jsx)("div",{className:"flex flex-wrap gap-2",children:t.tags.map(e=>(0,a.jsx)("span",{className:"inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300",children:e},e))})})]}),(0,a.jsxs)(w.Zb,{children:[(0,a.jsx)(w.Zb.Header,{children:(0,a.jsx)("h3",{className:"text-sm font-semibold",children:"Course Information"})}),(0,a.jsx)(w.Zb.Content,{children:(0,a.jsxs)("dl",{className:"space-y-3 text-sm",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("dt",{className:"text-gray-500 dark:text-gray-400",children:"Created"}),(0,a.jsx)("dd",{className:"font-medium",children:new Date(t.created_at).toLocaleDateString()})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("dt",{className:"text-gray-500 dark:text-gray-400",children:"Last Updated"}),(0,a.jsx)("dd",{className:"font-medium",children:new Date(t.updated_at).toLocaleDateString()})]}),t.published_at&&(0,a.jsxs)("div",{children:[(0,a.jsx)("dt",{className:"text-gray-500 dark:text-gray-400",children:"Published"}),(0,a.jsx)("dd",{className:"font-medium",children:new Date(t.published_at).toLocaleDateString()})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("dt",{className:"text-gray-500 dark:text-gray-400",children:"Course ID"}),(0,a.jsx)("dd",{className:"font-mono text-xs",children:t.id})]})]})})]})]})]}),"materials"===D&&(0,a.jsx)("div",{className:"space-y-6",children:(0,a.jsxs)(w.Zb,{children:[(0,a.jsx)(w.Zb.Header,{children:(0,a.jsx)("h2",{className:"text-lg font-semibold",children:"Course Materials"})}),(0,a.jsxs)(w.Zb.Content,{className:"space-y-8",children:[(0,a.jsx)(N.$D,{courseId:s,onUpdate:P}),(0,a.jsx)("div",{className:"border-t pt-8",children:(0,a.jsx)(N.wd,{courseId:s,onUpdate:P})})]})]})}),"schedule"===D&&(0,a.jsx)(w.Zb,{children:(0,a.jsx)(w.Zb.Content,{children:(0,a.jsx)(N.jR,{courseId:s})})}),(0,a.jsxs)(w.u_,{isOpen:q,onClose:()=>I(!1),title:"Delete Course",className:"max-w-md",children:[(0,a.jsxs)("p",{className:"text-gray-600 dark:text-gray-400",children:['Are you sure you want to delete "',t.title,'"? This action cannot be undone.']}),(0,a.jsxs)("div",{className:"flex justify-end gap-3 mt-6",children:[(0,a.jsx)(w.zx,{variant:"outline",onClick:()=>I(!1),children:"Cancel"}),(0,a.jsx)(w.zx,{variant:"danger",onClick:E,loading:S,children:"Delete Course"})]})]})]})}},42368:function(e,s,t){"use strict";t.d(s,{J:function(){return r}});let a=(0,t(64392).createClientComponentClient)(),r={async getCourses(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},s=a.from("courses").select("\n        *,\n        category:categories(id, name, color, icon)\n      ").order("created_at",{ascending:!1});e.status&&(s=s.eq("status",e.status)),e.difficulty&&(s=s.eq("difficulty",e.difficulty)),e.categoryId&&(s=s.eq("category_id",e.categoryId)),void 0!==e.isPublic&&(s=s.eq("is_public",e.isPublic)),e.search&&(s=s.or("title.ilike.%".concat(e.search,"%,description.ilike.%").concat(e.search,"%"))),e.tags&&e.tags.length>0&&(s=s.contains("tags",e.tags));let{data:t,error:r}=await s;if(r)throw r;return t},async getCourse(e){let{data:s,error:t}=await a.from("courses").select("\n        *,\n        category:categories(id, name, color, icon),\n        course_books(\n          id,\n          book_id,\n          is_required,\n          notes,\n          position,\n          book:books(id, title, author, cover_image_url)\n        ),\n        course_vocabulary_groups(\n          id,\n          vocabulary_group_id,\n          position,\n          vocabulary_group:vocabulary_groups(id, name, language, difficulty)\n        )\n      ").eq("id",e).single();if(t)throw t;return s},async createCourse(e){let{data:s}=await a.auth.getUser();if(!s.user)throw Error("User not authenticated");let{data:t,error:r}=await a.from("courses").insert({...e,user_id:s.user.id,status:e.status||"draft",difficulty:e.difficulty||"beginner",is_public:e.is_public||!1}).select().single();if(r)throw r;return t},async updateCourse(e){let{id:s,...t}=e,{data:r,error:i}=await a.from("courses").update({...t,updated_at:new Date().toISOString()}).eq("id",s).select().single();if(i)throw i;return r},async deleteCourse(e){let{error:s}=await a.from("courses").delete().eq("id",e);if(s)throw s},async publishCourse(e){let{data:s,error:t}=await a.from("courses").update({status:"published",published_at:new Date().toISOString(),updated_at:new Date().toISOString()}).eq("id",e).select().single();if(t)throw t;return s},async archiveCourse(e){let{data:s,error:t}=await a.from("courses").update({status:"archived",updated_at:new Date().toISOString()}).eq("id",e).select().single();if(t)throw t;return s},async getCourseStats(){let{data:e}=await a.auth.getUser();if(!e.user)throw Error("User not authenticated");let{data:s,error:t}=await a.from("courses").select("status",{count:"exact"}).eq("user_id",e.user.id);if(t)throw t;return{total:(null==s?void 0:s.length)||0,draft:(null==s?void 0:s.filter(e=>"draft"===e.status).length)||0,published:(null==s?void 0:s.filter(e=>"published"===e.status).length)||0,archived:(null==s?void 0:s.filter(e=>"archived"===e.status).length)||0}}}}},function(e){e.O(0,[4392,302,8409,2318,8690,2971,7023,1744],function(){return e(e.s=62459)}),_N_E=e.O()}]);