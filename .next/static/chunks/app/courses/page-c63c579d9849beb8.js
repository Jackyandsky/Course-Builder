(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9065],{23035:function(e,t,s){Promise.resolve().then(s.bind(s,39446))},78030:function(e,t,s){"use strict";s.d(t,{Z:function(){return d}});var r=s(2265);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),i=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,s)=>s?s.toUpperCase():t.toLowerCase()),n=e=>{let t=i(e);return t.charAt(0).toUpperCase()+t.slice(1)},l=function(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return t.filter((e,t,s)=>!!e&&""!==e.trim()&&s.indexOf(e)===t).join(" ").trim()},c=e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0};/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var o={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let u=(0,r.forwardRef)((e,t)=>{let{color:s="currentColor",size:a=24,strokeWidth:i=2,absoluteStrokeWidth:n,className:u="",children:d,iconNode:h,...f}=e;return(0,r.createElement)("svg",{ref:t,...o,width:a,height:a,stroke:s,strokeWidth:n?24*Number(i)/Number(a):i,className:l("lucide",u),...!d&&!c(f)&&{"aria-hidden":"true"},...f},[...h.map(e=>{let[t,s]=e;return(0,r.createElement)(t,s)}),...Array.isArray(d)?d:[d]])}),d=(e,t)=>{let s=(0,r.forwardRef)((s,i)=>{let{className:c,...o}=s;return(0,r.createElement)(u,{ref:i,iconNode:t,className:l("lucide-".concat(a(n(e))),"lucide-".concat(e),c),...o})});return s.displayName=n(e),s}},6540:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(78030).Z)("book-open",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]])},42421:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(78030).Z)("chevron-down",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]])},70518:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(78030).Z)("chevron-left",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]])},87592:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(78030).Z)("chevron-right",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]])},14392:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(78030).Z)("chevron-up",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]])},40933:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(78030).Z)("clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},63550:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(78030).Z)("ellipsis",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]])},65607:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(78030).Z)("funnel",[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]])},92513:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(78030).Z)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},54817:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(78030).Z)("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]])},74697:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(78030).Z)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},16463:function(e,t,s){"use strict";var r=s(71169);s.o(r,"useParams")&&s.d(t,{useParams:function(){return r.useParams}}),s.o(r,"usePathname")&&s.d(t,{usePathname:function(){return r.usePathname}}),s.o(r,"useRouter")&&s.d(t,{useRouter:function(){return r.useRouter}})},39446:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return x}});var r=s(57437),a=s(2265),i=s(16463),n=s(92513),l=s(6540),c=s(40933);let o=(0,s(78030).Z)("chart-column",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);var u=s(65607),d=s(42368),h=s(2318);let f={draft:"default",published:"success",archived:"secondary"},m={beginner:"info",intermediate:"warning",advanced:"danger",expert:"primary"};function x(){let e=(0,i.useRouter)(),[t,s]=(0,a.useState)([]),[x,g]=(0,a.useState)(!0),[y,p]=(0,a.useState)({}),[v,j]=(0,a.useState)({total:0,draft:0,published:0,archived:0}),[b,w]=(0,a.useState)(!1);(0,a.useEffect)(()=>{k(),N()},[y]);let k=async()=>{try{g(!0);let e=await d.J.getCourses(y);s(e)}catch(e){console.error("Failed to load courses:",e)}finally{g(!1)}},N=async()=>{try{let e=await d.J.getCourseStats();j(e)}catch(e){console.error("Failed to load stats:",e)}},Z=[{id:"status",label:"Status",type:"checkbox",options:[{value:"draft",label:"Draft",count:v.draft},{value:"published",label:"Published",count:v.published},{value:"archived",label:"Archived",count:v.archived}]},{id:"difficulty",label:"Difficulty",type:"radio",options:[{value:"beginner",label:"Beginner"},{value:"intermediate",label:"Intermediate"},{value:"advanced",label:"Advanced"},{value:"expert",label:"Expert"}]}];return(0,r.jsxs)("div",{className:"space-y-6 p-6",children:[(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:"Courses"}),(0,r.jsx)("p",{className:"mt-1 text-sm text-gray-600 dark:text-gray-400",children:"Manage your courses and learning materials"})]}),(0,r.jsx)(h.zx,{onClick:()=>e.push("/courses/new"),leftIcon:(0,r.jsx)(n.Z,{className:"h-4 w-4"}),children:"Create Course"})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,r.jsx)(h.Zb,{className:"p-4",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Total Courses"}),(0,r.jsx)("p",{className:"mt-1 text-2xl font-semibold text-gray-900 dark:text-gray-100",children:v.total})]}),(0,r.jsx)(l.Z,{className:"h-8 w-8 text-gray-400"})]})}),(0,r.jsx)(h.Zb,{className:"p-4",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Draft"}),(0,r.jsx)("p",{className:"mt-1 text-2xl font-semibold text-gray-900 dark:text-gray-100",children:v.draft})]}),(0,r.jsx)(c.Z,{className:"h-8 w-8 text-gray-400"})]})}),(0,r.jsx)(h.Zb,{className:"p-4",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Published"}),(0,r.jsx)("p",{className:"mt-1 text-2xl font-semibold text-green-600 dark:text-green-400",children:v.published})]}),(0,r.jsx)(o,{className:"h-8 w-8 text-green-400"})]})}),(0,r.jsx)(h.Zb,{className:"p-4",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Archived"}),(0,r.jsx)("p",{className:"mt-1 text-2xl font-semibold text-gray-500 dark:text-gray-400",children:v.archived})]}),(0,r.jsx)(u.Z,{className:"h-8 w-8 text-gray-400"})]})})]}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4",children:[(0,r.jsx)("div",{className:"flex-1",children:(0,r.jsx)(h.Rj,{placeholder:"Search courses...",onSearch:e=>{p({...y,search:e})},fullWidth:!0})}),(0,r.jsx)(h.zx,{variant:"outline",onClick:()=>w(!b),leftIcon:(0,r.jsx)(u.Z,{className:"h-4 w-4"}),children:"Filters"})]}),b&&(0,r.jsx)("div",{className:"p-4 bg-gray-50 dark:bg-gray-800/50 rounded-lg",children:(0,r.jsx)(h.hR,{filters:Z,values:y,onChange:(e,t)=>{p({...y,[e]:t})},onReset:()=>p({}),collapsible:!1})})]}),x?(0,r.jsx)("div",{className:"flex justify-center py-12",children:(0,r.jsx)(h.$j,{size:"lg"})}):0===t.length?(0,r.jsxs)(h.Zb,{className:"p-12 text-center",children:[(0,r.jsx)(l.Z,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),(0,r.jsx)("h3",{className:"text-lg font-medium text-gray-900 dark:text-gray-100",children:"No courses found"}),(0,r.jsx)("p",{className:"mt-2 text-sm text-gray-600 dark:text-gray-400",children:"Get started by creating your first course."}),(0,r.jsx)(h.zx,{className:"mt-4",onClick:()=>e.push("/courses/new"),leftIcon:(0,r.jsx)(n.Z,{className:"h-4 w-4"}),children:"Create Course"})]}):(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:t.map(t=>(0,r.jsxs)(h.Zb,{className:"hover:shadow-lg transition-shadow cursor-pointer",onClick:()=>e.push("/courses/".concat(t.id)),children:[t.thumbnail_url&&(0,r.jsx)("div",{className:"h-48 overflow-hidden rounded-t-lg",children:(0,r.jsx)("img",{src:t.thumbnail_url,alt:t.title,className:"w-full h-full object-cover"})}),(0,r.jsxs)(h.Zb.Content,{className:"p-6",children:[(0,r.jsxs)("div",{className:"flex items-start justify-between mb-2",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 line-clamp-1",children:t.title}),(0,r.jsx)(h.Ct,{variant:f[t.status],size:"sm",children:t.status})]}),t.short_description&&(0,r.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400 line-clamp-2 mb-4",children:t.short_description}),(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)(h.Ct,{variant:m[t.difficulty],size:"sm",children:t.difficulty}),t.duration_hours&&(0,r.jsxs)("span",{className:"text-sm text-gray-500",children:[t.duration_hours,"h"]})]}),t.category&&(0,r.jsx)("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium",style:{backgroundColor:t.category.color?"".concat(t.category.color,"20"):void 0,color:t.category.color||void 0},children:t.category.name})]}),t.tags&&t.tags.length>0&&(0,r.jsxs)("div",{className:"mt-3 flex flex-wrap gap-1",children:[t.tags.slice(0,3).map(e=>(0,r.jsx)("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300",children:e},e)),t.tags.length>3&&(0,r.jsxs)("span",{className:"text-xs text-gray-500",children:["+",t.tags.length-3]})]})]})]},t.id))})]})}},42368:function(e,t,s){"use strict";s.d(t,{J:function(){return a}});let r=(0,s(64392).createClientComponentClient)(),a={async getCourses(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=r.from("courses").select("\n        *,\n        category:categories(id, name, color, icon)\n      ").order("created_at",{ascending:!1});e.status&&(t=t.eq("status",e.status)),e.difficulty&&(t=t.eq("difficulty",e.difficulty)),e.categoryId&&(t=t.eq("category_id",e.categoryId)),void 0!==e.isPublic&&(t=t.eq("is_public",e.isPublic)),e.search&&(t=t.or("title.ilike.%".concat(e.search,"%,description.ilike.%").concat(e.search,"%"))),e.tags&&e.tags.length>0&&(t=t.contains("tags",e.tags));let{data:s,error:a}=await t;if(a)throw a;return s},async getCourse(e){let{data:t,error:s}=await r.from("courses").select("\n        *,\n        category:categories(id, name, color, icon),\n        course_books(\n          id,\n          book_id,\n          is_required,\n          notes,\n          position,\n          book:books(id, title, author, cover_image_url)\n        ),\n        course_vocabulary_groups(\n          id,\n          vocabulary_group_id,\n          position,\n          vocabulary_group:vocabulary_groups(id, name, language, difficulty)\n        )\n      ").eq("id",e).single();if(s)throw s;return t},async createCourse(e){let{data:t}=await r.auth.getUser();if(!t.user)throw Error("User not authenticated");let{data:s,error:a}=await r.from("courses").insert({...e,user_id:t.user.id,status:e.status||"draft",difficulty:e.difficulty||"beginner",is_public:e.is_public||!1}).select().single();if(a)throw a;return s},async updateCourse(e){let{id:t,...s}=e,{data:a,error:i}=await r.from("courses").update({...s,updated_at:new Date().toISOString()}).eq("id",t).select().single();if(i)throw i;return a},async deleteCourse(e){let{error:t}=await r.from("courses").delete().eq("id",e);if(t)throw t},async publishCourse(e){let{data:t,error:s}=await r.from("courses").update({status:"published",published_at:new Date().toISOString(),updated_at:new Date().toISOString()}).eq("id",e).select().single();if(s)throw s;return t},async archiveCourse(e){let{data:t,error:s}=await r.from("courses").update({status:"archived",updated_at:new Date().toISOString()}).eq("id",e).select().single();if(s)throw s;return t},async getCourseStats(){let{data:e}=await r.auth.getUser();if(!e.user)throw Error("User not authenticated");let{data:t,error:s}=await r.from("courses").select("status",{count:"exact"}).eq("user_id",e.user.id);if(s)throw s;return{total:(null==t?void 0:t.length)||0,draft:(null==t?void 0:t.filter(e=>"draft"===e.status).length)||0,published:(null==t?void 0:t.filter(e=>"published"===e.status).length)||0,archived:(null==t?void 0:t.filter(e=>"archived"===e.status).length)||0}}}},13027:function(e,t,s){"use strict";s.d(t,{j:function(){return n}});var r=s(44839);let a=e=>"boolean"==typeof e?`${e}`:0===e?"0":e,i=r.W,n=(e,t)=>s=>{var r;if((null==t?void 0:t.variants)==null)return i(e,null==s?void 0:s.class,null==s?void 0:s.className);let{variants:n,defaultVariants:l}=t,c=Object.keys(n).map(e=>{let t=null==s?void 0:s[e],r=null==l?void 0:l[e];if(null===t)return null;let i=a(t)||a(r);return n[e][i]}),o=s&&Object.entries(s).reduce((e,t)=>{let[s,r]=t;return void 0===r||(e[s]=r),e},{});return i(e,c,null==t?void 0:null===(r=t.compoundVariants)||void 0===r?void 0:r.reduce((e,t)=>{let{class:s,className:r,...a}=t;return Object.entries(a).every(e=>{let[t,s]=e;return Array.isArray(s)?s.includes({...l,...o}[t]):({...l,...o})[t]===s})?[...e,s,r]:e},[]),null==s?void 0:s.class,null==s?void 0:s.className)}},44839:function(e,t,s){"use strict";function r(){for(var e,t,s=0,r="",a=arguments.length;s<a;s++)(e=arguments[s])&&(t=function e(t){var s,r,a="";if("string"==typeof t||"number"==typeof t)a+=t;else if("object"==typeof t){if(Array.isArray(t)){var i=t.length;for(s=0;s<i;s++)t[s]&&(r=e(t[s]))&&(a&&(a+=" "),a+=r)}else for(r in t)t[r]&&(a&&(a+=" "),a+=r)}return a}(e))&&(r&&(r+=" "),r+=t);return r}s.d(t,{W:function(){return r}})}},function(e){e.O(0,[4392,8409,2318,2971,7023,1744],function(){return e(e.s=23035)}),_N_E=e.O()}]);