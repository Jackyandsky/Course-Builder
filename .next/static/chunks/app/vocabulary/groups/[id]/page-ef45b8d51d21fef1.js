(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1444],{87981:function(e,t,r){Promise.resolve().then(r.bind(r,89447))},78030:function(e,t,r){"use strict";r.d(t,{Z:function(){return u}});var s=r(2265);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),l=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,r)=>r?r.toUpperCase():t.toLowerCase()),i=e=>{let t=l(e);return t.charAt(0).toUpperCase()+t.slice(1)},n=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.filter((e,t,r)=>!!e&&""!==e.trim()&&r.indexOf(e)===t).join(" ").trim()},c=e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0};/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var o={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let d=(0,s.forwardRef)((e,t)=>{let{color:r="currentColor",size:a=24,strokeWidth:l=2,absoluteStrokeWidth:i,className:d="",children:u,iconNode:h,...x}=e;return(0,s.createElement)("svg",{ref:t,...o,width:a,height:a,stroke:r,strokeWidth:i?24*Number(l)/Number(a):l,className:n("lucide",d),...!u&&!c(x)&&{"aria-hidden":"true"},...x},[...h.map(e=>{let[t,r]=e;return(0,s.createElement)(t,r)}),...Array.isArray(u)?u:[u]])}),u=(e,t)=>{let r=(0,s.forwardRef)((r,l)=>{let{className:c,...o}=r;return(0,s.createElement)(d,{ref:l,iconNode:t,className:n("lucide-".concat(a(i(e))),"lucide-".concat(e),c),...o})});return r.displayName=i(e),r}},95137:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});let s=(0,r(78030).Z)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},6540:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});let s=(0,r(78030).Z)("book-open",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]])},42421:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});let s=(0,r(78030).Z)("chevron-down",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]])},70518:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});let s=(0,r(78030).Z)("chevron-left",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]])},87592:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});let s=(0,r(78030).Z)("chevron-right",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]])},14392:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});let s=(0,r(78030).Z)("chevron-up",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]])},63550:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});let s=(0,r(78030).Z)("ellipsis",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]])},65607:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});let s=(0,r(78030).Z)("funnel",[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]])},92513:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});let s=(0,r(78030).Z)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},54817:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});let s=(0,r(78030).Z)("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]])},6649:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});let s=(0,r(78030).Z)("square-pen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]])},10883:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});let s=(0,r(78030).Z)("trash-2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},74697:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});let s=(0,r(78030).Z)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},16463:function(e,t,r){"use strict";var s=r(71169);r.o(s,"useParams")&&r.d(t,{useParams:function(){return s.useParams}}),r.o(s,"usePathname")&&r.d(t,{usePathname:function(){return s.usePathname}}),r.o(s,"useRouter")&&r.d(t,{useRouter:function(){return s.useRouter}})},89447:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return x}});var s=r(57437),a=r(2265),l=r(16463),i=r(95137),n=r(6649),c=r(10883),o=r(6540),d=r(92513),u=r(2318),h=r(64392);function x(){let e=(0,l.useParams)(),t=(0,l.useRouter)(),r=(0,h.createClientComponentClient)(),[x,f]=(0,a.useState)(null),[y,p]=(0,a.useState)([]),[v,g]=(0,a.useState)([]),[j,b]=(0,a.useState)(!0),[N,w]=(0,a.useState)(!1),k=e.id;(0,a.useEffect)(()=>{k&&(_(),Z(),C())},[k]);let _=async()=>{try{let{data:e,error:t}=await r.from("vocabulary_groups").select("*").eq("id",k).single();if(t)throw t;f(e)}catch(e){console.error("Failed to load vocabulary group:",e)}},Z=async()=>{try{b(!0);let{data:e,error:t}=await r.from("vocabulary_group_items").select("\n          *,\n          vocabulary:vocabulary(*)\n        ").eq("vocabulary_group_id",k).order("position");if(t)throw t;p((null==e?void 0:e.map(e=>e.vocabulary).filter(Boolean))||[])}catch(e){console.error("Failed to load vocabulary:",e)}finally{b(!1)}},C=async()=>{try{let{data:e,error:t}=await r.from("vocabulary_group_books").select("\n          book:books(\n            id,\n            title,\n            author,\n            cover_image_url,\n            publication_year\n          )\n        ").eq("vocabulary_group_id",k).order("position");if(t)throw t;let s=(null==e?void 0:e.map(e=>e.book).filter(Boolean))||[];g(s)}catch(e){console.error("Failed to load related books:",e)}},z=async()=>{if(x&&confirm("Are you sure you want to delete this vocabulary group?"))try{let{error:e}=await r.from("vocabulary_groups").delete().eq("id",x.id);if(e)throw e;t.push("/vocabulary/groups")}catch(e){console.error("Failed to delete vocabulary group:",e)}},A=async e=>{if(confirm("Are you sure you want to remove this word from the group?"))try{let{error:t}=await r.from("vocabulary_group_items").delete().eq("vocabulary_group_id",k).eq("vocabulary_id",e);if(t)throw t;Z()}catch(e){console.error("Failed to remove word from group:",e)}};return x||j?(0,s.jsxs)("div",{className:"space-y-6 p-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,s.jsx)(u.zx,{variant:"ghost",size:"sm",onClick:()=>t.push("/vocabulary/groups"),leftIcon:(0,s.jsx)(i.Z,{className:"h-4 w-4"}),children:"Back"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:(null==x?void 0:x.name)||"Loading..."}),(null==x?void 0:x.description)&&(0,s.jsx)("p",{className:"mt-1 text-sm text-gray-600",children:x.description})]})]}),(0,s.jsxs)("div",{className:"flex space-x-2",children:[(0,s.jsx)(u.zx,{variant:"outline",onClick:()=>t.push("/vocabulary/groups/".concat(k,"/edit")),leftIcon:(0,s.jsx)(n.Z,{className:"h-4 w-4"}),children:"Edit"}),(0,s.jsx)(u.zx,{variant:"outline",onClick:z,leftIcon:(0,s.jsx)(c.Z,{className:"h-4 w-4"}),children:"Delete"})]})]}),x&&(0,s.jsxs)(u.Zb,{children:[(0,s.jsx)(u.Zb.Header,{children:(0,s.jsx)(u.Zb.Title,{children:"Group Information"})}),(0,s.jsxs)(u.Zb.Content,{children:[(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"text-sm font-medium text-gray-700",children:"Language"}),(0,s.jsx)("p",{className:"mt-1",children:x.language})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"text-sm font-medium text-gray-700",children:"Target Language"}),(0,s.jsx)("p",{className:"mt-1",children:x.target_language||"Not specified"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"text-sm font-medium text-gray-700",children:"Difficulty"}),(0,s.jsx)("p",{className:"mt-1",children:(0,s.jsx)(u.Ct,{variant:"beginner"===x.difficulty?"success":"intermediate"===x.difficulty?"warning":"danger",children:x.difficulty})})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"text-sm font-medium text-gray-700",children:"Vocabulary Count"}),(0,s.jsxs)("p",{className:"mt-1",children:[y.length," words"]})]})]}),x.tags&&x.tags.length>0&&(0,s.jsxs)("div",{className:"mt-4",children:[(0,s.jsx)("label",{className:"text-sm font-medium text-gray-700",children:"Tags"}),(0,s.jsx)("div",{className:"mt-2 flex flex-wrap gap-2",children:x.tags.map((e,t)=>(0,s.jsx)(u.Ct,{variant:"secondary",children:e},t))})]}),v.length>0&&(0,s.jsxs)("div",{className:"mt-4",children:[(0,s.jsxs)("label",{className:"text-sm font-medium text-gray-700",children:["Related Books (",v.length,")"]}),(0,s.jsx)("div",{className:"mt-2 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3",children:v.map(e=>(0,s.jsxs)("div",{className:"flex items-center space-x-3 p-3 border rounded-lg hover:shadow-md transition-shadow cursor-pointer",onClick:()=>t.push("/books/".concat(e.id)),children:[e.cover_image_url?(0,s.jsx)("img",{src:e.cover_image_url,alt:e.title,className:"w-10 h-12 object-cover rounded"}):(0,s.jsx)("div",{className:"w-10 h-12 bg-gray-100 dark:bg-gray-800 rounded flex items-center justify-center",children:(0,s.jsx)(o.Z,{className:"h-4 w-4 text-gray-400"})}),(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsx)("h4",{className:"font-medium text-sm line-clamp-1",title:e.title,children:e.title}),e.author&&(0,s.jsxs)("p",{className:"text-xs text-gray-600 line-clamp-1",title:e.author,children:["by ",e.author]}),e.publication_year&&(0,s.jsx)("p",{className:"text-xs text-gray-500",children:e.publication_year})]})]},e.id))})]})]})]}),(0,s.jsxs)(u.Zb,{children:[(0,s.jsx)(u.Zb.Header,{children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)(u.Zb.Title,{children:["Vocabulary Words (",y.length,")"]}),(0,s.jsxs)("div",{className:"flex space-x-2",children:[(0,s.jsx)(u.zx,{variant:"outline",size:"sm",onClick:()=>w(!0),leftIcon:(0,s.jsx)(d.Z,{className:"h-4 w-4"}),children:"Add Existing Word"}),(0,s.jsx)(u.zx,{size:"sm",onClick:()=>t.push("/vocabulary/new?group_id=".concat(k)),leftIcon:(0,s.jsx)(d.Z,{className:"h-4 w-4"}),children:"Create New Word"})]})]})}),(0,s.jsx)(u.Zb.Content,{children:j?(0,s.jsx)("div",{className:"flex justify-center py-8",children:(0,s.jsx)(u.$j,{size:"lg"})}):0===y.length?(0,s.jsxs)("div",{className:"text-center py-8",children:[(0,s.jsx)("p",{className:"text-gray-500",children:"No vocabulary words yet."}),(0,s.jsxs)("div",{className:"mt-4 flex justify-center space-x-2",children:[(0,s.jsx)(u.zx,{variant:"outline",onClick:()=>w(!0),leftIcon:(0,s.jsx)(d.Z,{className:"h-4 w-4"}),children:"Add Existing Word"}),(0,s.jsx)(u.zx,{onClick:()=>t.push("/vocabulary/new?group_id=".concat(k)),leftIcon:(0,s.jsx)(d.Z,{className:"h-4 w-4"}),children:"Create New Word"})]})]}):(0,s.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 xl:grid-cols-8 gap-2",children:y.map(e=>(0,s.jsx)("div",{className:"border rounded-lg p-2 hover:shadow-md transition-shadow group relative",children:(0,s.jsxs)("div",{className:"space-y-1",children:[(0,s.jsxs)("div",{className:"flex items-start justify-between",children:[(0,s.jsx)("h3",{className:"font-medium text-xs line-clamp-2 flex-1",title:e.word,children:e.word}),(0,s.jsx)(u.zx,{variant:"ghost",size:"sm",onClick:()=>A(e.id),className:"opacity-0 group-hover:opacity-100 transition-opacity h-4 w-4 p-0 text-red-600 hover:text-red-700 ml-1",title:"Remove from group",children:"\xd7"})]}),e.translation&&(0,s.jsx)("p",{className:"text-xs text-gray-600 line-clamp-1",title:e.translation,children:e.translation}),(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[e.part_of_speech&&(0,s.jsx)(u.Ct,{variant:"secondary",className:"text-xs px-1 py-0.5",children:e.part_of_speech.length>3?e.part_of_speech.substring(0,3):e.part_of_speech}),(0,s.jsx)(u.Ct,{variant:"beginner"===e.difficulty?"success":"intermediate"===e.difficulty?"warning":"danger",className:"text-xs px-1 py-0.5",children:e.difficulty.charAt(0).toUpperCase()})]}),(0,s.jsx)(u.zx,{variant:"ghost",size:"sm",onClick:()=>t.push("/vocabulary/".concat(e.id)),className:"w-full h-6 text-xs opacity-0 group-hover:opacity-100 transition-opacity",children:"View"})]})},e.id))})})]}),N&&(0,s.jsx)(m,{groupId:k,onClose:()=>w(!1),onWordAdded:Z})]}):(0,s.jsx)("div",{className:"p-6",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Vocabulary Group Not Found"}),(0,s.jsx)("p",{className:"mt-2 text-gray-600",children:"The vocabulary group you're looking for doesn't exist."}),(0,s.jsx)(u.zx,{className:"mt-4",onClick:()=>t.push("/vocabulary/groups"),leftIcon:(0,s.jsx)(i.Z,{className:"h-4 w-4"}),children:"Back to Groups"})]})})}function m(e){let{groupId:t,onClose:r,onWordAdded:l}=e,i=(0,h.createClientComponentClient)(),[n,c]=(0,a.useState)([]),[o,d]=(0,a.useState)([]),[x,m]=(0,a.useState)(""),[f,y]=(0,a.useState)(!0),[p,v]=(0,a.useState)(!1);(0,a.useEffect)(()=>{g()},[x]);let g=async()=>{try{y(!0);let{data:e}=await i.from("vocabulary_group_items").select("vocabulary_id").eq("vocabulary_group_id",t),r=(null==e?void 0:e.map(e=>e.vocabulary_id))||[],s=i.from("vocabulary").select("*").order("word");x&&(s=s.ilike("word","%".concat(x,"%"))),r.length>0&&(s=s.not("id","in","(".concat(r.join(","),")")));let{data:a,error:l}=await s.limit(50);if(l)throw l;c(a||[])}catch(e){console.error("Failed to load available words:",e)}finally{y(!1)}},j=e=>{d(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])},b=async()=>{if(0!==o.length)try{v(!0);let e=o.map((e,r)=>({vocabulary_group_id:t,vocabulary_id:e,position:r})),{error:s}=await i.from("vocabulary_group_items").insert(e);if(s)throw s;l(),r()}catch(e){console.error("Failed to add words to group:",e)}finally{v(!1)}};return(0,s.jsx)(u.u_,{isOpen:!0,onClose:r,title:"Add Vocabulary Words",children:(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)(u.II,{placeholder:"Search vocabulary words...",value:x,onChange:e=>m(e.target.value)}),(0,s.jsx)("div",{className:"max-h-96 overflow-y-auto",children:f?(0,s.jsx)("div",{className:"flex justify-center py-8",children:(0,s.jsx)(u.$j,{})}):0===n.length?(0,s.jsx)("div",{className:"text-center py-8",children:(0,s.jsx)("p",{className:"text-gray-500",children:x?"No words found matching your search.":"No available words to add."})}):(0,s.jsx)("div",{className:"space-y-2",children:n.map(e=>(0,s.jsx)("div",{className:"border rounded-lg p-3 cursor-pointer transition-colors ".concat(o.includes(e.id)?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"),onClick:()=>j(e.id),children:(0,s.jsxs)("div",{className:"flex items-start justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h4",{className:"font-medium",children:e.word}),e.translation&&(0,s.jsx)("p",{className:"text-sm text-gray-600",children:e.translation}),(0,s.jsxs)("div",{className:"flex items-center space-x-2 mt-1",children:[e.part_of_speech&&(0,s.jsx)(u.Ct,{variant:"secondary",className:"text-xs",children:e.part_of_speech}),(0,s.jsx)(u.Ct,{variant:"beginner"===e.difficulty?"success":"intermediate"===e.difficulty?"warning":"danger",className:"text-xs",children:e.difficulty})]})]}),(0,s.jsx)("input",{type:"checkbox",checked:o.includes(e.id),onChange:()=>j(e.id),className:"rounded"})]})},e.id))})}),(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsxs)("p",{className:"text-sm text-gray-600",children:[o.length," word",1!==o.length?"s":""," selected"]}),(0,s.jsxs)("div",{className:"flex space-x-2",children:[(0,s.jsx)(u.zx,{variant:"outline",onClick:r,children:"Cancel"}),(0,s.jsx)(u.zx,{onClick:b,disabled:0===o.length||p,loading:p,children:"Add Selected Words"})]})]})]})})}},13027:function(e,t,r){"use strict";r.d(t,{j:function(){return i}});var s=r(44839);let a=e=>"boolean"==typeof e?`${e}`:0===e?"0":e,l=s.W,i=(e,t)=>r=>{var s;if((null==t?void 0:t.variants)==null)return l(e,null==r?void 0:r.class,null==r?void 0:r.className);let{variants:i,defaultVariants:n}=t,c=Object.keys(i).map(e=>{let t=null==r?void 0:r[e],s=null==n?void 0:n[e];if(null===t)return null;let l=a(t)||a(s);return i[e][l]}),o=r&&Object.entries(r).reduce((e,t)=>{let[r,s]=t;return void 0===s||(e[r]=s),e},{});return l(e,c,null==t?void 0:null===(s=t.compoundVariants)||void 0===s?void 0:s.reduce((e,t)=>{let{class:r,className:s,...a}=t;return Object.entries(a).every(e=>{let[t,r]=e;return Array.isArray(r)?r.includes({...n,...o}[t]):({...n,...o})[t]===r})?[...e,r,s]:e},[]),null==r?void 0:r.class,null==r?void 0:r.className)}},44839:function(e,t,r){"use strict";function s(){for(var e,t,r=0,s="",a=arguments.length;r<a;r++)(e=arguments[r])&&(t=function e(t){var r,s,a="";if("string"==typeof t||"number"==typeof t)a+=t;else if("object"==typeof t){if(Array.isArray(t)){var l=t.length;for(r=0;r<l;r++)t[r]&&(s=e(t[r]))&&(a&&(a+=" "),a+=s)}else for(s in t)t[s]&&(a&&(a+=" "),a+=s)}return a}(e))&&(s&&(s+=" "),s+=t);return s}r.d(t,{W:function(){return s}})}},function(e){e.O(0,[4392,8409,2318,2971,7023,1744],function(){return e(e.s=87981)}),_N_E=e.O()}]);