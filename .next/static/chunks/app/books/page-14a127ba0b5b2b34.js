(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9023],{82962:function(e,t,a){Promise.resolve().then(a.bind(a,59081))},78030:function(e,t,a){"use strict";a.d(t,{Z:function(){return u}});var r=a(2265);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),l=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,a)=>a?a.toUpperCase():t.toLowerCase()),n=e=>{let t=l(e);return t.charAt(0).toUpperCase()+t.slice(1)},i=function(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return t.filter((e,t,a)=>!!e&&""!==e.trim()&&a.indexOf(e)===t).join(" ").trim()},o=e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0};/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var c={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let d=(0,r.forwardRef)((e,t)=>{let{color:a="currentColor",size:s=24,strokeWidth:l=2,absoluteStrokeWidth:n,className:d="",children:u,iconNode:h,...g}=e;return(0,r.createElement)("svg",{ref:t,...c,width:s,height:s,stroke:a,strokeWidth:n?24*Number(l)/Number(s):l,className:i("lucide",d),...!u&&!o(g)&&{"aria-hidden":"true"},...g},[...h.map(e=>{let[t,a]=e;return(0,r.createElement)(t,a)}),...Array.isArray(u)?u:[u]])}),u=(e,t)=>{let a=(0,r.forwardRef)((a,l)=>{let{className:o,...c}=a;return(0,r.createElement)(d,{ref:l,iconNode:t,className:i("lucide-".concat(s(n(e))),"lucide-".concat(e),o),...c})});return a.displayName=n(e),a}},6540:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});let r=(0,a(78030).Z)("book-open",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]])},42421:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});let r=(0,a(78030).Z)("chevron-down",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]])},70518:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});let r=(0,a(78030).Z)("chevron-left",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]])},87592:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});let r=(0,a(78030).Z)("chevron-right",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]])},14392:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});let r=(0,a(78030).Z)("chevron-up",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]])},63550:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});let r=(0,a(78030).Z)("ellipsis",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]])},22023:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});let r=(0,a(78030).Z)("file-text",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]])},65607:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});let r=(0,a(78030).Z)("funnel",[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]])},54775:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});let r=(0,a(78030).Z)("grid-3x3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]])},18604:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});let r=(0,a(78030).Z)("image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]])},15574:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});let r=(0,a(78030).Z)("list",[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]])},92513:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});let r=(0,a(78030).Z)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},54817:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});let r=(0,a(78030).Z)("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]])},74697:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});let r=(0,a(78030).Z)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},16463:function(e,t,a){"use strict";var r=a(71169);a.o(r,"useParams")&&a.d(t,{useParams:function(){return r.useParams}}),a.o(r,"usePathname")&&a.d(t,{usePathname:function(){return r.usePathname}}),a.o(r,"useRouter")&&a.d(t,{useRouter:function(){return r.useRouter}})},59081:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return w}});var r=a(57437),s=a(2265),l=a(16463),n=a(22023),i=a(78030);let o=(0,i.Z)("video",[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]]),c=(0,i.Z)("headphones",[["path",{d:"M3 14h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-7a9 9 0 0 1 18 0v7a2 2 0 0 1-2 2h-1a2 2 0 0 1-2-2v-3a2 2 0 0 1 2-2h3",key:"1xhozi"}]]);var d=a(18604);let u=(0,i.Z)("gamepad-2",[["line",{x1:"6",x2:"10",y1:"11",y2:"11",key:"1gktln"}],["line",{x1:"8",x2:"8",y1:"9",y2:"13",key:"qnk9ow"}],["line",{x1:"15",x2:"15.01",y1:"12",y2:"12",key:"krot7o"}],["line",{x1:"18",x2:"18.01",y1:"10",y2:"10",key:"1lcuu1"}],["path",{d:"M17.32 5H6.68a4 4 0 0 0-3.978 3.59c-.006.052-.01.101-.017.152C2.604 9.416 2 14.456 2 16a3 3 0 0 0 3 3c1 0 1.5-.5 2-1l1.414-1.414A2 2 0 0 1 9.828 16h4.344a2 2 0 0 1 1.414.586L17 18c.5.5 1 1 2 1a3 3 0 0 0 3-3c0-1.545-.604-6.584-.685-7.258-.007-.05-.011-.1-.017-.151A4 4 0 0 0 17.32 5z",key:"mfqc10"}]]);var h=a(54775),g=a(15574),x=a(92513),m=a(6540),y=a(65607),p=a(46749),f=a(60287),v=a(2318),b=a(49354);let k={text:(0,r.jsx)(n.Z,{className:"h-4 w-4"}),pdf:(0,r.jsx)(n.Z,{className:"h-4 w-4"}),video:(0,r.jsx)(o,{className:"h-4 w-4"}),audio:(0,r.jsx)(c,{className:"h-4 w-4"}),image:(0,r.jsx)(d.Z,{className:"h-4 w-4"}),interactive:(0,r.jsx)(u,{className:"h-4 w-4"})},j={text:"default",pdf:"danger",video:"primary",audio:"warning",image:"success",interactive:"info"};function w(){let e=(0,l.useRouter)(),[t,a]=(0,s.useState)([]),[n,i]=(0,s.useState)(!0),[o,c]=(0,s.useState)({}),[d,u]=(0,s.useState)({total:0,text:0,video:0,audio:0,pdf:0,other:0}),[w,N]=(0,s.useState)("grid"),[_,C]=(0,s.useState)([]),[Z,A]=(0,s.useState)([]),[q,M]=(0,s.useState)([]),[z,D]=(0,s.useState)(!1);(0,s.useEffect)(()=>{S()},[]),(0,s.useEffect)(()=>{B()},[o]);let S=async()=>{try{let[e,t,a,r]=await Promise.all([p.a.getAuthors(),p.a.getLanguages(),f.G.getCategories({type:"book"}),p.a.getBookStats()]);C(e),A(t),M(a),u(r)}catch(e){console.error("Failed to load initial data:",e)}},B=async()=>{try{i(!0);let e=await p.a.getBooks(o);a(e)}catch(e){console.error("Failed to load books:",e)}finally{i(!1)}},E=[{id:"contentType",label:"Content Type",type:"checkbox",options:p.a.getContentTypes().map(e=>({value:e.value,label:e.label,icon:k[e.value]}))},{id:"author",label:"Author",type:"select",options:[{value:"",label:"All Authors"},..._.map(e=>({value:e,label:e}))]},{id:"language",label:"Language",type:"select",options:[{value:"",label:"All Languages"},...Z.map(e=>({value:e,label:e.toUpperCase()}))]},{id:"categoryId",label:"Category",type:"select",options:[{value:"",label:"All Categories"},...q.map(e=>({value:e.id,label:e.name}))]}];return(0,r.jsxs)("div",{className:"space-y-6 p-6",children:[(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:"Book Library"}),(0,r.jsx)("p",{className:"mt-1 text-sm text-gray-600 dark:text-gray-400",children:"Manage your books and learning materials"})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsxs)("div",{className:"flex items-center bg-gray-100 dark:bg-gray-800 rounded-lg p-1",children:[(0,r.jsx)("button",{onClick:()=>N("grid"),className:(0,b.cn)("p-2 rounded","grid"===w?"bg-white dark:bg-gray-700 shadow-sm":"text-gray-500 hover:text-gray-700 dark:hover:text-gray-300"),children:(0,r.jsx)(h.Z,{className:"h-4 w-4"})}),(0,r.jsx)("button",{onClick:()=>N("list"),className:(0,b.cn)("p-2 rounded","list"===w?"bg-white dark:bg-gray-700 shadow-sm":"text-gray-500 hover:text-gray-700 dark:hover:text-gray-300"),children:(0,r.jsx)(g.Z,{className:"h-4 w-4"})})]}),(0,r.jsx)(v.zx,{onClick:()=>e.push("/books/new"),leftIcon:(0,r.jsx)(x.Z,{className:"h-4 w-4"}),children:"Add Book"})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-6 gap-4",children:[(0,r.jsx)(v.Zb,{className:"p-4",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Total"}),(0,r.jsx)("p",{className:"mt-1 text-2xl font-semibold text-gray-900 dark:text-gray-100",children:d.total})]}),(0,r.jsx)(m.Z,{className:"h-8 w-8 text-gray-400"})]})}),Object.entries(k).slice(0,5).map(e=>{let[t,a]=e;return(0,r.jsx)(v.Zb,{className:"p-4",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400 capitalize",children:t}),(0,r.jsx)("p",{className:"mt-1 text-2xl font-semibold text-gray-900 dark:text-gray-100",children:d[t]||0})]}),(0,r.jsx)("div",{className:"text-gray-400",children:a})]})},t)})]}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4",children:[(0,r.jsx)("div",{className:"flex-1",children:(0,r.jsx)(v.Rj,{placeholder:"Search by title, author, or description...",onSearch:e=>{c({...o,search:e})},fullWidth:!0})}),(0,r.jsx)(v.zx,{variant:"outline",onClick:()=>D(!z),leftIcon:(0,r.jsx)(y.Z,{className:"h-4 w-4"}),children:"Filters"})]}),z&&(0,r.jsx)("div",{className:"p-4 bg-gray-50 dark:bg-gray-800/50 rounded-lg",children:(0,r.jsx)(v.hR,{filters:E,values:o,onChange:(e,t)=>{c({...o,[e]:t})},onReset:()=>c({}),collapsible:!1})})]}),n?(0,r.jsx)("div",{className:"flex justify-center py-12",children:(0,r.jsx)(v.$j,{size:"lg"})}):0===t.length?(0,r.jsxs)(v.Zb,{className:"p-12 text-center",children:[(0,r.jsx)(m.Z,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),(0,r.jsx)("h3",{className:"text-lg font-medium text-gray-900 dark:text-gray-100",children:"No books found"}),(0,r.jsx)("p",{className:"mt-2 text-sm text-gray-600 dark:text-gray-400",children:"Start building your library by adding your first book."}),(0,r.jsx)(v.zx,{className:"mt-4",onClick:()=>e.push("/books/new"),leftIcon:(0,r.jsx)(x.Z,{className:"h-4 w-4"}),children:"Add Book"})]}):"grid"===w?(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 xl:grid-cols-5 2xl:grid-cols-6 gap-4",children:t.map(t=>{var a;let s=(null===(a=t.vocabulary_group_books)||void 0===a?void 0:a.map(e=>e.vocabulary_group).filter(Boolean))||[];return(0,r.jsxs)(v.Zb,{className:"hover:shadow-md transition-shadow cursor-pointer overflow-hidden",onClick:()=>e.push("/books/".concat(t.id)),children:[t.cover_image_url?(0,r.jsx)("div",{className:"h-32 overflow-hidden bg-gray-100",children:(0,r.jsx)("img",{src:t.cover_image_url,alt:t.title,className:"w-full h-full object-cover"})}):(0,r.jsx)("div",{className:"h-32 bg-gradient-to-br from-gray-100 to-gray-200 dark:from-gray-700 dark:to-gray-800 flex items-center justify-center",children:(0,r.jsx)(m.Z,{className:"h-10 w-10 text-gray-400"})}),(0,r.jsxs)(v.Zb.Content,{className:"p-3",children:[(0,r.jsxs)("div",{className:"flex items-start justify-between mb-2",children:[(0,r.jsx)("h3",{className:"text-sm font-semibold text-gray-900 dark:text-gray-100 line-clamp-2 flex-1",children:t.title}),(0,r.jsx)(v.Ct,{variant:j[t.content_type],size:"sm",className:"ml-1 text-xs",children:k[t.content_type]})]}),t.author&&(0,r.jsxs)("p",{className:"text-xs text-gray-600 dark:text-gray-400 mb-2 line-clamp-1",children:["by ",t.author]}),(0,r.jsxs)("div",{className:"flex items-center justify-between text-xs text-gray-500 mb-2",children:[t.publication_year&&(0,r.jsx)("span",{children:t.publication_year}),t.language&&(0,r.jsx)("span",{className:"uppercase",children:t.language})]}),s.length>0&&(0,r.jsxs)("div",{className:"mb-2",children:[(0,r.jsxs)("p",{className:"text-xs text-gray-500 mb-1",children:["Vocabulary Groups (",s.length,")"]}),(0,r.jsxs)("div",{className:"flex flex-wrap gap-1",children:[s.slice(0,2).map(e=>e&&(0,r.jsx)(v.Ct,{variant:"outline",className:"text-xs px-1 py-0.5",title:e.name,children:e.name.length>12?"".concat(e.name.substring(0,12),"..."):e.name},e.id)),s.length>2&&(0,r.jsxs)(v.Ct,{variant:"outline",className:"text-xs px-1 py-0.5",children:["+",s.length-2]})]})]}),t.category&&(0,r.jsx)("div",{className:"mt-2",children:(0,r.jsx)("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium",style:{backgroundColor:t.category.color?"".concat(t.category.color,"20"):void 0,color:t.category.color||void 0},children:t.category.name})})]})]},t.id)})}):(0,r.jsx)("div",{className:"space-y-4",children:t.map(t=>{var a;let s=(null===(a=t.vocabulary_group_books)||void 0===a?void 0:a.map(e=>e.vocabulary_group).filter(Boolean))||[];return(0,r.jsx)(v.Zb,{className:"hover:shadow-md transition-shadow cursor-pointer",onClick:()=>e.push("/books/".concat(t.id)),children:(0,r.jsx)(v.Zb.Content,{className:"p-4",children:(0,r.jsxs)("div",{className:"flex items-start gap-4",children:[t.cover_image_url?(0,r.jsx)("img",{src:t.cover_image_url,alt:t.title,className:"w-20 h-28 object-cover rounded"}):(0,r.jsx)("div",{className:"w-20 h-28 bg-gray-100 dark:bg-gray-800 rounded flex items-center justify-center",children:(0,r.jsx)(m.Z,{className:"h-8 w-8 text-gray-400"})}),(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsxs)("div",{className:"flex items-start justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:t.title}),t.author&&(0,r.jsxs)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["by ",t.author]})]}),(0,r.jsx)(v.Ct,{variant:j[t.content_type],size:"sm",children:t.content_type})]}),t.description&&(0,r.jsx)("p",{className:"mt-2 text-sm text-gray-600 dark:text-gray-400 line-clamp-2",children:t.description}),(0,r.jsxs)("div",{className:"mt-3 flex items-center gap-4 text-sm text-gray-500",children:[t.publisher&&(0,r.jsxs)("span",{children:["Publisher: ",t.publisher]}),t.publication_year&&(0,r.jsx)("span",{children:t.publication_year}),t.total_pages&&(0,r.jsxs)("span",{children:[t.total_pages," pages"]}),t.language&&(0,r.jsx)("span",{className:"uppercase",children:t.language})]}),s.length>0&&(0,r.jsxs)("div",{className:"mt-3",children:[(0,r.jsxs)("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-1",children:["Vocabulary Groups (",s.length,")"]}),(0,r.jsxs)("div",{className:"flex flex-wrap gap-1",children:[s.slice(0,4).map(e=>e&&(0,r.jsx)(v.Ct,{variant:"outline",className:"text-xs",title:e.name,children:e.name},e.id)),s.length>4&&(0,r.jsxs)(v.Ct,{variant:"outline",className:"text-xs",children:["+",s.length-4," more"]})]})]}),(0,r.jsxs)("div",{className:"mt-3 flex items-center gap-2",children:[t.category&&(0,r.jsx)("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium",style:{backgroundColor:t.category.color?"".concat(t.category.color,"20"):void 0,color:t.category.color||void 0},children:t.category.name}),t.tags&&t.tags.length>0&&(0,r.jsxs)(r.Fragment,{children:[t.tags.slice(0,3).map(e=>(0,r.jsx)("span",{className:"inline-flex items-center px-2 py-1 rounded text-xs font-medium bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300",children:e},e)),t.tags.length>3&&(0,r.jsxs)("span",{className:"text-xs text-gray-500",children:["+",t.tags.length-3]})]})]})]})]})})},t.id)})})]})}},46749:function(e,t,a){"use strict";a.d(t,{a:function(){return s}});let r=(0,a(64392).createClientComponentClient)(),s={async getBooks(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=r.from("books").select("\n        *,\n        category:categories(id, name, color, icon),\n        vocabulary_group_books(\n          vocabulary_group:vocabulary_groups(\n            id,\n            name,\n            difficulty\n          )\n        )\n      ").order("created_at",{ascending:!1});e.search&&(t=t.or("title.ilike.%".concat(e.search,"%,author.ilike.%").concat(e.search,"%,description.ilike.%").concat(e.search,"%"))),e.author&&(t=t.ilike("author","%".concat(e.author,"%"))),e.categoryId&&(t=t.eq("category_id",e.categoryId)),e.contentType&&(t=t.eq("content_type",e.contentType)),e.language&&(t=t.eq("language",e.language)),e.publicationYear&&(t=t.eq("publication_year",e.publicationYear)),void 0!==e.isPublic&&(t=t.eq("is_public",e.isPublic)),e.tags&&e.tags.length>0&&(t=t.contains("tags",e.tags));let{data:a,error:s}=await t;if(s)throw s;return a},async getBook(e){let{data:t,error:a}=await r.from("books").select("\n        *,\n        category:categories(id, name, color, icon),\n        course_books(\n          id,\n          course_id,\n          is_required,\n          notes,\n          position,\n          course:courses(id, title, status)\n        )\n      ").eq("id",e).single();if(a)throw a;return t},async createBook(e){let{data:t}=await r.auth.getUser();if(!t.user)throw Error("User not authenticated");let a={...e,language:e.language||"en",is_public:e.is_public||!1,user_id:t.user.id},{data:s,error:l}=await r.from("books").insert(a).select().single();if(l)throw l;return s},async updateBook(e){let{id:t,...a}=e,{data:s,error:l}=await r.from("books").update({...a,updated_at:new Date().toISOString()}).eq("id",t).select().single();if(l)throw l;return s},async deleteBook(e){let{error:t}=await r.from("books").delete().eq("id",e);if(t)throw t},async getBookStats(){let{data:e}=await r.auth.getUser();if(!e.user)throw Error("User not authenticated");let{data:t,error:a}=await r.from("books").select("content_type",{count:"exact"}).eq("user_id",e.user.id);if(a)throw a;return{total:(null==t?void 0:t.length)||0,text:(null==t?void 0:t.filter(e=>"text"===e.content_type).length)||0,video:(null==t?void 0:t.filter(e=>"video"===e.content_type).length)||0,audio:(null==t?void 0:t.filter(e=>"audio"===e.content_type).length)||0,pdf:(null==t?void 0:t.filter(e=>"pdf"===e.content_type).length)||0,other:(null==t?void 0:t.filter(e=>["image","interactive"].includes(e.content_type)).length)||0}},async getAuthors(){let{data:e}=await r.auth.getUser();if(!e.user)throw Error("User not authenticated");let{data:t,error:a}=await r.from("books").select("author").eq("user_id",e.user.id).not("author","is",null);if(a)throw a;return Array.from(new Set(null==t?void 0:t.map(e=>e.author).filter(Boolean))).sort()},async getLanguages(){let{data:e}=await r.auth.getUser();if(!e.user)throw Error("User not authenticated");let{data:t,error:a}=await r.from("books").select("language").eq("user_id",e.user.id);if(a)throw a;return Array.from(new Set(null==t?void 0:t.map(e=>e.language).filter(Boolean))).sort()},getContentTypes:()=>[{value:"text",label:"Text",icon:"\uD83D\uDCC4"},{value:"pdf",label:"PDF",icon:"\uD83D\uDCD1"},{value:"video",label:"Video",icon:"\uD83C\uDFA5"},{value:"audio",label:"Audio",icon:"\uD83C\uDFA7"},{value:"image",label:"Image",icon:"\uD83D\uDDBC️"},{value:"interactive",label:"Interactive",icon:"\uD83C\uDFAE"}]}},60287:function(e,t,a){"use strict";a.d(t,{G:function(){return s}});let r=(0,a(64392).createClientComponentClient)(),s={async getCategories(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=r.from("categories").select("*").order("name",{ascending:!0});e.type&&(t=t.eq("type",e.type)),void 0!==e.parentId&&(t=t.eq("parent_id",e.parentId)),e.search&&(t=t.ilike("name","%".concat(e.search,"%")));let{data:a,error:s}=await t;if(s)throw s;return a},async getCategory(e){let{data:t,error:a}=await r.from("categories").select("*").eq("id",e).single();if(a)throw a;return t},async createCategory(e){let{data:t}=await r.auth.getUser();if(!t.user)throw Error("User not authenticated");let{data:a,error:s}=await r.from("categories").insert({...e,user_id:t.user.id}).select().single();if(s)throw s;return a},async updateCategory(e){let{id:t,...a}=e,{data:s,error:l}=await r.from("categories").update({...a,updated_at:new Date().toISOString()}).eq("id",t).select().single();if(l)throw l;return s},async deleteCategory(e){let{error:t}=await r.from("categories").delete().eq("id",e);if(t)throw t},getCategoryTypes:()=>[{value:"course",label:"Course"},{value:"book",label:"Book"},{value:"vocabulary",label:"Vocabulary"},{value:"objective",label:"Objective"},{value:"method",label:"Method"},{value:"task",label:"Task"}]}},13027:function(e,t,a){"use strict";a.d(t,{j:function(){return n}});var r=a(44839);let s=e=>"boolean"==typeof e?`${e}`:0===e?"0":e,l=r.W,n=(e,t)=>a=>{var r;if((null==t?void 0:t.variants)==null)return l(e,null==a?void 0:a.class,null==a?void 0:a.className);let{variants:n,defaultVariants:i}=t,o=Object.keys(n).map(e=>{let t=null==a?void 0:a[e],r=null==i?void 0:i[e];if(null===t)return null;let l=s(t)||s(r);return n[e][l]}),c=a&&Object.entries(a).reduce((e,t)=>{let[a,r]=t;return void 0===r||(e[a]=r),e},{});return l(e,o,null==t?void 0:null===(r=t.compoundVariants)||void 0===r?void 0:r.reduce((e,t)=>{let{class:a,className:r,...s}=t;return Object.entries(s).every(e=>{let[t,a]=e;return Array.isArray(a)?a.includes({...i,...c}[t]):({...i,...c})[t]===a})?[...e,a,r]:e},[]),null==a?void 0:a.class,null==a?void 0:a.className)}},44839:function(e,t,a){"use strict";function r(){for(var e,t,a=0,r="",s=arguments.length;a<s;a++)(e=arguments[a])&&(t=function e(t){var a,r,s="";if("string"==typeof t||"number"==typeof t)s+=t;else if("object"==typeof t){if(Array.isArray(t)){var l=t.length;for(a=0;a<l;a++)t[a]&&(r=e(t[a]))&&(s&&(s+=" "),s+=r)}else for(r in t)t[r]&&(s&&(s+=" "),s+=r)}return s}(e))&&(r&&(r+=" "),r+=t);return r}a.d(t,{W:function(){return r}})}},function(e){e.O(0,[4392,8409,2318,2971,7023,1744],function(){return e(e.s=82962)}),_N_E=e.O()}]);