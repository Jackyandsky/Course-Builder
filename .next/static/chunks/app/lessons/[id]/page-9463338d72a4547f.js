(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5211],{65249:function(e,s,t){Promise.resolve().then(t.bind(t,30038))},30038:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return y}});var a=t(57437),l=t(2265),c=t(16463),n=t(6760),d=t(64608),r=t(649),i=t(30427),x=t(88690),o=t(86201),h=t(36520),m=t(95137),u=t(24241),j=t(40933),g=t(49321),f=t(11240),N=t(6649),p=t(10883);function y(){var e;let s=(0,c.useRouter)(),t=(0,c.useParams)().id,[y,v]=(0,l.useState)(null),[w,k]=(0,l.useState)(!0),[_,Z]=(0,l.useState)(!1);(0,l.useEffect)(()=>{t&&b()},[t]);let b=async()=>{try{k(!0);let e=await o.p.getLesson(t);if(e.schedule_id){let s=await h.y.getSchedule(e.schedule_id);v({...e,schedule:s})}else v(e)}catch(e){console.error("Failed to load lesson:",e),s.push("/schedules")}finally{k(!1)}},C=async()=>{if(confirm("Are you sure you want to delete this lesson?"))try{Z(!0),await o.p.deleteLesson(t),s.push((null==y?void 0:y.schedule_id)?"/schedules/".concat(y.schedule_id):"/schedules")}catch(e){console.error("Failed to delete lesson:",e)}finally{Z(!1)}},L=e=>{try{return new Date("2000-01-01T".concat(e)).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}catch(s){return e}};return w?(0,a.jsx)("div",{className:"flex justify-center items-center min-h-screen",children:(0,a.jsx)(i.$,{size:"lg"})}):y?(0,a.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,a.jsxs)("div",{className:"mb-8",children:[(0,a.jsx)(n.z,{variant:"ghost",size:"sm",onClick:()=>s.push(y.schedule_id?"/schedules/".concat(y.schedule_id):"/schedules"),leftIcon:(0,a.jsx)(m.Z,{className:"h-4 w-4"}),className:"mb-4",children:"Back to Schedule"}),(0,a.jsxs)("div",{className:"flex flex-col lg:flex-row lg:items-start lg:justify-between gap-6",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,a.jsxs)("h1",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100",children:["Lesson ",y.lesson_number,": ",y.topic]}),(0,a.jsx)(r.C,{variant:"completed"===y.status?"success":"cancelled"===y.status?"danger":"default",children:y.status})]}),(null===(e=y.schedule)||void 0===e?void 0:e.course)&&(0,a.jsx)("p",{className:"text-lg text-gray-600 dark:text-gray-400 mb-2",children:y.schedule.course.title}),y.description&&(0,a.jsx)("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:y.description}),(0,a.jsxs)("div",{className:"flex flex-wrap items-center gap-4 text-sm text-gray-500",children:[(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)(u.Z,{className:"h-4 w-4"}),(0,a.jsx)("span",{children:(e=>{try{return new Date(e).toLocaleDateString([],{weekday:"long",year:"numeric",month:"long",day:"numeric"})}catch(s){return e}})(y.date)})]}),(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)(j.Z,{className:"h-4 w-4"}),(0,a.jsxs)("span",{children:[L(y.start_time)," - ",L(y.end_time)]})]}),y.location&&(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)(g.Z,{className:"h-4 w-4"}),(0,a.jsx)("span",{children:y.location})]}),y.max_students&&(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)(f.Z,{className:"h-4 w-4"}),(0,a.jsxs)("span",{children:["Max ",y.max_students," students"]})]})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(n.z,{variant:"outline",onClick:()=>s.push("/lessons/".concat(t,"/edit")),leftIcon:(0,a.jsx)(N.Z,{className:"h-4 w-4"}),children:"Edit"}),(0,a.jsx)(n.z,{variant:"outline",onClick:C,loading:_,leftIcon:(0,a.jsx)(p.Z,{className:"h-4 w-4"}),className:"text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20",children:"Delete"})]})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,a.jsx)("div",{className:"lg:col-span-2 space-y-6",children:(0,a.jsx)(d.Z,{children:(0,a.jsx)(d.Z.Content,{children:(0,a.jsx)(x.js,{lessonId:t,onUpdate:b})})})}),(0,a.jsxs)("div",{className:"space-y-6",children:[y.homework&&(0,a.jsxs)(d.Z,{children:[(0,a.jsx)(d.Z.Header,{children:(0,a.jsx)("h3",{className:"text-sm font-semibold",children:"Homework"})}),(0,a.jsx)(d.Z.Content,{children:(0,a.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:y.homework})})]}),y.notes&&(0,a.jsxs)(d.Z,{children:[(0,a.jsx)(d.Z.Header,{children:(0,a.jsx)("h3",{className:"text-sm font-semibold",children:"Notes"})}),(0,a.jsx)(d.Z.Content,{children:(0,a.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:y.notes})})]}),(0,a.jsxs)(d.Z,{children:[(0,a.jsx)(d.Z.Header,{children:(0,a.jsx)("h3",{className:"text-sm font-semibold",children:"Lesson Information"})}),(0,a.jsx)(d.Z.Content,{children:(0,a.jsxs)("dl",{className:"space-y-3 text-sm",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("dt",{className:"text-gray-500 dark:text-gray-400",children:"Created"}),(0,a.jsx)("dd",{className:"font-medium",children:new Date(y.created_at).toLocaleDateString()})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("dt",{className:"text-gray-500 dark:text-gray-400",children:"Last Updated"}),(0,a.jsx)("dd",{className:"font-medium",children:new Date(y.updated_at).toLocaleDateString()})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("dt",{className:"text-gray-500 dark:text-gray-400",children:"Lesson ID"}),(0,a.jsx)("dd",{className:"font-mono text-xs",children:y.id})]})]})})]})]})]})]}):null}}},function(e){e.O(0,[4392,302,8409,8690,2971,7023,1744],function(){return e(e.s=65249)}),_N_E=e.O()}]);