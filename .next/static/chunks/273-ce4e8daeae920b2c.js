(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[273],{70273:function(e,a,l){Promise.resolve().then(l.bind(l,35712)),Promise.resolve().then(l.bind(l,5602))},95137:function(e,a,l){"use strict";l.d(a,{Z:function(){return t}});let t=(0,l(78030).Z)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},59061:function(e,a,l){"use strict";l.d(a,{Z:function(){return t}});let t=(0,l(78030).Z)("save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]])},35712:function(e,a,l){"use strict";l.d(a,{VocabularyForm:function(){return h}});var t=l(57437),s=l(2265),r=l(16463),n=l(95137),i=l(38733),o=l(92513),c=l(74697),d=l(59061),u=l(31868),g=l(2318);function h(e){let{initialData:a}=e,l=(0,r.useRouter)(),h=!!a,[x,m]=(0,s.useState)(!1),[p,b]=(0,s.useState)({word:(null==a?void 0:a.word)||"",translation:(null==a?void 0:a.translation)||"",pronunciation:(null==a?void 0:a.pronunciation)||"",part_of_speech:(null==a?void 0:a.part_of_speech)||"",definition:(null==a?void 0:a.definition)||"",example_sentence:(null==a?void 0:a.example_sentence)||"",example_translation:(null==a?void 0:a.example_translation)||"",notes:(null==a?void 0:a.notes)||"",difficulty:(null==a?void 0:a.difficulty)||"beginner",audio_url:(null==a?void 0:a.audio_url)||"",image_url:(null==a?void 0:a.image_url)||"",tags:(null==a?void 0:a.tags)||[]}),[v,y]=(0,s.useState)({}),[f,j]=(0,s.useState)(""),C=()=>{let e={};return p.word.trim()||(e.word="Word is required"),y(e),0===Object.keys(e).length},N=async e=>{if(e.preventDefault(),C()){m(!0);try{h?await u.A.updateVocabulary({id:a.id,...p}):await u.A.createVocabulary(p),l.push("/vocabulary"),l.refresh()}catch(e){console.error("Failed to save vocabulary:",e),y({submit:e.message||"Failed to save vocabulary. Please try again."})}finally{m(!1)}}},w=()=>{f.trim()&&!p.tags.includes(f.trim())&&(b({...p,tags:[...p.tags,f.trim()]}),j(""))},k=e=>{b({...p,tags:p.tags.filter(a=>a!==e)})},_=u.A.getDifficultyLevels(),I=u.A.getPartsOfSpeechOptions();return(0,t.jsxs)("form",{onSubmit:N,className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,t.jsxs)("div",{className:"mb-8",children:[(0,t.jsx)(g.zx,{type:"button",variant:"ghost",size:"sm",onClick:()=>l.back(),leftIcon:(0,t.jsx)(n.Z,{className:"h-4 w-4"}),className:"mb-4",children:"Back"}),(0,t.jsx)("h1",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:h?"Edit Vocabulary":"Add New Vocabulary"})]}),v.submit&&(0,t.jsx)("div",{className:"mb-6 p-4 bg-red-50 dark:bg-red-900/20 text-red-600 dark:text-red-400 rounded-lg",children:v.submit}),(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)(g.Zb,{children:[(0,t.jsx)(g.Zb.Header,{children:(0,t.jsx)("h2",{className:"text-lg font-semibold",children:"Basic Information"})}),(0,t.jsxs)(g.Zb.Content,{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsx)(g.II,{label:"Word",value:p.word,onChange:e=>b({...p,word:e.target.value}),error:v.word,placeholder:"Enter the word",required:!0}),(0,t.jsx)(g.II,{label:"Translation",value:p.translation,onChange:e=>b({...p,translation:e.target.value}),placeholder:"Enter translation"})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsx)(g.II,{label:"Pronunciation",value:p.pronunciation,onChange:e=>b({...p,pronunciation:e.target.value}),placeholder:"e.g., /həˈloʊ/"}),(0,t.jsx)(g.Ph,{label:"Part of Speech",value:p.part_of_speech,onChange:e=>b({...p,part_of_speech:e.target.value}),options:[{value:"",label:"Select part of speech"},...I]})]}),(0,t.jsx)(g.gx,{label:"Definition",value:p.definition,onChange:e=>b({...p,definition:e.target.value}),placeholder:"Enter the definition of the word",rows:3})]})]}),(0,t.jsxs)(g.Zb,{children:[(0,t.jsx)(g.Zb.Header,{children:(0,t.jsx)("h2",{className:"text-lg font-semibold",children:"Examples & Usage"})}),(0,t.jsxs)(g.Zb.Content,{className:"space-y-4",children:[(0,t.jsx)(g.gx,{label:"Example Sentence",value:p.example_sentence,onChange:e=>b({...p,example_sentence:e.target.value}),placeholder:"Enter an example sentence using this word",rows:2}),(0,t.jsx)(g.gx,{label:"Example Translation",value:p.example_translation,onChange:e=>b({...p,example_translation:e.target.value}),placeholder:"Enter the translation of the example sentence",rows:2}),(0,t.jsx)(g.gx,{label:"Notes",value:p.notes,onChange:e=>b({...p,notes:e.target.value}),placeholder:"Additional notes, usage tips, or context",rows:3})]})]}),(0,t.jsxs)(g.Zb,{children:[(0,t.jsx)(g.Zb.Header,{children:(0,t.jsx)("h2",{className:"text-lg font-semibold",children:"Media & Classification"})}),(0,t.jsxs)(g.Zb.Content,{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(g.II,{label:"Audio URL",type:"url",value:p.audio_url,onChange:e=>b({...p,audio_url:e.target.value}),placeholder:"https://example.com/audio.mp3"}),p.audio_url&&(0,t.jsx)("div",{className:"mt-2 flex items-center gap-2",children:(0,t.jsx)(g.zx,{type:"button",variant:"outline",size:"sm",leftIcon:(0,t.jsx)(i.Z,{className:"h-4 w-4"}),onClick:()=>{new Audio(p.audio_url).play().catch(console.error)},children:"Test Audio"})})]}),(0,t.jsx)(g.II,{label:"Image URL",type:"url",value:p.image_url,onChange:e=>b({...p,image_url:e.target.value}),placeholder:"https://example.com/image.jpg"})]}),(0,t.jsx)(g.Ph,{label:"Difficulty Level",value:p.difficulty,onChange:e=>b({...p,difficulty:e.target.value}),options:_.map(e=>({value:e.value,label:e.label}))}),p.image_url&&(0,t.jsxs)("div",{className:"mt-4",children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Image Preview"}),(0,t.jsx)("div",{className:"w-32 h-32 border rounded-lg overflow-hidden bg-gray-100 dark:bg-gray-800",children:(0,t.jsx)("img",{src:p.image_url,alt:p.word,className:"w-full h-full object-cover",onError:e=>{e.target.style.display="none"}})})]})]})]}),(0,t.jsxs)(g.Zb,{children:[(0,t.jsx)(g.Zb.Header,{children:(0,t.jsx)("h2",{className:"text-lg font-semibold",children:"Tags"})}),(0,t.jsxs)(g.Zb.Content,{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)(g.II,{value:f,onChange:e=>j(e.target.value),placeholder:"Add a tag",onKeyPress:e=>{"Enter"===e.key&&(e.preventDefault(),w())}}),(0,t.jsx)(g.zx,{type:"button",onClick:w,leftIcon:(0,t.jsx)(o.Z,{className:"h-4 w-4"}),children:"Add"})]}),p.tags.length>0&&(0,t.jsx)("div",{className:"flex flex-wrap gap-2",children:p.tags.map(e=>(0,t.jsxs)(g.Ct,{variant:"secondary",className:"px-3 py-1",children:[e,(0,t.jsx)("button",{type:"button",onClick:()=>k(e),className:"ml-2 hover:text-red-500",children:(0,t.jsx)(c.Z,{className:"h-3 w-3"})})]},e))})]})]}),(0,t.jsxs)("div",{className:"flex justify-end gap-3",children:[(0,t.jsx)(g.zx,{type:"button",variant:"outline",onClick:()=>l.push("/vocabulary"),children:"Cancel"}),(0,t.jsx)(g.zx,{type:"submit",loading:x,leftIcon:(0,t.jsx)(d.Z,{className:"h-4 w-4"}),children:h?"Update Vocabulary":"Create Vocabulary"})]})]})]})}},5602:function(e,a,l){"use strict";l.d(a,{VocabularyGroupForm:function(){return h}});var t=l(57437),s=l(2265),r=l(16463),n=l(95137),i=l(92513),o=l(74697),c=l(59061),d=l(31868),u=l(60287),g=l(2318);function h(e){let{initialData:a}=e,l=(0,r.useRouter)(),h=!!a,[x,m]=(0,s.useState)(!1),[p,b]=(0,s.useState)([]),[v,y]=(0,s.useState)(!1),[f,j]=(0,s.useState)(""),[C,N]=(0,s.useState)("#6b7280"),[w,k]=(0,s.useState)({name:(null==a?void 0:a.name)||"",description:(null==a?void 0:a.description)||"",category_id:(null==a?void 0:a.category_id)||"",language:(null==a?void 0:a.language)||"en",target_language:(null==a?void 0:a.target_language)||"",difficulty:(null==a?void 0:a.difficulty)||"beginner",tags:(null==a?void 0:a.tags)||[],is_public:(null==a?void 0:a.is_public)||!1}),[_,I]=(0,s.useState)({}),[Z,S]=(0,s.useState)("");(0,s.useEffect)(()=>{z()},[]);let z=async()=>{try{let e=await u.G.getCategories({type:"vocabulary"});b(e)}catch(e){console.error("Failed to load categories:",e)}},E=()=>{let e={};return w.name.trim()||(e.name="Group name is required"),I(e),0===Object.keys(e).length},A=async e=>{if(e.preventDefault(),E()){m(!0);try{h?await d.A.updateVocabularyGroup({id:a.id,...w}):await d.A.createVocabularyGroup(w),l.push("/vocabulary/groups"),l.refresh()}catch(e){console.error("Failed to save vocabulary group:",e),I({submit:e.message||"Failed to save vocabulary group. Please try again."})}finally{m(!1)}}},P=()=>{Z.trim()&&!w.tags.includes(Z.trim())&&(k({...w,tags:[...w.tags,Z.trim()]}),S(""))},V=e=>{k({...w,tags:w.tags.filter(a=>a!==e)})},G=async()=>{if(f.trim())try{let e=await u.G.createCategory({name:f,type:"vocabulary",color:C});y(!1),j(""),await z(),k({...w,category_id:e.id})}catch(e){console.error("Failed to create vocabulary category:",e)}},D=d.A.getDifficultyLevels(),H=[{value:"en",label:"English"},{value:"es",label:"Spanish"},{value:"fr",label:"French"},{value:"de",label:"German"},{value:"it",label:"Italian"},{value:"pt",label:"Portuguese"},{value:"ru",label:"Russian"},{value:"ja",label:"Japanese"},{value:"ko",label:"Korean"},{value:"zh",label:"Chinese"},{value:"ar",label:"Arabic"},{value:"hi",label:"Hindi"}];return(0,t.jsxs)("form",{onSubmit:A,className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,t.jsxs)("div",{className:"mb-8",children:[(0,t.jsx)(g.zx,{type:"button",variant:"ghost",size:"sm",onClick:()=>l.back(),leftIcon:(0,t.jsx)(n.Z,{className:"h-4 w-4"}),className:"mb-4",children:"Back"}),(0,t.jsx)("h1",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:h?"Edit Vocabulary Group":"Create New Vocabulary Group"})]}),_.submit&&(0,t.jsx)("div",{className:"mb-6 p-4 bg-red-50 dark:bg-red-900/20 text-red-600 dark:text-red-400 rounded-lg",children:_.submit}),(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)(g.Zb,{children:[(0,t.jsx)(g.Zb.Header,{children:(0,t.jsx)("h2",{className:"text-lg font-semibold",children:"Basic Information"})}),(0,t.jsxs)(g.Zb.Content,{className:"space-y-4",children:[(0,t.jsx)(g.II,{label:"Group Name",value:w.name,onChange:e=>k({...w,name:e.target.value}),error:_.name,placeholder:"Enter group name",required:!0}),(0,t.jsx)(g.gx,{label:"Description",value:w.description,onChange:e=>k({...w,description:e.target.value}),placeholder:"Describe this vocabulary group",rows:3}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Category"}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(g.Ph,{className:"flex-grow",value:w.category_id,onChange:e=>k({...w,category_id:e.target.value}),options:[{value:"",label:"Select category"},...p.map(e=>({value:e.id,label:e.name}))]}),(0,t.jsx)(g.zx,{type:"button",variant:"outline",size:"md",onClick:()=>y(!0),className:"flex-shrink-0 !h-10",children:(0,t.jsx)(i.Z,{className:"h-4 w-4"})})]})]}),(0,t.jsx)(g.Ph,{label:"Difficulty Level",value:w.difficulty,onChange:e=>k({...w,difficulty:e.target.value}),options:D.map(e=>({value:e.value,label:e.label}))})]})]})]}),(0,t.jsxs)(g.Zb,{children:[(0,t.jsx)(g.Zb.Header,{children:(0,t.jsx)("h2",{className:"text-lg font-semibold",children:"Language Settings"})}),(0,t.jsxs)(g.Zb.Content,{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsx)(g.Ph,{label:"Source Language",value:w.language,onChange:e=>k({...w,language:e.target.value}),options:H}),(0,t.jsx)(g.Ph,{label:"Target Language",value:w.target_language,onChange:e=>k({...w,target_language:e.target.value}),options:[{value:"",label:"Select target language"},...H]})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-2 pt-2",children:[(0,t.jsx)("input",{type:"checkbox",id:"is_public",checked:w.is_public,onChange:e=>k({...w,is_public:e.target.checked}),className:"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded"}),(0,t.jsx)("label",{htmlFor:"is_public",className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Make this group publicly accessible"})]})]})]}),(0,t.jsxs)(g.Zb,{children:[(0,t.jsx)(g.Zb.Header,{children:(0,t.jsx)("h2",{className:"text-lg font-semibold",children:"Tags"})}),(0,t.jsxs)(g.Zb.Content,{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)(g.II,{value:Z,onChange:e=>S(e.target.value),placeholder:"Add a tag",onKeyPress:e=>{"Enter"===e.key&&(e.preventDefault(),P())}}),(0,t.jsx)(g.zx,{type:"button",onClick:P,leftIcon:(0,t.jsx)(i.Z,{className:"h-4 w-4"}),children:"Add"})]}),w.tags.length>0&&(0,t.jsx)("div",{className:"flex flex-wrap gap-2",children:w.tags.map(e=>(0,t.jsxs)(g.Ct,{variant:"secondary",className:"px-3 py-1",children:[e,(0,t.jsx)("button",{type:"button",onClick:()=>V(e),className:"ml-2 hover:text-red-500",children:(0,t.jsx)(o.Z,{className:"h-3 w-3"})})]},e))})]})]}),(0,t.jsxs)("div",{className:"flex justify-end gap-3",children:[(0,t.jsx)(g.zx,{type:"button",variant:"outline",onClick:()=>l.push("/vocabulary/groups"),children:"Cancel"}),(0,t.jsx)(g.zx,{type:"submit",loading:x,leftIcon:(0,t.jsx)(c.Z,{className:"h-4 w-4"}),children:h?"Update Group":"Create Group"})]})]}),(0,t.jsxs)(g.u_,{isOpen:v,onClose:()=>y(!1),title:"Create New Vocabulary Category",size:"sm",children:[(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)(g.II,{label:"Category Name",value:f,onChange:e=>j(e.target.value),placeholder:"e.g., Business, Academic, etc.",required:!0}),(0,t.jsx)(g.II,{label:"Category Color",type:"color",value:C,onChange:e=>N(e.target.value),className:"h-10"})]}),(0,t.jsxs)("div",{className:"mt-6 flex justify-end gap-3",children:[(0,t.jsx)(g.zx,{variant:"ghost",onClick:()=>y(!1),children:"Cancel"}),(0,t.jsx)(g.zx,{onClick:G,children:"Create Category"})]})]})]})}},60287:function(e,a,l){"use strict";l.d(a,{G:function(){return s}});let t=(0,l(64392).createClientComponentClient)(),s={async getCategories(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.from("categories").select("*").order("name",{ascending:!0});e.type&&(a=a.eq("type",e.type)),void 0!==e.parentId&&(a=a.eq("parent_id",e.parentId)),e.search&&(a=a.ilike("name","%".concat(e.search,"%")));let{data:l,error:s}=await a;if(s)throw s;return l},async getCategory(e){let{data:a,error:l}=await t.from("categories").select("*").eq("id",e).single();if(l)throw l;return a},async createCategory(e){let{data:a}=await t.auth.getUser();if(!a.user)throw Error("User not authenticated");let{data:l,error:s}=await t.from("categories").insert({...e,user_id:a.user.id}).select().single();if(s)throw s;return l},async updateCategory(e){let{id:a,...l}=e,{data:s,error:r}=await t.from("categories").update({...l,updated_at:new Date().toISOString()}).eq("id",a).select().single();if(r)throw r;return s},async deleteCategory(e){let{error:a}=await t.from("categories").delete().eq("id",e);if(a)throw a},getCategoryTypes:()=>[{value:"course",label:"Course"},{value:"book",label:"Book"},{value:"vocabulary",label:"Vocabulary"},{value:"objective",label:"Objective"},{value:"method",label:"Method"},{value:"task",label:"Task"}]}}}]);