"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5316],{78030:function(e,a,t){t.d(a,{Z:function(){return u}});var l=t(2265);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),s=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,a,t)=>t?t.toUpperCase():a.toLowerCase()),i=e=>{let a=s(e);return a.charAt(0).toUpperCase()+a.slice(1)},n=function(){for(var e=arguments.length,a=Array(e),t=0;t<e;t++)a[t]=arguments[t];return a.filter((e,a,t)=>!!e&&""!==e.trim()&&t.indexOf(e)===a).join(" ").trim()},o=e=>{for(let a in e)if(a.startsWith("aria-")||"role"===a||"title"===a)return!0};/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var c={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let d=(0,l.forwardRef)((e,a)=>{let{color:t="currentColor",size:r=24,strokeWidth:s=2,absoluteStrokeWidth:i,className:d="",children:u,iconNode:h,...g}=e;return(0,l.createElement)("svg",{ref:a,...c,width:r,height:r,stroke:t,strokeWidth:i?24*Number(s)/Number(r):s,className:n("lucide",d),...!u&&!o(g)&&{"aria-hidden":"true"},...g},[...h.map(e=>{let[a,t]=e;return(0,l.createElement)(a,t)}),...Array.isArray(u)?u:[u]])}),u=(e,a)=>{let t=(0,l.forwardRef)((t,s)=>{let{className:o,...c}=t;return(0,l.createElement)(d,{ref:s,iconNode:a,className:n("lucide-".concat(r(i(e))),"lucide-".concat(e),o),...c})});return t.displayName=i(e),t}},95137:function(e,a,t){t.d(a,{Z:function(){return l}});let l=(0,t(78030).Z)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},58948:function(e,a,t){t.d(a,{Z:function(){return l}});let l=(0,t(78030).Z)("book",[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}]])},42421:function(e,a,t){t.d(a,{Z:function(){return l}});let l=(0,t(78030).Z)("chevron-down",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]])},70518:function(e,a,t){t.d(a,{Z:function(){return l}});let l=(0,t(78030).Z)("chevron-left",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]])},87592:function(e,a,t){t.d(a,{Z:function(){return l}});let l=(0,t(78030).Z)("chevron-right",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]])},14392:function(e,a,t){t.d(a,{Z:function(){return l}});let l=(0,t(78030).Z)("chevron-up",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]])},63550:function(e,a,t){t.d(a,{Z:function(){return l}});let l=(0,t(78030).Z)("ellipsis",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]])},22023:function(e,a,t){t.d(a,{Z:function(){return l}});let l=(0,t(78030).Z)("file-text",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]])},65607:function(e,a,t){t.d(a,{Z:function(){return l}});let l=(0,t(78030).Z)("funnel",[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]])},92513:function(e,a,t){t.d(a,{Z:function(){return l}});let l=(0,t(78030).Z)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},59061:function(e,a,t){t.d(a,{Z:function(){return l}});let l=(0,t(78030).Z)("save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]])},54817:function(e,a,t){t.d(a,{Z:function(){return l}});let l=(0,t(78030).Z)("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]])},38733:function(e,a,t){t.d(a,{Z:function(){return l}});let l=(0,t(78030).Z)("volume-2",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]])},74697:function(e,a,t){t.d(a,{Z:function(){return l}});let l=(0,t(78030).Z)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},16463:function(e,a,t){var l=t(71169);t.o(l,"useParams")&&t.d(a,{useParams:function(){return l.useParams}}),t.o(l,"usePathname")&&t.d(a,{usePathname:function(){return l.usePathname}}),t.o(l,"useRouter")&&t.d(a,{useRouter:function(){return l.useRouter}})},35712:function(e,a,t){t.d(a,{VocabularyForm:function(){return p}});var l=t(57437),r=t(2265),s=t(16463),i=t(95137),n=t(38733),o=t(92513),c=t(74697),d=t(59061),u=t(31868),h=t(2318),g=t(64392),m=t(39630);function p(e){let{initialData:a,onSave:t,isLoading:p,onCancel:x}=e,f=(0,s.useRouter)(),{user:y}=(0,m.a)(),v=(0,g.createClientComponentClient)(),b=!!a,[j,w]=(0,r.useState)(!1),[_,N]=(0,r.useState)({word:(null==a?void 0:a.word)||"",translation:(null==a?void 0:a.translation)||"",pronunciation:(null==a?void 0:a.pronunciation)||"",part_of_speech:(null==a?void 0:a.part_of_speech)||"",definition:(null==a?void 0:a.definition)||"",example_sentence:(null==a?void 0:a.example_sentence)||"",example_translation:(null==a?void 0:a.example_translation)||"",notes:(null==a?void 0:a.notes)||"",difficulty:(null==a?void 0:a.difficulty)||"beginner",audio_url:(null==a?void 0:a.audio_url)||"",image_url:(null==a?void 0:a.image_url)||"",tags:(null==a?void 0:a.tags)||[]}),[k,C]=(0,r.useState)({}),[Z,S]=(0,r.useState)(""),[I,q]=(0,r.useState)([]),[A,z]=(0,r.useState)([]),[E,P]=(0,r.useState)([]),[V,H]=(0,r.useState)([]);(0,r.useEffect)(()=>{L(),b&&a&&F()},[]);let L=async()=>{try{let{data:e}=await v.from("vocabulary_groups").select("id, name, language, difficulty, is_public, user_id, created_at, updated_at").order("name"),{data:a}=await v.from("books").select("id, title, user_id, created_at, updated_at, content_type, language, is_public").order("title");q(e||[]),z(a||[])}catch(e){console.error("Failed to load available options:",e)}},F=async()=>{if(a)try{let{data:e}=await v.from("vocabulary_group_items").select("vocabulary_group_id").eq("vocabulary_id",a.id),{data:t}=await v.from("vocabulary_books").select("book_id").eq("vocabulary_id",a.id);P((null==e?void 0:e.map(e=>e.vocabulary_group_id))||[]),H((null==t?void 0:t.map(e=>e.book_id))||[])}catch(e){console.error("Failed to load existing relationships:",e)}},G=()=>{let e={};return _.word.trim()||(e.word="Word is required"),C(e),0===Object.keys(e).length},M=async e=>{if(e.preventDefault(),G()&&y){if(t)await t({..._,user_id:y.id});else{w(!0);try{let e;b?(await u.A.updateVocabulary({id:a.id,..._}),e=a.id):e=(await u.A.createVocabulary(_)).id,await U(e),f.push("/vocabulary"),f.refresh()}catch(e){console.error("Failed to save vocabulary:",e),C({submit:e.message||"Failed to save vocabulary. Please try again."})}finally{w(!1)}}}},U=async e=>{try{if(b&&await v.from("vocabulary_group_items").delete().eq("vocabulary_id",e),E.length>0){let a=E.map((a,t)=>({vocabulary_group_id:a,vocabulary_id:e,position:t}));await v.from("vocabulary_group_items").insert(a)}if(b&&await v.from("vocabulary_books").delete().eq("vocabulary_id",e),V.length>0){let a=V.map(a=>({vocabulary_id:e,book_id:a}));await v.from("vocabulary_books").insert(a)}}catch(e){console.error("Failed to save relationships:",e)}},O=()=>{Z.trim()&&!_.tags.includes(Z.trim())&&(N({..._,tags:[..._.tags,Z.trim()]}),S(""))},D=e=>{N({..._,tags:_.tags.filter(a=>a!==e)})},B=u.A.getDifficultyLevels(),R=u.A.getPartsOfSpeechOptions();return(0,l.jsxs)("form",{onSubmit:M,className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,l.jsxs)("div",{className:"mb-8",children:[(0,l.jsx)(h.zx,{type:"button",variant:"ghost",size:"sm",onClick:()=>f.back(),leftIcon:(0,l.jsx)(i.Z,{className:"h-4 w-4"}),className:"mb-4",children:"Back"}),(0,l.jsx)("h1",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:b?"Edit Vocabulary":"Add New Vocabulary"})]}),k.submit&&(0,l.jsx)("div",{className:"mb-6 p-4 bg-red-50 dark:bg-red-900/20 text-red-600 dark:text-red-400 rounded-lg",children:k.submit}),(0,l.jsxs)("div",{className:"space-y-6",children:[(0,l.jsxs)(h.Zb,{children:[(0,l.jsx)(h.Zb.Header,{children:(0,l.jsx)("h2",{className:"text-lg font-semibold",children:"Basic Information"})}),(0,l.jsxs)(h.Zb.Content,{className:"space-y-4",children:[(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,l.jsx)(h.II,{label:"Word",value:_.word,onChange:e=>N({..._,word:e.target.value}),error:k.word,placeholder:"Enter the word",required:!0}),(0,l.jsx)(h.II,{label:"Translation",value:_.translation,onChange:e=>N({..._,translation:e.target.value}),placeholder:"Enter translation"})]}),(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,l.jsx)(h.II,{label:"Pronunciation",value:_.pronunciation,onChange:e=>N({..._,pronunciation:e.target.value}),placeholder:"e.g., /həˈloʊ/"}),(0,l.jsx)(h.Ph,{label:"Part of Speech",value:_.part_of_speech,onChange:e=>N({..._,part_of_speech:e.target.value}),options:[{value:"",label:"Select part of speech"},...R]})]}),(0,l.jsx)(h.gx,{label:"Definition",value:_.definition,onChange:e=>N({..._,definition:e.target.value}),placeholder:"Enter the definition of the word",rows:3})]})]}),(0,l.jsxs)(h.Zb,{children:[(0,l.jsx)(h.Zb.Header,{children:(0,l.jsx)("h2",{className:"text-lg font-semibold",children:"Examples & Usage"})}),(0,l.jsxs)(h.Zb.Content,{className:"space-y-4",children:[(0,l.jsx)(h.gx,{label:"Example Sentence",value:_.example_sentence,onChange:e=>N({..._,example_sentence:e.target.value}),placeholder:"Enter an example sentence using this word",rows:2}),(0,l.jsx)(h.gx,{label:"Example Translation",value:_.example_translation,onChange:e=>N({..._,example_translation:e.target.value}),placeholder:"Enter the translation of the example sentence",rows:2}),(0,l.jsx)(h.gx,{label:"Notes",value:_.notes,onChange:e=>N({..._,notes:e.target.value}),placeholder:"Additional notes, usage tips, or context",rows:3})]})]}),(0,l.jsxs)(h.Zb,{children:[(0,l.jsx)(h.Zb.Header,{children:(0,l.jsx)("h2",{className:"text-lg font-semibold",children:"Media & Classification"})}),(0,l.jsxs)(h.Zb.Content,{className:"space-y-4",children:[(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)(h.II,{label:"Audio URL",type:"url",value:_.audio_url,onChange:e=>N({..._,audio_url:e.target.value}),placeholder:"https://example.com/audio.mp3"}),_.audio_url&&(0,l.jsx)("div",{className:"mt-2 flex items-center gap-2",children:(0,l.jsx)(h.zx,{type:"button",variant:"outline",size:"sm",leftIcon:(0,l.jsx)(n.Z,{className:"h-4 w-4"}),onClick:()=>{new Audio(_.audio_url).play().catch(console.error)},children:"Test Audio"})})]}),(0,l.jsx)(h.II,{label:"Image URL",type:"url",value:_.image_url,onChange:e=>N({..._,image_url:e.target.value}),placeholder:"https://example.com/image.jpg"})]}),(0,l.jsx)(h.Ph,{label:"Difficulty Level",value:_.difficulty,onChange:e=>N({..._,difficulty:e.target.value}),options:B.map(e=>({value:e.value,label:e.label}))}),_.image_url&&(0,l.jsxs)("div",{className:"mt-4",children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Image Preview"}),(0,l.jsx)("div",{className:"w-32 h-32 border rounded-lg overflow-hidden bg-gray-100 dark:bg-gray-800",children:(0,l.jsx)("img",{src:_.image_url,alt:_.word,className:"w-full h-full object-cover",onError:e=>{e.target.style.display="none"}})})]})]})]}),(0,l.jsxs)(h.Zb,{children:[(0,l.jsx)(h.Zb.Header,{children:(0,l.jsx)("h2",{className:"text-lg font-semibold",children:"Relationships"})}),(0,l.jsxs)(h.Zb.Content,{className:"space-y-6",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Vocabulary Groups"}),(0,l.jsx)("div",{className:"space-y-2",children:I.map(e=>(0,l.jsxs)("label",{className:"flex items-center space-x-2",children:[(0,l.jsx)("input",{type:"checkbox",checked:E.includes(e.id),onChange:a=>{a.target.checked?P([...E,e.id]):P(E.filter(a=>a!==e.id))},className:"rounded"}),(0,l.jsx)("span",{className:"text-sm",children:e.name})]},e.id))}),E.length>0&&(0,l.jsx)("div",{className:"mt-2",children:(0,l.jsxs)("p",{className:"text-sm text-gray-600",children:["Selected ",E.length," group",1!==E.length?"s":""]})})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Related Books"}),(0,l.jsx)("div",{className:"space-y-2 max-h-40 overflow-y-auto",children:A.map(e=>(0,l.jsxs)("label",{className:"flex items-center space-x-2",children:[(0,l.jsx)("input",{type:"checkbox",checked:V.includes(e.id),onChange:a=>{a.target.checked?H([...V,e.id]):H(V.filter(a=>a!==e.id))},className:"rounded"}),(0,l.jsx)("span",{className:"text-sm",children:e.title})]},e.id))}),V.length>0&&(0,l.jsx)("div",{className:"mt-2",children:(0,l.jsxs)("p",{className:"text-sm text-gray-600",children:["Selected ",V.length," book",1!==V.length?"s":""]})})]})]})]}),(0,l.jsxs)(h.Zb,{children:[(0,l.jsx)(h.Zb.Header,{children:(0,l.jsx)("h2",{className:"text-lg font-semibold",children:"Tags"})}),(0,l.jsxs)(h.Zb.Content,{className:"space-y-4",children:[(0,l.jsxs)("div",{className:"flex gap-2",children:[(0,l.jsx)(h.II,{value:Z,onChange:e=>S(e.target.value),placeholder:"Add a tag",onKeyPress:e=>{"Enter"===e.key&&(e.preventDefault(),O())}}),(0,l.jsx)(h.zx,{type:"button",onClick:O,leftIcon:(0,l.jsx)(o.Z,{className:"h-4 w-4"}),children:"Add"})]}),_.tags.length>0&&(0,l.jsx)("div",{className:"flex flex-wrap gap-2",children:_.tags.map(e=>(0,l.jsxs)(h.Ct,{variant:"secondary",className:"px-3 py-1",children:[e,(0,l.jsx)("button",{type:"button",onClick:()=>D(e),className:"ml-2 hover:text-red-500",children:(0,l.jsx)(c.Z,{className:"h-3 w-3"})})]},e))})]})]}),(0,l.jsxs)("div",{className:"flex justify-end gap-3",children:[(0,l.jsx)(h.zx,{type:"button",variant:"outline",onClick:x||(()=>f.push("/vocabulary")),children:"Cancel"}),(0,l.jsx)(h.zx,{type:"submit",loading:void 0!==p?p:j,leftIcon:(0,l.jsx)(d.Z,{className:"h-4 w-4"}),children:b?"Update Vocabulary":"Create Vocabulary"})]})]})]})}},48640:function(e,a,t){t.d(a,{VocabularyGroupForm:function(){return y}});var l=t(57437),r=t(2265),s=t(16463),i=t(95137),n=t(92513),o=t(22023);let c=(0,t(78030).Z)("upload",[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]]);var d=t(74697),u=t(58948),h=t(59061),g=t(31868),m=t(60287),p=t(64392),x=t(39630),f=t(2318);function y(e){let{initialData:a,onSave:t,isLoading:y,onCancel:v}=e,b=(0,s.useRouter)(),{user:j}=(0,x.a)(),w=(0,p.createClientComponentClient)(),_=!!a,[N,k]=(0,r.useState)(!1),[C,Z]=(0,r.useState)([]),[S,I]=(0,r.useState)(!1),[q,A]=(0,r.useState)(""),[z,E]=(0,r.useState)("#6b7280"),[P,V]=(0,r.useState)(""),[H,L]=(0,r.useState)(!1),[F,G]=(0,r.useState)([]),[M,U]=(0,r.useState)(!1),[O,D]=(0,r.useState)([]),[B,R]=(0,r.useState)([]),[W,T]=(0,r.useState)(!1),[J,K]=(0,r.useState)(""),[$,Q]=(0,r.useState)({name:(null==a?void 0:a.name)||"",description:(null==a?void 0:a.description)||"",category_id:(null==a?void 0:a.category_id)||"",language:(null==a?void 0:a.language)||"en",target_language:(null==a?void 0:a.target_language)||"",difficulty:(null==a?void 0:a.difficulty)||"beginner",tags:(null==a?void 0:a.tags)||[],is_public:(null==a?void 0:a.is_public)||!1}),[X,Y]=(0,r.useState)({}),[ee,ea]=(0,r.useState)("");(0,r.useEffect)(()=>{er(),et(),_&&a&&el()},[]);let et=async()=>{try{let{data:e,error:a}=await w.from("books").select("id, title, author, cover_image_url").order("title");if(a)throw a;D(e||[])}catch(e){console.error("Failed to load available books:",e)}},el=async()=>{if(a)try{let{data:e,error:t}=await w.from("vocabulary_group_books").select("book_id").eq("vocabulary_group_id",a.id);if(t)throw t;R((null==e?void 0:e.map(e=>e.book_id))||[])}catch(e){console.error("Failed to load existing book relationships:",e)}},er=async()=>{try{let e=await m.G.getCategories({type:"vocabulary"});Z(e)}catch(e){console.error("Failed to load categories:",e)}},es=()=>{let e={};return $.name.trim()||(e.name="Group name is required"),Y(e),0===Object.keys(e).length},ei=async e=>{if(e.preventDefault(),es()&&j){if(t)await t({...$,user_id:j.id});else{k(!0);try{let e;_?(await g.A.updateVocabularyGroup({id:a.id,...$}),e=a.id):e=(await g.A.createVocabularyGroup($)).id,P.trim()&&F.length>0&&await eo(e),await ec(e),b.push("/vocabulary/groups"),b.refresh()}catch(e){console.error("Failed to save vocabulary group:",e),Y({submit:e.message||"Failed to save vocabulary group. Please try again."})}finally{k(!1)}}}},en=e=>{let a=e.split("\n").filter(e=>e.trim()),t=[];for(let e of a){let a=e.split(",");if(a.length>=3){let e=a[0].trim(),l=a[1].trim(),r=a.slice(2).join(",").trim();e&&r&&t.push({word:e,part_of_speech:l,definition:r,difficulty:$.difficulty,tags:$.tags.length>0?$.tags:void 0})}}return t},eo=async e=>{if(0!==F.length){L(!0);try{let{data:a}=await w.auth.getUser();if(!a.user)throw Error("User not authenticated");for(let t of F)try{let l;let{data:r}=await w.from("vocabulary").select("id").eq("word",t.word).eq("user_id",a.user.id).single();if(r)l=r.id;else{let{data:e,error:r}=await w.from("vocabulary").insert({...t,user_id:a.user.id}).select("id").single();if(r)throw r;l=e.id}let{data:s}=await w.from("vocabulary_group_items").select("id").eq("vocabulary_group_id",e).eq("vocabulary_id",l).single();s||await w.from("vocabulary_group_items").insert({vocabulary_group_id:e,vocabulary_id:l,position:0})}catch(e){console.error('Failed to process vocabulary word "'.concat(t.word,'":'),e)}}catch(e){throw console.error("Failed to process batch vocabulary:",e),e}finally{L(!1)}}},ec=async e=>{try{if(_&&await w.from("vocabulary_group_books").delete().eq("vocabulary_group_id",e),B.length>0){let a=B.map((a,t)=>({vocabulary_group_id:e,book_id:a,position:t}));await w.from("vocabulary_group_books").insert(a)}}catch(e){console.error("Failed to save book relationships:",e)}},ed=e=>{R(a=>a.includes(e)?a.filter(a=>a!==e):[...a,e])},eu=O.filter(e=>e.title.toLowerCase().includes(J.toLowerCase())||e.author&&e.author.toLowerCase().includes(J.toLowerCase())),eh=()=>{ee.trim()&&!$.tags.includes(ee.trim())&&(Q({...$,tags:[...$.tags,ee.trim()]}),ea(""))},eg=e=>{Q({...$,tags:$.tags.filter(a=>a!==e)})},em=async()=>{if(q.trim())try{let e=await m.G.createCategory({name:q,type:"vocabulary",color:z});I(!1),A(""),await er(),Q({...$,category_id:e.id})}catch(e){console.error("Failed to create vocabulary category:",e)}},ep=g.A.getDifficultyLevels(),ex=[{value:"en",label:"English"},{value:"es",label:"Spanish"},{value:"fr",label:"French"},{value:"de",label:"German"},{value:"it",label:"Italian"},{value:"pt",label:"Portuguese"},{value:"ru",label:"Russian"},{value:"ja",label:"Japanese"},{value:"ko",label:"Korean"},{value:"zh",label:"Chinese"},{value:"ar",label:"Arabic"},{value:"hi",label:"Hindi"}];return(0,l.jsxs)("form",{onSubmit:ei,className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,l.jsxs)("div",{className:"mb-8",children:[(0,l.jsx)(f.zx,{type:"button",variant:"ghost",size:"sm",onClick:()=>b.back(),leftIcon:(0,l.jsx)(i.Z,{className:"h-4 w-4"}),className:"mb-4",children:"Back"}),(0,l.jsx)("h1",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:_?"Edit Vocabulary Group":"Create New Vocabulary Group"})]}),X.submit&&(0,l.jsx)("div",{className:"mb-6 p-4 bg-red-50 dark:bg-red-900/20 text-red-600 dark:text-red-400 rounded-lg",children:X.submit}),(0,l.jsxs)("div",{className:"space-y-6",children:[(0,l.jsxs)(f.Zb,{children:[(0,l.jsx)(f.Zb.Header,{children:(0,l.jsx)("h2",{className:"text-lg font-semibold",children:"Basic Information"})}),(0,l.jsxs)(f.Zb.Content,{className:"space-y-4",children:[(0,l.jsx)(f.II,{label:"Group Name",value:$.name,onChange:e=>Q({...$,name:e.target.value}),error:X.name,placeholder:"Enter group name",required:!0}),(0,l.jsx)(f.gx,{label:"Description",value:$.description,onChange:e=>Q({...$,description:e.target.value}),placeholder:"Describe this vocabulary group",rows:3}),(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Category"}),(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)(f.Ph,{className:"flex-grow",value:$.category_id,onChange:e=>Q({...$,category_id:e.target.value}),options:[{value:"",label:"Select category"},...C.map(e=>({value:e.id,label:e.name}))]}),(0,l.jsx)(f.zx,{type:"button",variant:"outline",size:"md",onClick:()=>I(!0),className:"flex-shrink-0 !h-10",children:(0,l.jsx)(n.Z,{className:"h-4 w-4"})})]})]}),(0,l.jsx)(f.Ph,{label:"Difficulty Level",value:$.difficulty,onChange:e=>Q({...$,difficulty:e.target.value}),options:ep.map(e=>({value:e.value,label:e.label}))})]})]})]}),(0,l.jsxs)(f.Zb,{children:[(0,l.jsx)(f.Zb.Header,{children:(0,l.jsx)("h2",{className:"text-lg font-semibold",children:"Language Settings"})}),(0,l.jsxs)(f.Zb.Content,{className:"space-y-4",children:[(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,l.jsx)(f.Ph,{label:"Source Language",value:$.language,onChange:e=>Q({...$,language:e.target.value}),options:ex}),(0,l.jsx)(f.Ph,{label:"Target Language",value:$.target_language,onChange:e=>Q({...$,target_language:e.target.value}),options:[{value:"",label:"Select target language"},...ex]})]}),(0,l.jsxs)("div",{className:"flex items-center space-x-2 pt-2",children:[(0,l.jsx)("input",{type:"checkbox",id:"is_public",checked:$.is_public,onChange:e=>Q({...$,is_public:e.target.checked}),className:"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded"}),(0,l.jsx)("label",{htmlFor:"is_public",className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Make this group publicly accessible"})]})]})]}),!_&&(0,l.jsxs)(f.Zb,{children:[(0,l.jsxs)(f.Zb.Header,{children:[(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)(o.Z,{className:"h-5 w-5"}),(0,l.jsx)("h2",{className:"text-lg font-semibold",children:"Batch Vocabulary Import"})]}),(0,l.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:"Add multiple vocabulary words at once. Each line should follow the pattern: word,part_of_speech,definition"})]}),(0,l.jsxs)(f.Zb.Content,{className:"space-y-4",children:[(0,l.jsx)(f.gx,{label:"Vocabulary Data",value:P,onChange:e=>V(e.target.value),placeholder:"area,n.,a region or part of a town, a country, or the world\nbeautiful,adj.,pleasing the senses or mind aesthetically\ncreate,v.,bring something into existence",rows:8,className:"font-mono text-sm"}),(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsxs)(f.zx,{type:"button",variant:"outline",onClick:()=>{P.trim()&&(G(en(P)),U(!0))},disabled:!P.trim(),leftIcon:(0,l.jsx)(c,{className:"h-4 w-4"}),children:["Preview Import (",en(P).length," words)"]}),F.length>0&&(0,l.jsxs)(f.Ct,{variant:"success",children:[F.length," words ready for import"]})]}),X.batch&&(0,l.jsx)("div",{className:"p-3 bg-red-50 dark:bg-red-900/20 text-red-600 dark:text-red-400 rounded-lg text-sm",children:X.batch}),(0,l.jsxs)("div",{className:"p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg text-sm text-blue-800 dark:text-blue-200",children:[(0,l.jsx)("p",{className:"font-medium",children:"Format Instructions:"}),(0,l.jsxs)("ul",{className:"mt-1 space-y-1 text-xs",children:[(0,l.jsx)("li",{children:"• Each line represents one vocabulary word"}),(0,l.jsx)("li",{children:"• Format: word,part_of_speech,definition"}),(0,l.jsx)("li",{children:"• Commas in definitions are allowed"}),(0,l.jsx)("li",{children:"• If a word already exists, it will only be added to this group"}),(0,l.jsx)("li",{children:"• All words will inherit the difficulty level and tags from this group"})]})]})]})]}),(0,l.jsxs)(f.Zb,{children:[(0,l.jsx)(f.Zb.Header,{children:(0,l.jsx)("h2",{className:"text-lg font-semibold",children:"Tags"})}),(0,l.jsxs)(f.Zb.Content,{className:"space-y-4",children:[(0,l.jsxs)("div",{className:"flex gap-2",children:[(0,l.jsx)(f.II,{value:ee,onChange:e=>ea(e.target.value),placeholder:"Add a tag",onKeyPress:e=>{"Enter"===e.key&&(e.preventDefault(),eh())}}),(0,l.jsx)(f.zx,{type:"button",onClick:eh,leftIcon:(0,l.jsx)(n.Z,{className:"h-4 w-4"}),children:"Add"})]}),$.tags.length>0&&(0,l.jsx)("div",{className:"flex flex-wrap gap-2",children:$.tags.map(e=>(0,l.jsxs)(f.Ct,{variant:"secondary",className:"px-3 py-1",children:[e,(0,l.jsx)("button",{type:"button",onClick:()=>eg(e),className:"ml-2 hover:text-red-500",children:(0,l.jsx)(d.Z,{className:"h-3 w-3"})})]},e))})]})]}),(0,l.jsxs)(f.Zb,{children:[(0,l.jsxs)(f.Zb.Header,{children:[(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)(u.Z,{className:"h-5 w-5"}),(0,l.jsx)("h2",{className:"text-lg font-semibold",children:"Related Books"})]}),(0,l.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:"Associate this vocabulary group with books where these words appear"})]}),(0,l.jsxs)(f.Zb.Content,{className:"space-y-4",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsxs)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[B.length," book",1!==B.length?"s":""," selected"]}),(0,l.jsx)(f.zx,{type:"button",variant:"outline",onClick:()=>T(!0),children:"Select Books"})]}),B.length>0&&(0,l.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:B.map(e=>{let a=O.find(a=>a.id===e);return a?(0,l.jsxs)("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[(0,l.jsxs)("div",{className:"flex items-center space-x-3",children:[a.cover_image_url&&(0,l.jsx)("img",{src:a.cover_image_url,alt:a.title,className:"w-10 h-12 object-cover rounded"}),(0,l.jsxs)("div",{children:[(0,l.jsx)("h4",{className:"font-medium text-sm",children:a.title}),a.author&&(0,l.jsx)("p",{className:"text-xs text-gray-600",children:a.author})]})]}),(0,l.jsx)(f.zx,{type:"button",variant:"ghost",size:"sm",onClick:()=>ed(e),className:"text-red-600 hover:text-red-700",children:(0,l.jsx)(d.Z,{className:"h-4 w-4"})})]},e):null})})]})]}),(0,l.jsxs)("div",{className:"flex justify-end gap-3",children:[(0,l.jsx)(f.zx,{type:"button",variant:"outline",onClick:v||(()=>b.push("/vocabulary/groups")),children:"Cancel"}),(0,l.jsx)(f.zx,{type:"submit",loading:void 0!==y?y:N,leftIcon:(0,l.jsx)(h.Z,{className:"h-4 w-4"}),children:_?"Update Group":"Create Group"})]})]}),(0,l.jsxs)(f.u_,{isOpen:S,onClose:()=>I(!1),title:"Create New Vocabulary Category",size:"sm",children:[(0,l.jsxs)("div",{className:"space-y-4",children:[(0,l.jsx)(f.II,{label:"Category Name",value:q,onChange:e=>A(e.target.value),placeholder:"e.g., Business, Academic, etc.",required:!0}),(0,l.jsx)(f.II,{label:"Category Color",type:"color",value:z,onChange:e=>E(e.target.value),className:"h-10"})]}),(0,l.jsxs)("div",{className:"mt-6 flex justify-end gap-3",children:[(0,l.jsx)(f.zx,{variant:"ghost",onClick:()=>I(!1),children:"Cancel"}),(0,l.jsx)(f.zx,{onClick:em,children:"Create Category"})]})]}),(0,l.jsx)(f.u_,{isOpen:M,onClose:()=>U(!1),title:"Batch Import Preview",size:"lg",children:(0,l.jsxs)("div",{className:"space-y-4",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsxs)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Preview of ",F.length," vocabulary words to be imported"]}),(0,l.jsxs)(f.Ct,{variant:"info",children:[F.filter(e=>e.word).length," new + ",F.length-F.filter(e=>e.word).length," existing"]})]}),(0,l.jsx)("div",{className:"max-h-96 overflow-y-auto border rounded-lg",children:(0,l.jsxs)("table",{className:"w-full text-sm",children:[(0,l.jsx)("thead",{className:"bg-gray-50 dark:bg-gray-800 sticky top-0",children:(0,l.jsxs)("tr",{children:[(0,l.jsx)("th",{className:"text-left p-2 border-r",children:"Word"}),(0,l.jsx)("th",{className:"text-left p-2 border-r",children:"Part of Speech"}),(0,l.jsx)("th",{className:"text-left p-2",children:"Definition"})]})}),(0,l.jsx)("tbody",{children:F.map((e,a)=>(0,l.jsxs)("tr",{className:"border-t hover:bg-gray-50 dark:hover:bg-gray-800",children:[(0,l.jsx)("td",{className:"p-2 border-r font-medium",children:e.word}),(0,l.jsx)("td",{className:"p-2 border-r",children:(0,l.jsx)(f.Ct,{variant:"secondary",className:"text-xs",children:e.part_of_speech})}),(0,l.jsx)("td",{className:"p-2 text-gray-600 dark:text-gray-400",children:e.definition.length>100?"".concat(e.definition.substring(0,100),"..."):e.definition})]},a))})]})}),(0,l.jsxs)("div",{className:"p-3 bg-yellow-50 dark:bg-yellow-900/20 rounded-lg text-sm text-yellow-800 dark:text-yellow-200",children:[(0,l.jsx)("p",{className:"font-medium",children:"Import Notes:"}),(0,l.jsxs)("ul",{className:"mt-1 space-y-1 text-xs",children:[(0,l.jsxs)("li",{children:["• Words will be created with difficulty: ",(0,l.jsx)(f.Ct,{variant:"secondary",className:"text-xs",children:$.difficulty})]}),$.tags.length>0&&(0,l.jsxs)("li",{children:["• Words will be tagged with: ",$.tags.map(e=>(0,l.jsx)(f.Ct,{variant:"secondary",className:"text-xs mr-1",children:e},e))]}),(0,l.jsx)("li",{children:"• Existing words will only be added to this group (not modified)"})]})]}),(0,l.jsxs)("div",{className:"flex justify-end gap-3",children:[(0,l.jsx)(f.zx,{variant:"outline",onClick:()=>U(!1),children:"Back to Edit"}),(0,l.jsx)(f.zx,{onClick:()=>U(!1),leftIcon:(0,l.jsx)(h.Z,{className:"h-4 w-4"}),children:"Confirm Import"})]})]})}),(0,l.jsx)(f.u_,{isOpen:W,onClose:()=>T(!1),title:"Select Related Books",size:"lg",children:(0,l.jsxs)("div",{className:"space-y-4",children:[(0,l.jsx)(f.II,{placeholder:"Search books by title or author...",value:J,onChange:e=>K(e.target.value)}),(0,l.jsx)("div",{className:"max-h-96 overflow-y-auto",children:0===eu.length?(0,l.jsx)("div",{className:"text-center py-8",children:(0,l.jsx)("p",{className:"text-gray-500",children:J?"No books found matching your search.":"No books available."})}):(0,l.jsx)("div",{className:"space-y-2",children:eu.map(e=>(0,l.jsx)("div",{className:"border rounded-lg p-3 cursor-pointer transition-colors ".concat(B.includes(e.id)?"border-blue-500 bg-blue-50 dark:bg-blue-900/20":"border-gray-200 hover:border-gray-300"),onClick:()=>ed(e.id),children:(0,l.jsx)("div",{className:"flex items-center justify-between",children:(0,l.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,l.jsx)("input",{type:"checkbox",checked:B.includes(e.id),onChange:()=>ed(e.id),className:"rounded"}),e.cover_image_url&&(0,l.jsx)("img",{src:e.cover_image_url,alt:e.title,className:"w-12 h-16 object-cover rounded"}),(0,l.jsxs)("div",{children:[(0,l.jsx)("h4",{className:"font-medium",children:e.title}),e.author&&(0,l.jsx)("p",{className:"text-sm text-gray-600",children:e.author})]})]})})},e.id))})}),(0,l.jsxs)("div",{className:"flex justify-between items-center border-t pt-4",children:[(0,l.jsxs)("p",{className:"text-sm text-gray-600",children:[B.length," book",1!==B.length?"s":""," selected"]}),(0,l.jsxs)("div",{className:"flex space-x-2",children:[(0,l.jsx)(f.zx,{variant:"outline",onClick:()=>T(!1),children:"Cancel"}),(0,l.jsx)(f.zx,{onClick:()=>T(!1),children:"Done"})]})]})]})})]})}},39630:function(e,a,t){t.d(a,{AuthProvider:function(){return n},a:function(){return o}});var l=t(57437),r=t(2265),s=t(44316);let i=(0,r.createContext)(void 0);function n(e){let{children:a}=e,[t,n]=(0,r.useState)(null),[o,c]=(0,r.useState)(null),[d,u]=(0,r.useState)(!0),h=(0,s.J)();(0,r.useEffect)(()=>{(async()=>{var e;let{data:{session:a}}=await h.auth.getSession();c(a),n(null!==(e=null==a?void 0:a.user)&&void 0!==e?e:null),u(!1)})();let{data:{subscription:e}}=h.auth.onAuthStateChange(async(e,a)=>{var t;c(a),n(null!==(t=null==a?void 0:a.user)&&void 0!==t?t:null),u(!1)});return()=>e.unsubscribe()},[h.auth]);let g=async(e,a,t)=>{u(!0);try{let{data:l,error:r}=await h.auth.signUp({email:e,password:a,options:t});return{user:l.user,error:r}}finally{u(!1)}},m=async(e,a)=>{u(!0);try{let{data:t,error:l}=await h.auth.signInWithPassword({email:e,password:a});return{user:t.user,error:l}}finally{u(!1)}},p=async()=>{u(!0);try{await h.auth.signOut()}finally{u(!1)}},x=async e=>{let{error:a}=await h.auth.resetPasswordForEmail(e,{redirectTo:"".concat("http://localhost:5001","/auth/reset-password")});return{error:a}};return(0,l.jsx)(i.Provider,{value:{user:t,session:o,loading:d,signUp:g,signIn:m,signOut:p,resetPassword:x},children:a})}function o(){let e=(0,r.useContext)(i);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},44316:function(e,a,t){t.d(a,{J:function(){return r}});var l=t(64392);let r=()=>(0,l.createClientComponentClient)()},60287:function(e,a,t){t.d(a,{G:function(){return r}});let l=(0,t(64392).createClientComponentClient)(),r={async getCategories(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=l.from("categories").select("*").order("name",{ascending:!0});e.type&&(a=a.eq("type",e.type)),void 0!==e.parentId&&(a=a.eq("parent_id",e.parentId)),e.search&&(a=a.ilike("name","%".concat(e.search,"%")));let{data:t,error:r}=await a;if(r)throw r;return t},async getCategory(e){let{data:a,error:t}=await l.from("categories").select("*").eq("id",e).single();if(t)throw t;return a},async createCategory(e){let{data:a}=await l.auth.getUser();if(!a.user)throw Error("User not authenticated");let{data:t,error:r}=await l.from("categories").insert({...e,user_id:a.user.id}).select().single();if(r)throw r;return t},async updateCategory(e){let{id:a,...t}=e,{data:r,error:s}=await l.from("categories").update({...t,updated_at:new Date().toISOString()}).eq("id",a).select().single();if(s)throw s;return r},async deleteCategory(e){let{error:a}=await l.from("categories").delete().eq("id",e);if(a)throw a},getCategoryTypes:()=>[{value:"course",label:"Course"},{value:"book",label:"Book"},{value:"vocabulary",label:"Vocabulary"},{value:"objective",label:"Objective"},{value:"method",label:"Method"},{value:"task",label:"Task"}]}},31868:function(e,a,t){t.d(a,{A:function(){return r}});let l=(0,t(64392).createClientComponentClient)(),r={async getVocabulary(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=l.from("vocabulary").select("*").order("word",{ascending:!0});e.search&&(a=a.or("word.ilike.%".concat(e.search,"%,translation.ilike.%").concat(e.search,"%,definition.ilike.%").concat(e.search,"%"))),e.difficulty&&(a=a.eq("difficulty",e.difficulty)),e.partOfSpeech&&(a=a.eq("part_of_speech",e.partOfSpeech)),e.tags&&e.tags.length>0&&(a=a.contains("tags",e.tags));let{data:t,error:r}=await a;if(r)throw r;return t},async getVocabularyInGroup(e){let{data:a,error:t}=await l.from("vocabulary_group_items").select("\n        *,\n        vocabulary(*)\n      ").eq("vocabulary_group_id",e).order("position",{ascending:!0});if(t)throw t;return a},async getVocabularyItem(e){let{data:a,error:t}=await l.from("vocabulary").select("*").eq("id",e).single();if(t)throw t;return a},async createVocabulary(e){let{data:a}=await l.auth.getUser();if(!a.user)throw Error("User not authenticated");let t={...e,difficulty:e.difficulty||"beginner",user_id:a.user.id},{data:r,error:s}=await l.from("vocabulary").insert(t).select().single();if(s)throw s;return r},async updateVocabulary(e){let{id:a,...t}=e,{data:r,error:s}=await l.from("vocabulary").update({...t,updated_at:new Date().toISOString()}).eq("id",a).select().single();if(s)throw s;return r},async deleteVocabulary(e){let{error:a}=await l.from("vocabulary").delete().eq("id",e);if(a)throw a},async getVocabularyGroups(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=l.from("vocabulary_groups").select("\n        *,\n        category:categories(id, name, color, icon),\n        vocabulary_group_items(count),\n        vocabulary_group_books(\n          book:books(\n            id,\n            title,\n            author,\n            cover_image_url\n          )\n        )\n      ").order("created_at",{ascending:!1});e.search&&(a=a.or("name.ilike.%".concat(e.search,"%,description.ilike.%").concat(e.search,"%"))),e.difficulty&&(a=a.eq("difficulty",e.difficulty)),e.language&&(a=a.eq("language",e.language)),e.targetLanguage&&(a=a.eq("target_language",e.targetLanguage)),e.categoryId&&(a=a.eq("category_id",e.categoryId)),void 0!==e.isPublic&&(a=a.eq("is_public",e.isPublic)),e.tags&&e.tags.length>0&&(a=a.contains("tags",e.tags));let{data:t,error:r}=await a;if(r)throw r;return(null==t?void 0:t.map(e=>{var a,t;return{...e,vocabulary_count:(null===(t=e.vocabulary_group_items)||void 0===t?void 0:null===(a=t[0])||void 0===a?void 0:a.count)||0}}))||[]},async getVocabularyGroup(e){let{data:a,error:t}=await l.from("vocabulary_groups").select("\n        *,\n        category:categories(id, name, color, icon),\n        vocabulary_group_items(\n          *,\n          vocabulary(*)\n        )\n      ").eq("id",e).single();if(t)throw t;return a},async createVocabularyGroup(e){let{data:a}=await l.auth.getUser();if(!a.user)throw Error("User not authenticated");let t={...e,language:e.language||"en",difficulty:e.difficulty||"beginner",is_public:e.is_public||!1,user_id:a.user.id},{data:r,error:s}=await l.from("vocabulary_groups").insert(t).select().single();if(s)throw s;return r},async updateVocabularyGroup(e){let{id:a,...t}=e,{data:r,error:s}=await l.from("vocabulary_groups").update({...t,updated_at:new Date().toISOString()}).eq("id",a).select().single();if(s)throw s;return r},async deleteVocabularyGroup(e){let{error:a}=await l.from("vocabulary_groups").delete().eq("id",e);if(a)throw a},async addVocabularyToGroup(e,a,t){if(void 0===t){let{data:e}=await l.from("vocabulary_group_items").select("position").eq("vocabulary_group_id",a).order("position",{ascending:!1}).limit(1);t=e&&e.length>0?e[0].position+1:0}let{data:r,error:s}=await l.from("vocabulary_group_items").insert({vocabulary_group_id:a,vocabulary_id:e,position:t}).select().single();if(s)throw s;return r},async removeVocabularyFromGroup(e,a){let{error:t}=await l.from("vocabulary_group_items").delete().eq("vocabulary_group_id",a).eq("vocabulary_id",e);if(t)throw t},async updateVocabularyPosition(e,a,t){let{data:r,error:s}=await l.from("vocabulary_group_items").update({position:t}).eq("vocabulary_group_id",a).eq("vocabulary_id",e).select().single();if(s)throw s;return r},async getVocabularyStats(){var e,a,t,r,s,i,n,o,c,d;let{data:u}=await l.auth.getUser();if(!u.user)throw Error("User not authenticated");let[h,g]=await Promise.all([l.from("vocabulary").select("difficulty",{count:"exact"}).eq("user_id",u.user.id),l.from("vocabulary_groups").select("difficulty",{count:"exact"}).eq("user_id",u.user.id)]);if(h.error)throw h.error;if(g.error)throw g.error;return{vocabulary:{total:(null===(e=h.data)||void 0===e?void 0:e.length)||0,beginner:(null===(a=h.data)||void 0===a?void 0:a.filter(e=>"beginner"===e.difficulty).length)||0,intermediate:(null===(t=h.data)||void 0===t?void 0:t.filter(e=>"intermediate"===e.difficulty).length)||0,advanced:(null===(r=h.data)||void 0===r?void 0:r.filter(e=>"advanced"===e.difficulty).length)||0,expert:(null===(s=h.data)||void 0===s?void 0:s.filter(e=>"expert"===e.difficulty).length)||0},groups:{total:(null===(i=g.data)||void 0===i?void 0:i.length)||0,beginner:(null===(n=g.data)||void 0===n?void 0:n.filter(e=>"beginner"===e.difficulty).length)||0,intermediate:(null===(o=g.data)||void 0===o?void 0:o.filter(e=>"intermediate"===e.difficulty).length)||0,advanced:(null===(c=g.data)||void 0===c?void 0:c.filter(e=>"advanced"===e.difficulty).length)||0,expert:(null===(d=g.data)||void 0===d?void 0:d.filter(e=>"expert"===e.difficulty).length)||0}}},async getPartsOfSpeech(){let{data:e}=await l.auth.getUser();if(!e.user)throw Error("User not authenticated");let{data:a,error:t}=await l.from("vocabulary").select("part_of_speech").eq("user_id",e.user.id).not("part_of_speech","is",null);if(t)throw t;return Array.from(new Set(null==a?void 0:a.map(e=>e.part_of_speech).filter(Boolean))).sort()},async getLanguages(){let{data:e}=await l.auth.getUser();if(!e.user)throw Error("User not authenticated");let{data:a,error:t}=await l.from("vocabulary_groups").select("language, target_language").eq("user_id",e.user.id);if(t)throw t;let r=new Set;return null==a||a.forEach(e=>{e.language&&r.add(e.language),e.target_language&&r.add(e.target_language)}),Array.from(r).sort()},getDifficultyLevels:()=>[{value:"beginner",label:"Beginner",color:"green"},{value:"intermediate",label:"Intermediate",color:"yellow"},{value:"advanced",label:"Advanced",color:"orange"},{value:"expert",label:"Expert",color:"red"}],getPartsOfSpeechOptions:()=>[{value:"noun",label:"Noun"},{value:"verb",label:"Verb"},{value:"adjective",label:"Adjective"},{value:"adverb",label:"Adverb"},{value:"pronoun",label:"Pronoun"},{value:"preposition",label:"Preposition"},{value:"conjunction",label:"Conjunction"},{value:"interjection",label:"Interjection"},{value:"article",label:"Article"}]}},13027:function(e,a,t){t.d(a,{j:function(){return i}});var l=t(44839);let r=e=>"boolean"==typeof e?`${e}`:0===e?"0":e,s=l.W,i=(e,a)=>t=>{var l;if((null==a?void 0:a.variants)==null)return s(e,null==t?void 0:t.class,null==t?void 0:t.className);let{variants:i,defaultVariants:n}=a,o=Object.keys(i).map(e=>{let a=null==t?void 0:t[e],l=null==n?void 0:n[e];if(null===a)return null;let s=r(a)||r(l);return i[e][s]}),c=t&&Object.entries(t).reduce((e,a)=>{let[t,l]=a;return void 0===l||(e[t]=l),e},{});return s(e,o,null==a?void 0:null===(l=a.compoundVariants)||void 0===l?void 0:l.reduce((e,a)=>{let{class:t,className:l,...r}=a;return Object.entries(r).every(e=>{let[a,t]=e;return Array.isArray(t)?t.includes({...n,...c}[a]):({...n,...c})[a]===t})?[...e,t,l]:e},[]),null==t?void 0:t.class,null==t?void 0:t.className)}},44839:function(e,a,t){t.d(a,{W:function(){return l}});function l(){for(var e,a,t=0,l="",r=arguments.length;t<r;t++)(e=arguments[t])&&(a=function e(a){var t,l,r="";if("string"==typeof a||"number"==typeof a)r+=a;else if("object"==typeof a){if(Array.isArray(a)){var s=a.length;for(t=0;t<s;t++)a[t]&&(l=e(a[t]))&&(r&&(r+=" "),r+=l)}else for(l in a)a[l]&&(r&&(r+=" "),r+=l)}return r}(e))&&(l&&(l+=" "),l+=a);return l}}}]);