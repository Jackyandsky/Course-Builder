"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5685],{78030:function(e,t,a){a.d(t,{Z:function(){return d}});var r=a(2265);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let l=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),n=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,a)=>a?a.toUpperCase():t.toLowerCase()),i=e=>{let t=n(e);return t.charAt(0).toUpperCase()+t.slice(1)},s=function(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return t.filter((e,t,a)=>!!e&&""!==e.trim()&&a.indexOf(e)===t).join(" ").trim()},o=e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0};/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var c={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let u=(0,r.forwardRef)((e,t)=>{let{color:a="currentColor",size:l=24,strokeWidth:n=2,absoluteStrokeWidth:i,className:u="",children:d,iconNode:g,...h}=e;return(0,r.createElement)("svg",{ref:t,...c,width:l,height:l,stroke:a,strokeWidth:i?24*Number(n)/Number(l):n,className:s("lucide",u),...!d&&!o(h)&&{"aria-hidden":"true"},...h},[...g.map(e=>{let[t,a]=e;return(0,r.createElement)(t,a)}),...Array.isArray(d)?d:[d]])}),d=(e,t)=>{let a=(0,r.forwardRef)((a,n)=>{let{className:o,...c}=a;return(0,r.createElement)(u,{ref:n,iconNode:t,className:s("lucide-".concat(l(i(e))),"lucide-".concat(e),o),...c})});return a.displayName=i(e),a}},95137:function(e,t,a){a.d(t,{Z:function(){return r}});let r=(0,a(78030).Z)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},6540:function(e,t,a){a.d(t,{Z:function(){return r}});let r=(0,a(78030).Z)("book-open",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]])},42421:function(e,t,a){a.d(t,{Z:function(){return r}});let r=(0,a(78030).Z)("chevron-down",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]])},70518:function(e,t,a){a.d(t,{Z:function(){return r}});let r=(0,a(78030).Z)("chevron-left",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]])},87592:function(e,t,a){a.d(t,{Z:function(){return r}});let r=(0,a(78030).Z)("chevron-right",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]])},14392:function(e,t,a){a.d(t,{Z:function(){return r}});let r=(0,a(78030).Z)("chevron-up",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]])},63550:function(e,t,a){a.d(t,{Z:function(){return r}});let r=(0,a(78030).Z)("ellipsis",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]])},65607:function(e,t,a){a.d(t,{Z:function(){return r}});let r=(0,a(78030).Z)("funnel",[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]])},92513:function(e,t,a){a.d(t,{Z:function(){return r}});let r=(0,a(78030).Z)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},59061:function(e,t,a){a.d(t,{Z:function(){return r}});let r=(0,a(78030).Z)("save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]])},54817:function(e,t,a){a.d(t,{Z:function(){return r}});let r=(0,a(78030).Z)("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]])},74697:function(e,t,a){a.d(t,{Z:function(){return r}});let r=(0,a(78030).Z)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},16463:function(e,t,a){var r=a(71169);a.o(r,"useParams")&&a.d(t,{useParams:function(){return r.useParams}}),a.o(r,"usePathname")&&a.d(t,{usePathname:function(){return r.usePathname}}),a.o(r,"useRouter")&&a.d(t,{useRouter:function(){return r.useRouter}})},81871:function(e,t,a){a.d(t,{t:function(){return m}});var r=a(57437),l=a(2265),n=a(16463),i=a(95137),s=a(92513),o=a(74697),c=a(6540),u=a(59061),d=a(46749),g=a(60287),h=a(64392),p=a(2318);function m(e){let{initialData:t}=e,a=(0,n.useRouter)(),m=(0,h.createClientComponentClient)(),y=!!t,[x,f]=(0,l.useState)(!1),[v,b]=(0,l.useState)([]),[j,k]=(0,l.useState)(!1),[w,C]=(0,l.useState)(""),[_,N]=(0,l.useState)("#6b7280"),[Z,I]=(0,l.useState)([]),[D,q]=(0,l.useState)([]),[S,z]=(0,l.useState)(!1),[A,B]=(0,l.useState)(""),[E,L]=(0,l.useState)({title:(null==t?void 0:t.title)||"",author:(null==t?void 0:t.author)||"",description:(null==t?void 0:t.description)||"",category_id:(null==t?void 0:t.category_id)||"",content_type:(null==t?void 0:t.content_type)||"text",language:(null==t?void 0:t.language)||"en",tags:(null==t?void 0:t.tags)||[],cover_image_url:(null==t?void 0:t.cover_image_url)||"",publication_year:(null==t?void 0:t.publication_year)||"",is_public:(null==t?void 0:t.is_public)||!1}),[P,U]=(0,l.useState)({}),[F,M]=(0,l.useState)("");(0,l.useEffect)(()=>{H(),T(),y&&t&&O()},[]);let T=async()=>{try{let{data:e,error:t}=await m.from("vocabulary_groups").select("id, name, description, difficulty, language, target_language").order("name");if(t)throw t;I(e||[])}catch(e){console.error("Failed to load vocabulary groups:",e)}},O=async()=>{if(t)try{let{data:e,error:a}=await m.from("vocabulary_group_books").select("vocabulary_group_id").eq("book_id",t.id);if(a)throw a;q((null==e?void 0:e.map(e=>e.vocabulary_group_id))||[])}catch(e){console.error("Failed to load existing vocabulary group relationships:",e)}},H=async()=>{try{let e=await g.G.getCategories({type:"book"});b(e)}catch(e){console.error("Failed to load categories:",e)}},R=()=>{let e={};return E.title.trim()||(e.title="Title is required"),E.publication_year&&isNaN(Number(E.publication_year))&&(e.publication_year="Publication year must be a number"),U(e),0===Object.keys(e).length},V=async e=>{if(e.preventDefault(),R()){f(!0);try{let e;let r={...E,publication_year:E.publication_year?Number(E.publication_year):void 0};y?(await d.a.updateBook({id:t.id,...r}),e=t.id):e=(await d.a.createBook(r)).id,await Y(e),a.push("/books"),a.refresh()}catch(e){console.error("Failed to save book:",e),U({submit:e.message||"Failed to save book. Please try again."})}finally{f(!1)}}},G=()=>{F.trim()&&!E.tags.includes(F.trim())&&(L({...E,tags:[...E.tags,F.trim()]}),M(""))},W=e=>{L({...E,tags:E.tags.filter(t=>t!==e)})},Y=async e=>{try{if(y&&await m.from("vocabulary_group_books").delete().eq("book_id",e),D.length>0){let t=D.map((t,a)=>({vocabulary_group_id:t,book_id:e,position:a}));await m.from("vocabulary_group_books").insert(t)}}catch(e){console.error("Failed to save vocabulary group relationships:",e)}},$=e=>{q(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])},K=Z.filter(e=>e.name.toLowerCase().includes(A.toLowerCase())||e.description&&e.description.toLowerCase().includes(A.toLowerCase())||e.language.toLowerCase().includes(A.toLowerCase())||e.target_language&&e.target_language.toLowerCase().includes(A.toLowerCase())),J=async()=>{if(w.trim())try{let e=await g.G.createCategory({name:w,type:"book",color:_});k(!1),C(""),await H(),L({...E,category_id:e.id})}catch(e){console.error("Failed to create book category:",e)}};return(0,r.jsxs)("form",{onSubmit:V,className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,r.jsxs)("div",{className:"mb-8",children:[(0,r.jsx)(p.zx,{type:"button",variant:"ghost",size:"sm",onClick:()=>a.back(),leftIcon:(0,r.jsx)(i.Z,{className:"h-4 w-4"}),className:"mb-4",children:"Back"}),(0,r.jsx)("h1",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:y?"Edit Book":"Create New Book"})]}),P.submit&&(0,r.jsx)("div",{className:"mb-6 p-4 bg-red-50 dark:bg-red-900/20 text-red-600 dark:text-red-400 rounded-lg",children:P.submit}),(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)(p.Zb,{children:[(0,r.jsx)(p.Zb.Header,{children:(0,r.jsx)("h2",{className:"text-lg font-semibold",children:"Basic Information"})}),(0,r.jsxs)(p.Zb.Content,{className:"space-y-4",children:[(0,r.jsx)(p.II,{label:"Book Title",value:E.title,onChange:e=>L({...E,title:e.target.value}),error:P.title,placeholder:"Enter book title",required:!0}),(0,r.jsx)(p.II,{label:"Author",value:E.author,onChange:e=>L({...E,author:e.target.value}),placeholder:"Enter author's name"}),(0,r.jsx)(p.gx,{label:"Description",value:E.description,onChange:e=>L({...E,description:e.target.value}),placeholder:"Detailed book description",rows:4}),(0,r.jsx)(p.II,{label:"Cover Image URL",type:"url",value:E.cover_image_url,onChange:e=>L({...E,cover_image_url:e.target.value}),placeholder:"https://example.com/image.jpg"})]})]}),(0,r.jsxs)(p.Zb,{children:[(0,r.jsx)(p.Zb.Header,{children:(0,r.jsx)("h2",{className:"text-lg font-semibold",children:"Details & Categorization"})}),(0,r.jsxs)(p.Zb.Content,{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{className:"md:col-span-1",children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Category"}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(p.Ph,{className:"flex-grow",value:E.category_id,onChange:e=>L({...E,category_id:e.target.value}),options:[{value:"",label:"Select category"},...v.map(e=>({value:e.id,label:e.name}))]}),(0,r.jsx)(p.zx,{type:"button",variant:"outline",size:"md",onClick:()=>k(!0),className:"flex-shrink-0 !h-10",children:(0,r.jsx)(s.Z,{className:"h-4 w-4"})})]})]}),(0,r.jsx)(p.II,{label:"Publication Year",type:"number",value:E.publication_year,onChange:e=>L({...E,publication_year:e.target.value}),error:P.publication_year,placeholder:"e.g., 2023"})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,r.jsx)(p.Ph,{label:"Content Type",value:E.content_type,onChange:e=>L({...E,content_type:e.target.value}),options:d.a.getContentTypes()}),(0,r.jsx)(p.II,{label:"Language",value:E.language,onChange:e=>L({...E,language:e.target.value}),placeholder:"e.g., en"})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-2 pt-2",children:[(0,r.jsx)("input",{type:"checkbox",id:"is_public",checked:E.is_public,onChange:e=>L({...E,is_public:e.target.checked}),className:"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded"}),(0,r.jsx)("label",{htmlFor:"is_public",className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Make this book publicly accessible"})]})]})]}),(0,r.jsxs)(p.Zb,{children:[(0,r.jsx)(p.Zb.Header,{children:(0,r.jsx)("h2",{className:"text-lg font-semibold",children:"Tags"})}),(0,r.jsxs)(p.Zb.Content,{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsx)(p.II,{value:F,onChange:e=>M(e.target.value),placeholder:"Add a tag",onKeyPress:e=>{"Enter"===e.key&&(e.preventDefault(),G())}}),(0,r.jsx)(p.zx,{type:"button",onClick:G,leftIcon:(0,r.jsx)(s.Z,{className:"h-4 w-4"}),children:"Add"})]}),E.tags.length>0&&(0,r.jsx)("div",{className:"flex flex-wrap gap-2",children:E.tags.map(e=>(0,r.jsxs)(p.Ct,{variant:"secondary",className:"px-3 py-1",children:[e,(0,r.jsx)("button",{type:"button",onClick:()=>W(e),className:"ml-2 hover:text-red-500",children:(0,r.jsx)(o.Z,{className:"h-3 w-3"})})]},e))})]})]}),(0,r.jsxs)(p.Zb,{children:[(0,r.jsxs)(p.Zb.Header,{children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(c.Z,{className:"h-5 w-5"}),(0,r.jsx)("h2",{className:"text-lg font-semibold",children:"Related Vocabulary Groups"})]}),(0,r.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:"Associate vocabulary groups that contain words from this book"})]}),(0,r.jsxs)(p.Zb.Content,{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[D.length," group",1!==D.length?"s":""," selected"]}),(0,r.jsx)(p.zx,{type:"button",variant:"outline",onClick:()=>z(!0),children:"Select Groups"})]}),D.length>0&&(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:D.map(e=>{let t=Z.find(t=>t.id===e);return t?(0,r.jsxs)("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h4",{className:"font-medium text-sm",children:t.name}),(0,r.jsxs)("div",{className:"flex items-center space-x-2 mt-1",children:[(0,r.jsx)(p.Ct,{variant:"secondary",className:"text-xs",children:t.difficulty}),t.language&&t.target_language&&(0,r.jsxs)(p.Ct,{variant:"outline",className:"text-xs",children:[t.language," → ",t.target_language]})]}),t.description&&(0,r.jsx)("p",{className:"text-xs text-gray-600 mt-1 line-clamp-1",children:t.description})]}),(0,r.jsx)(p.zx,{type:"button",variant:"ghost",size:"sm",onClick:()=>$(e),className:"text-red-600 hover:text-red-700",children:(0,r.jsx)(o.Z,{className:"h-4 w-4"})})]},e):null})})]})]}),(0,r.jsxs)("div",{className:"flex justify-end gap-3",children:[(0,r.jsx)(p.zx,{type:"button",variant:"outline",onClick:()=>a.push("/books"),children:"Cancel"}),(0,r.jsx)(p.zx,{type:"submit",loading:x,leftIcon:(0,r.jsx)(u.Z,{className:"h-4 w-4"}),children:y?"Update Book":"Create Book"})]})]}),(0,r.jsxs)(p.u_,{isOpen:j,onClose:()=>k(!1),title:"Create New Book Category",size:"sm",children:[(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsx)(p.II,{label:"Category Name",value:w,onChange:e=>C(e.target.value),placeholder:"e.g., Fiction, Science, etc.",required:!0}),(0,r.jsx)(p.II,{label:"Category Color",type:"color",value:_,onChange:e=>N(e.target.value),className:"h-10"})]}),(0,r.jsxs)("div",{className:"mt-6 flex justify-end gap-3",children:[(0,r.jsx)(p.zx,{variant:"ghost",onClick:()=>k(!1),children:"Cancel"}),(0,r.jsx)(p.zx,{onClick:J,children:"Create Category"})]})]}),(0,r.jsx)(p.u_,{isOpen:S,onClose:()=>z(!1),title:"Select Vocabulary Groups",size:"lg",children:(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsx)(p.II,{placeholder:"Search vocabulary groups by name, description, or language...",value:A,onChange:e=>B(e.target.value)}),(0,r.jsx)("div",{className:"max-h-96 overflow-y-auto",children:0===K.length?(0,r.jsx)("div",{className:"text-center py-8",children:(0,r.jsx)("p",{className:"text-gray-500",children:A?"No vocabulary groups found matching your search.":"No vocabulary groups available."})}):(0,r.jsx)("div",{className:"space-y-2",children:K.map(e=>(0,r.jsx)("div",{className:"border rounded-lg p-3 cursor-pointer transition-colors ".concat(D.includes(e.id)?"border-blue-500 bg-blue-50 dark:bg-blue-900/20":"border-gray-200 hover:border-gray-300"),onClick:()=>$(e.id),children:(0,r.jsx)("div",{className:"flex items-center justify-between",children:(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsx)("input",{type:"checkbox",checked:D.includes(e.id),onChange:()=>$(e.id),className:"rounded"}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("h4",{className:"font-medium",children:e.name}),(0,r.jsx)(p.Ct,{variant:"secondary",className:"text-xs",children:e.difficulty}),e.language&&e.target_language&&(0,r.jsxs)(p.Ct,{variant:"outline",className:"text-xs",children:[e.language," → ",e.target_language]})]}),e.description&&(0,r.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:e.description})]})]})})},e.id))})}),(0,r.jsxs)("div",{className:"flex justify-between items-center border-t pt-4",children:[(0,r.jsxs)("p",{className:"text-sm text-gray-600",children:[D.length," group",1!==D.length?"s":""," selected"]}),(0,r.jsxs)("div",{className:"flex space-x-2",children:[(0,r.jsx)(p.zx,{variant:"outline",onClick:()=>z(!1),children:"Cancel"}),(0,r.jsx)(p.zx,{onClick:()=>z(!1),children:"Done"})]})]})]})})]})}},46749:function(e,t,a){a.d(t,{a:function(){return l}});let r=(0,a(64392).createClientComponentClient)(),l={async getBooks(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=r.from("books").select("\n        *,\n        category:categories(id, name, color, icon),\n        vocabulary_group_books(\n          vocabulary_group:vocabulary_groups(\n            id,\n            name,\n            difficulty\n          )\n        )\n      ").order("created_at",{ascending:!1});e.search&&(t=t.or("title.ilike.%".concat(e.search,"%,author.ilike.%").concat(e.search,"%,description.ilike.%").concat(e.search,"%"))),e.author&&(t=t.ilike("author","%".concat(e.author,"%"))),e.categoryId&&(t=t.eq("category_id",e.categoryId)),e.contentType&&(t=t.eq("content_type",e.contentType)),e.language&&(t=t.eq("language",e.language)),e.publicationYear&&(t=t.eq("publication_year",e.publicationYear)),void 0!==e.isPublic&&(t=t.eq("is_public",e.isPublic)),e.tags&&e.tags.length>0&&(t=t.contains("tags",e.tags));let{data:a,error:l}=await t;if(l)throw l;return a},async getBook(e){let{data:t,error:a}=await r.from("books").select("\n        *,\n        category:categories(id, name, color, icon),\n        course_books(\n          id,\n          course_id,\n          is_required,\n          notes,\n          position,\n          course:courses(id, title, status)\n        )\n      ").eq("id",e).single();if(a)throw a;return t},async createBook(e){let{data:t}=await r.auth.getUser();if(!t.user)throw Error("User not authenticated");let a={...e,language:e.language||"en",is_public:e.is_public||!1,user_id:t.user.id},{data:l,error:n}=await r.from("books").insert(a).select().single();if(n)throw n;return l},async updateBook(e){let{id:t,...a}=e,{data:l,error:n}=await r.from("books").update({...a,updated_at:new Date().toISOString()}).eq("id",t).select().single();if(n)throw n;return l},async deleteBook(e){let{error:t}=await r.from("books").delete().eq("id",e);if(t)throw t},async getBookStats(){let{data:e}=await r.auth.getUser();if(!e.user)throw Error("User not authenticated");let{data:t,error:a}=await r.from("books").select("content_type",{count:"exact"}).eq("user_id",e.user.id);if(a)throw a;return{total:(null==t?void 0:t.length)||0,text:(null==t?void 0:t.filter(e=>"text"===e.content_type).length)||0,video:(null==t?void 0:t.filter(e=>"video"===e.content_type).length)||0,audio:(null==t?void 0:t.filter(e=>"audio"===e.content_type).length)||0,pdf:(null==t?void 0:t.filter(e=>"pdf"===e.content_type).length)||0,other:(null==t?void 0:t.filter(e=>["image","interactive"].includes(e.content_type)).length)||0}},async getAuthors(){let{data:e}=await r.auth.getUser();if(!e.user)throw Error("User not authenticated");let{data:t,error:a}=await r.from("books").select("author").eq("user_id",e.user.id).not("author","is",null);if(a)throw a;return Array.from(new Set(null==t?void 0:t.map(e=>e.author).filter(Boolean))).sort()},async getLanguages(){let{data:e}=await r.auth.getUser();if(!e.user)throw Error("User not authenticated");let{data:t,error:a}=await r.from("books").select("language").eq("user_id",e.user.id);if(a)throw a;return Array.from(new Set(null==t?void 0:t.map(e=>e.language).filter(Boolean))).sort()},getContentTypes:()=>[{value:"text",label:"Text",icon:"\uD83D\uDCC4"},{value:"pdf",label:"PDF",icon:"\uD83D\uDCD1"},{value:"video",label:"Video",icon:"\uD83C\uDFA5"},{value:"audio",label:"Audio",icon:"\uD83C\uDFA7"},{value:"image",label:"Image",icon:"\uD83D\uDDBC️"},{value:"interactive",label:"Interactive",icon:"\uD83C\uDFAE"}]}},60287:function(e,t,a){a.d(t,{G:function(){return l}});let r=(0,a(64392).createClientComponentClient)(),l={async getCategories(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=r.from("categories").select("*").order("name",{ascending:!0});e.type&&(t=t.eq("type",e.type)),void 0!==e.parentId&&(t=t.eq("parent_id",e.parentId)),e.search&&(t=t.ilike("name","%".concat(e.search,"%")));let{data:a,error:l}=await t;if(l)throw l;return a},async getCategory(e){let{data:t,error:a}=await r.from("categories").select("*").eq("id",e).single();if(a)throw a;return t},async createCategory(e){let{data:t}=await r.auth.getUser();if(!t.user)throw Error("User not authenticated");let{data:a,error:l}=await r.from("categories").insert({...e,user_id:t.user.id}).select().single();if(l)throw l;return a},async updateCategory(e){let{id:t,...a}=e,{data:l,error:n}=await r.from("categories").update({...a,updated_at:new Date().toISOString()}).eq("id",t).select().single();if(n)throw n;return l},async deleteCategory(e){let{error:t}=await r.from("categories").delete().eq("id",e);if(t)throw t},getCategoryTypes:()=>[{value:"course",label:"Course"},{value:"book",label:"Book"},{value:"vocabulary",label:"Vocabulary"},{value:"objective",label:"Objective"},{value:"method",label:"Method"},{value:"task",label:"Task"}]}},13027:function(e,t,a){a.d(t,{j:function(){return i}});var r=a(44839);let l=e=>"boolean"==typeof e?`${e}`:0===e?"0":e,n=r.W,i=(e,t)=>a=>{var r;if((null==t?void 0:t.variants)==null)return n(e,null==a?void 0:a.class,null==a?void 0:a.className);let{variants:i,defaultVariants:s}=t,o=Object.keys(i).map(e=>{let t=null==a?void 0:a[e],r=null==s?void 0:s[e];if(null===t)return null;let n=l(t)||l(r);return i[e][n]}),c=a&&Object.entries(a).reduce((e,t)=>{let[a,r]=t;return void 0===r||(e[a]=r),e},{});return n(e,o,null==t?void 0:null===(r=t.compoundVariants)||void 0===r?void 0:r.reduce((e,t)=>{let{class:a,className:r,...l}=t;return Object.entries(l).every(e=>{let[t,a]=e;return Array.isArray(a)?a.includes({...s,...c}[t]):({...s,...c})[t]===a})?[...e,a,r]:e},[]),null==a?void 0:a.class,null==a?void 0:a.className)}},44839:function(e,t,a){a.d(t,{W:function(){return r}});function r(){for(var e,t,a=0,r="",l=arguments.length;a<l;a++)(e=arguments[a])&&(t=function e(t){var a,r,l="";if("string"==typeof t||"number"==typeof t)l+=t;else if("object"==typeof t){if(Array.isArray(t)){var n=t.length;for(a=0;a<n;a++)t[a]&&(r=e(t[a]))&&(l&&(l+=" "),l+=r)}else for(r in t)t[r]&&(l&&(l+=" "),l+=r)}return l}(e))&&(r&&(r+=" "),r+=t);return r}}}]);