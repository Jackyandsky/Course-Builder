"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8178],{78030:function(e,t,a){a.d(t,{Z:function(){return c}});var s=a(2265);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let n=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),r=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,a)=>a?a.toUpperCase():t.toLowerCase()),l=e=>{let t=r(e);return t.charAt(0).toUpperCase()+t.slice(1)},i=function(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return t.filter((e,t,a)=>!!e&&""!==e.trim()&&a.indexOf(e)===t).join(" ").trim()},u=e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0};/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var o={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let d=(0,s.forwardRef)((e,t)=>{let{color:a="currentColor",size:n=24,strokeWidth:r=2,absoluteStrokeWidth:l,className:d="",children:c,iconNode:h,...m}=e;return(0,s.createElement)("svg",{ref:t,...o,width:n,height:n,stroke:a,strokeWidth:l?24*Number(r)/Number(n):r,className:i("lucide",d),...!c&&!u(m)&&{"aria-hidden":"true"},...m},[...h.map(e=>{let[t,a]=e;return(0,s.createElement)(t,a)}),...Array.isArray(c)?c:[c]])}),c=(e,t)=>{let a=(0,s.forwardRef)((a,r)=>{let{className:u,...o}=a;return(0,s.createElement)(d,{ref:r,iconNode:t,className:i("lucide-".concat(n(l(e))),"lucide-".concat(e),u),...o})});return a.displayName=l(e),a}},42421:function(e,t,a){a.d(t,{Z:function(){return s}});let s=(0,a(78030).Z)("chevron-down",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]])},59061:function(e,t,a){a.d(t,{Z:function(){return s}});let s=(0,a(78030).Z)("save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]])},16463:function(e,t,a){var s=a(71169);a.o(s,"useParams")&&a.d(t,{useParams:function(){return s.useParams}}),a.o(s,"usePathname")&&a.d(t,{usePathname:function(){return s.usePathname}}),a.o(s,"useRouter")&&a.d(t,{useRouter:function(){return s.useRouter}})},96932:function(e,t,a){a.d(t,{c:function(){return y}});var s=a(57437),n=a(2265),r=a(16463),l=a(6760),i=a(9155),u=a(17315),o=a(24530),d=a(39630),c=a(50586),h=a(42368),m=a(59061);let v=[{value:"none",label:"No Recurrence (One-time)"},{value:"daily",label:"Daily"},{value:"weekly",label:"Weekly"},{value:"biweekly",label:"Bi-weekly"},{value:"monthly",label:"Monthly"}],f=[{value:"monday",label:"Monday"},{value:"tuesday",label:"Tuesday"},{value:"wednesday",label:"Wednesday"},{value:"thursday",label:"Thursday"},{value:"friday",label:"Friday"},{value:"saturday",label:"Saturday"},{value:"sunday",label:"Sunday"}],g=[{value:"UTC",label:"UTC"},{value:"America/New_York",label:"Eastern Time (US)"},{value:"America/Chicago",label:"Central Time (US)"},{value:"America/Denver",label:"Mountain Time (US)"},{value:"America/Los_Angeles",label:"Pacific Time (US)"},{value:"Europe/London",label:"London"},{value:"Europe/Paris",label:"Paris"},{value:"Asia/Tokyo",label:"Tokyo"},{value:"Asia/Shanghai",label:"Shanghai"},{value:"Australia/Sydney",label:"Sydney"}];function y(e){let{schedule:t,onSuccess:a}=e,y=(0,r.useRouter)(),{user:_}=(0,d.a)(),p=!!t,[b,w]=(0,n.useState)(!1),[x,S]=(0,n.useState)([]),[C,j]=(0,n.useState)({course_id:(null==t?void 0:t.course_id)||"",name:(null==t?void 0:t.name)||"",description:(null==t?void 0:t.description)||"",start_date:(null==t?void 0:t.start_date)||new Date().toISOString().split("T")[0],end_date:(null==t?void 0:t.end_date)||"",recurrence_type:(null==t?void 0:t.recurrence_type)||"weekly",recurrence_days:(null==t?void 0:t.recurrence_days)||["monday","wednesday","friday"],default_start_time:(null==t?void 0:t.default_start_time)||"09:00",default_duration_minutes:(null==t?void 0:t.default_duration_minutes)||60,timezone:(null==t?void 0:t.timezone)||Intl.DateTimeFormat().resolvedOptions().timeZone||"UTC",location:(null==t?void 0:t.location)||"",max_students:(null==t?void 0:t.max_students)||20,is_active:(null==t?void 0:t.is_active)!==!1}),[k,N]=(0,n.useState)({});(0,n.useEffect)(()=>{q()},[]);let q=async()=>{try{let e=await h.J.getCourses({});S(e)}catch(e){console.error("Failed to load courses:",e)}},D=()=>{let e={};return C.name.trim()||(e.name="Schedule name is required"),C.course_id||(e.course_id="A course must be selected"),C.start_date||(e.start_date="Start date is required"),N(e),0===Object.keys(e).length},A=async e=>{if(e.preventDefault(),D()&&_){w(!0);try{let e={...C,user_id:_.id,max_students:null===C.max_students?void 0:C.max_students,default_duration_minutes:C.default_duration_minutes};p?await c.y.updateSchedule(t.id,e):await c.y.createSchedule(e),a?a():(y.push("/schedules"),y.refresh())}catch(e){console.error("Failed to save schedule:",e),N({submit:e.message||"Failed to save schedule. Please try again."})}finally{w(!1)}}},L=e=>{j(t=>({...t,recurrence_days:t.recurrence_days.includes(e)?t.recurrence_days.filter(t=>t!==e):[...t.recurrence_days,e]}))};return(0,s.jsxs)("form",{onSubmit:A,className:"space-y-6",children:[k.submit&&(0,s.jsx)("div",{className:"mb-6 p-4 bg-red-50 dark:bg-red-900/20 text-red-600 dark:text-red-400 rounded-lg",children:k.submit}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,s.jsx)("div",{className:"col-span-2",children:(0,s.jsx)(o.P,{label:"Course",value:C.course_id,onChange:e=>j({...C,course_id:e.target.value}),required:!0,error:k.course_id,options:x.map(e=>({value:e.id,label:e.title})),placeholder:"Select a course..."})}),(0,s.jsx)("div",{className:"col-span-2",children:(0,s.jsx)(i.I,{label:"Schedule Name",value:C.name,onChange:e=>j({...C,name:e.target.value}),placeholder:"e.g., Morning Classes, Evening Sessions",required:!0,error:k.name})}),(0,s.jsx)("div",{className:"col-span-2",children:(0,s.jsx)(u.g,{label:"Description",value:C.description||"",onChange:e=>j({...C,description:e.target.value}),placeholder:"Describe this schedule...",rows:3})}),(0,s.jsx)("div",{children:(0,s.jsx)(i.I,{type:"date",label:"Start Date",value:C.start_date,onChange:e=>j({...C,start_date:e.target.value}),required:!0,error:k.start_date})}),(0,s.jsx)("div",{children:(0,s.jsx)(i.I,{type:"date",label:"End Date (Optional)",value:C.end_date,onChange:e=>j({...C,end_date:e.target.value}),helperText:"Leave empty for ongoing schedule"})}),(0,s.jsx)("div",{children:(0,s.jsx)(o.P,{label:"Recurrence",value:C.recurrence_type,onChange:e=>j({...C,recurrence_type:e.target.value}),options:v})}),"none"!==C.recurrence_type&&(0,s.jsxs)("div",{className:"col-span-2",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Class Days"}),(0,s.jsx)("div",{className:"flex flex-wrap gap-2",children:f.map(e=>{var t;return(0,s.jsx)("button",{type:"button",onClick:()=>L(e.value),className:"px-4 py-2 rounded-md transition-colors ".concat((null===(t=C.recurrence_days)||void 0===t?void 0:t.includes(e.value))?"bg-blue-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"),children:e.label},e.value)})})]}),(0,s.jsx)("div",{children:(0,s.jsx)(i.I,{type:"time",label:"Default Start Time",value:C.default_start_time,onChange:e=>j({...C,default_start_time:e.target.value}),required:!0})}),(0,s.jsx)("div",{children:(0,s.jsx)(i.I,{type:"number",label:"Duration (minutes)",value:C.default_duration_minutes,onChange:e=>j({...C,default_duration_minutes:parseInt(e.target.value)}),min:"15",max:"480",required:!0})}),(0,s.jsx)("div",{children:(0,s.jsx)(o.P,{label:"Timezone",value:C.timezone,onChange:e=>j({...C,timezone:e.target.value}),options:g})}),(0,s.jsx)("div",{children:(0,s.jsx)(i.I,{label:"Location",value:C.location,onChange:e=>j({...C,location:e.target.value}),placeholder:"e.g., Room 101, Online, etc."})}),(0,s.jsx)("div",{children:(0,s.jsx)(i.I,{type:"number",label:"Maximum Students",value:C.max_students,onChange:e=>j({...C,max_students:parseInt(e.target.value)}),min:"1",max:"1000"})}),(0,s.jsx)("div",{className:"flex items-center",children:(0,s.jsxs)("label",{className:"flex items-center cursor-pointer",children:[(0,s.jsx)("input",{type:"checkbox",checked:C.is_active,onChange:e=>j({...C,is_active:e.target.checked}),className:"mr-2 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),(0,s.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Active Schedule"})]})})]}),(0,s.jsxs)("div",{className:"flex justify-end space-x-4 mt-6",children:[(0,s.jsx)(l.z,{type:"button",variant:"outline",onClick:()=>y.push("/schedules"),children:"Cancel"}),(0,s.jsx)(l.z,{type:"submit",loading:b,leftIcon:(0,s.jsx)(m.Z,{className:"h-4 w-4"}),children:p?"Update Schedule":"Create Schedule"})]})]})}},39630:function(e,t,a){a.d(t,{AuthProvider:function(){return i},a:function(){return u}});var s=a(57437),n=a(2265),r=a(44316);let l=(0,n.createContext)(void 0);function i(e){let{children:t}=e,[a,i]=(0,n.useState)(null),[u,o]=(0,n.useState)(null),[d,c]=(0,n.useState)(!0),h=(0,r.J)();(0,n.useEffect)(()=>{(async()=>{var e;let{data:{session:t}}=await h.auth.getSession();o(t),i(null!==(e=null==t?void 0:t.user)&&void 0!==e?e:null),c(!1)})();let{data:{subscription:e}}=h.auth.onAuthStateChange(async(e,t)=>{var a;o(t),i(null!==(a=null==t?void 0:t.user)&&void 0!==a?a:null),c(!1)});return()=>e.unsubscribe()},[h.auth]);let m=async(e,t,a)=>{c(!0);try{let{data:s,error:n}=await h.auth.signUp({email:e,password:t,options:a});return{user:s.user,error:n}}finally{c(!1)}},v=async(e,t)=>{c(!0);try{let{data:a,error:s}=await h.auth.signInWithPassword({email:e,password:t});return{user:a.user,error:s}}finally{c(!1)}},f=async()=>{c(!0);try{await h.auth.signOut()}finally{c(!1)}},g=async e=>{let{error:t}=await h.auth.resetPasswordForEmail(e,{redirectTo:"".concat(window.location.origin,"/auth/reset-password")});return{error:t}};return(0,s.jsx)(l.Provider,{value:{user:a,session:u,loading:d,signUp:m,signIn:v,signOut:f,resetPassword:g},children:t})}function u(){let e=(0,n.useContext)(l);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},50586:function(e,t,a){a.d(t,{y:function(){return r}});var s=a(64392);class n{async getSchedules(e){let t=this.supabase.from("schedules").select("\n        *,\n        course:courses(id, title, description),\n        lessons(count)\n      ").order("created_at",{ascending:!1});(null==e?void 0:e.course_id)&&(t=t.eq("course_id",e.course_id)),(null==e?void 0:e.is_active)!==void 0&&(t=t.eq("is_active",e.is_active)),(null==e?void 0:e.user_id)&&(t=t.eq("user_id",e.user_id));let{data:a,error:s}=await t;if(s)throw s;return a}async getSchedule(e){let{data:t,error:a}=await this.supabase.from("schedules").select("\n        *,\n        course:courses(*),\n        lessons(\n          *,\n          objectives:lesson_objectives(\n            *,\n            objective:objectives(*)\n          ),\n          methods:lesson_methods(\n            *,\n            method:methods(*)\n          ),\n          tasks:lesson_tasks(\n            *,\n            task:tasks(*)\n          )\n        )\n      ").eq("id",e).single();if(a)throw a;return t}async createSchedule(e){let{data:t,error:a}=await this.supabase.from("schedules").insert(e).select().single();if(a)throw a;return"none"!==e.recurrence_type&&t&&await this.generateRecurringLessons(t.id,e),t}async updateSchedule(e,t){let{data:a,error:s}=await this.supabase.from("schedules").update(t).eq("id",e).select().single();if(s)throw s;return a}async deleteSchedule(e){let{error:t}=await this.supabase.from("schedules").delete().eq("id",e);if(t)throw t}async getLessons(e){let t=this.supabase.from("lessons").select("\n        *,\n        schedule:schedules(\n          *,\n          course:courses(id, title)\n        ),\n        attendance(count)\n      ").order("date",{ascending:!0}).order("start_time",{ascending:!0});(null==e?void 0:e.schedule_id)&&(t=t.eq("schedule_id",e.schedule_id)),(null==e?void 0:e.status)&&(t=t.eq("status",e.status)),(null==e?void 0:e.date_from)&&(t=t.gte("date",e.date_from)),(null==e?void 0:e.date_to)&&(t=t.lte("date",e.date_to)),(null==e?void 0:e.user_id)&&(t=t.eq("user_id",e.user_id));let{data:a,error:s}=await t;if(s)throw s;return a}async getLesson(e){let{data:t,error:a}=await this.supabase.from("lessons").select("\n        *,\n        schedule:schedules(\n          *,\n          course:courses(*)\n        ),\n        attendance(*),\n        objectives:lesson_objectives(\n          *,\n          objective:objectives(*)\n        ),\n        methods:lesson_methods(\n          *,\n          method:methods(*)\n        ),\n        tasks:lesson_tasks(\n          *,\n          task:tasks(*)\n        )\n      ").eq("id",e).single();if(a)throw a;return t}async createLesson(e){let{data:t,error:a}=await this.supabase.from("lessons").insert(e).select().single();if(a)throw a;return t}async updateLesson(e,t){let{data:a,error:s}=await this.supabase.from("lessons").update({...t,updated_at:new Date().toISOString()}).eq("id",e).select().single();if(s)throw s;return a}async deleteLesson(e){let{error:t}=await this.supabase.from("lessons").delete().eq("id",e);if(t)throw t}async getAttendance(e){let{data:t,error:a}=await this.supabase.from("attendance").select("*").eq("lesson_id",e).order("student_name");if(a)throw a;return t}async markAttendance(e){let{data:t,error:a}=await this.supabase.from("attendance").upsert({...e,marked_at:new Date().toISOString()}).select().single();if(a)throw a;return t}async bulkMarkAttendance(e,t){let a=t.map(t=>({...t,lesson_id:e,marked_at:new Date().toISOString()})),{data:s,error:n}=await this.supabase.from("attendance").upsert(a).select();if(n)throw n;return s}async generateRecurringLessons(e,t){let a=[],s=new Date(t.start_date),n=new Date(t.end_date?t.end_date:s);n.setMonth(n.getMonth()+3);let r=new Date(s),l=1;for(;r<=n;){if(this.shouldCreateLesson(r,t)){let[s,n]=t.default_start_time.split(":").map(Number),i=new Date(r);i.setHours(s,n,0,0);let u=new Date(i);u.setMinutes(u.getMinutes()+t.default_duration_minutes),a.push({schedule_id:e,title:"".concat(t.name," - Lesson ").concat(l),date:r.toISOString().split("T")[0],start_time:i.toTimeString().slice(0,5),end_time:u.toTimeString().slice(0,5),duration_minutes:t.default_duration_minutes,location:t.location,status:"scheduled",user_id:t.user_id}),l++}r=this.getNextLessonDate(r,t)}if(a.length>0){let{error:e}=await this.supabase.from("lessons").insert(a);if(e)throw e}}shouldCreateLesson(e,t){if("none"===t.recurrence_type)return!0;let a=e.toLocaleDateString("en-US",{weekday:"long"}).toLowerCase();return!t.recurrence_days||!(t.recurrence_days.length>0)||t.recurrence_days.includes(a)}getNextLessonDate(e,t){let a=new Date(e);return a.setDate(a.getDate()+1),a}transformToCalendarEvents(e){return e.map(e=>{let t=new Date("".concat(e.date,"T").concat(e.start_time)),a=new Date("".concat(e.date,"T").concat(e.end_time));return{id:e.id,title:e.title,start:t,end:a,resource:{lesson:e,schedule:e.schedule},className:this.getLessonClassName(e.status)}})}getLessonClassName(e){switch(e){case"completed":return"bg-green-100 border-green-300 text-green-800";case"cancelled":return"bg-red-100 border-red-300 text-red-800";case"draft":return"bg-gray-100 border-gray-300 text-gray-800";default:return"bg-blue-100 border-blue-300 text-blue-800"}}async getScheduleStats(e){let{data:t,error:a}=await this.supabase.from("lessons").select("status, attendance(status)").eq("schedule_id",e);if(a)throw a;let s={total_lessons:(null==t?void 0:t.length)||0,completed_lessons:(null==t?void 0:t.filter(e=>"completed"===e.status).length)||0,cancelled_lessons:(null==t?void 0:t.filter(e=>"cancelled"===e.status).length)||0,scheduled_lessons:(null==t?void 0:t.filter(e=>"scheduled"===e.status).length)||0,attendance_rate:0},n=(null==t?void 0:t.flatMap(e=>e.attendance||[]))||[],r=n.filter(e=>"present"===e.status).length;return n.length>0&&(s.attendance_rate=Math.round(r/n.length*100)),s}constructor(){this.supabase=(0,s.createClientComponentClient)()}}let r=new n},44316:function(e,t,a){a.d(t,{J:function(){return n}});var s=a(64392);let n=()=>(0,s.createClientComponentClient)()},42368:function(e,t,a){a.d(t,{J:function(){return n}});let s=(0,a(64392).createClientComponentClient)(),n={async getCourses(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=s.from("courses").select("\n        *,\n        category:categories(id, name, color, icon)\n      ").order("created_at",{ascending:!1});e.status&&(t=t.eq("status",e.status)),e.difficulty&&(t=t.eq("difficulty",e.difficulty)),e.categoryId&&(t=t.eq("category_id",e.categoryId)),void 0!==e.isPublic&&(t=t.eq("is_public",e.isPublic)),e.search&&(t=t.or("title.ilike.%".concat(e.search,"%,description.ilike.%").concat(e.search,"%"))),e.tags&&e.tags.length>0&&(t=t.contains("tags",e.tags));let{data:a,error:n}=await t;if(n)throw n;return a},async getCourse(e){let{data:t,error:a}=await s.from("courses").select("\n        *,\n        category:categories(id, name, color, icon),\n        course_books(\n          id,\n          book_id,\n          is_required,\n          notes,\n          position,\n          book:books(id, title, author, cover_image_url)\n        ),\n        course_vocabulary_groups(\n          id,\n          vocabulary_group_id,\n          position,\n          vocabulary_group:vocabulary_groups(id, name, language, difficulty)\n        )\n      ").eq("id",e).single();if(a)throw a;return t},async createCourse(e){let{data:t}=await s.auth.getUser();if(!t.user)throw Error("User not authenticated");let{data:a,error:n}=await s.from("courses").insert({...e,user_id:t.user.id,status:e.status||"draft",difficulty:e.difficulty||"beginner",is_public:e.is_public||!1}).select().single();if(n)throw n;return a},async updateCourse(e){let{id:t,...a}=e,{data:n,error:r}=await s.from("courses").update({...a,updated_at:new Date().toISOString()}).eq("id",t).select().single();if(r)throw r;return n},async deleteCourse(e){let{error:t}=await s.from("courses").delete().eq("id",e);if(t)throw t},async publishCourse(e){let{data:t,error:a}=await s.from("courses").update({status:"published",published_at:new Date().toISOString(),updated_at:new Date().toISOString()}).eq("id",e).select().single();if(a)throw a;return t},async archiveCourse(e){let{data:t,error:a}=await s.from("courses").update({status:"archived",updated_at:new Date().toISOString()}).eq("id",e).select().single();if(a)throw a;return t},async getCourseStats(){let{data:e}=await s.auth.getUser();if(!e.user)throw Error("User not authenticated");let{data:t,error:a}=await s.from("courses").select("status",{count:"exact"}).eq("user_id",e.user.id);if(a)throw a;return{total:(null==t?void 0:t.length)||0,draft:(null==t?void 0:t.filter(e=>"draft"===e.status).length)||0,published:(null==t?void 0:t.filter(e=>"published"===e.status).length)||0,archived:(null==t?void 0:t.filter(e=>"archived"===e.status).length)||0}}}},13027:function(e,t,a){a.d(t,{j:function(){return l}});var s=a(44839);let n=e=>"boolean"==typeof e?`${e}`:0===e?"0":e,r=s.W,l=(e,t)=>a=>{var s;if((null==t?void 0:t.variants)==null)return r(e,null==a?void 0:a.class,null==a?void 0:a.className);let{variants:l,defaultVariants:i}=t,u=Object.keys(l).map(e=>{let t=null==a?void 0:a[e],s=null==i?void 0:i[e];if(null===t)return null;let r=n(t)||n(s);return l[e][r]}),o=a&&Object.entries(a).reduce((e,t)=>{let[a,s]=t;return void 0===s||(e[a]=s),e},{});return r(e,u,null==t?void 0:null===(s=t.compoundVariants)||void 0===s?void 0:s.reduce((e,t)=>{let{class:a,className:s,...n}=t;return Object.entries(n).every(e=>{let[t,a]=e;return Array.isArray(a)?a.includes({...i,...o}[t]):({...i,...o})[t]===a})?[...e,a,s]:e},[]),null==a?void 0:a.class,null==a?void 0:a.className)}},44839:function(e,t,a){a.d(t,{W:function(){return s}});function s(){for(var e,t,a=0,s="",n=arguments.length;a<n;a++)(e=arguments[a])&&(t=function e(t){var a,s,n="";if("string"==typeof t||"number"==typeof t)n+=t;else if("object"==typeof t){if(Array.isArray(t)){var r=t.length;for(a=0;a<r;a++)t[a]&&(s=e(t[a]))&&(n&&(n+=" "),n+=s)}else for(s in t)t[s]&&(n&&(n+=" "),n+=s)}return n}(e))&&(s&&(s+=" "),s+=t);return s}}}]);